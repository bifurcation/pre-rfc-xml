<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
  ]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc toc="yes" ?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>
<?rfc compact="yes" ?>
<?rfc subcompact="no"?>

<rfc category="std" ipr="trust200902" number="8362" updates="5340, 5838" submissionType="IETF" consensus="yes">

<front>
<title abbrev="OSPFv3 LSA Extensibility">OSPFv3 Link State Advertisement (LSA) Extensibility</title>
  <author initials='A.' surname="Lindem" fullname='Acee Lindem'>
    <organization>Cisco Systems</organization>
    <address>
      <postal>
        <street>301 Midenhall Way</street>
        <city>Cary</city> <region>NC</region> 
        <country>United States of America</country>
        <code>27513</code> 
       </postal>
       <email>acee@cisco.com</email>
    </address>
    </author>

  <author initials='A.' surname="Roy" fullname='Abhay Roy'>
    <organization>Cisco Systems</organization>
    <address>
       <postal>
        <street>170 Tasman Drive</street>
        <city>San Jose</city> <region>CA</region> 
        <country>United States of America</country>
        <code>95134</code> 
       </postal>
       <email>akr@cisco.com</email>
    </address>
    </author>

  <author initials='D.' surname="Goethals" fullname='Dirk Goethals'>
    <organization>Nokia</organization>
    <address>
      <postal>
        <street>Copernicuslaan 50</street>
        <city>Antwerp 2018</city>
        <country>Belgium</country>
       </postal>
       <email>dirk.goethals@nokia.com</email>
    </address>
   </author>

  <author initials='V.' surname="Reddy Vallem" fullname='Veerendranatha Reddy Vallem'>
    <address>
      <postal>
         <street/>
         <city>Bangalore</city>
         <country>India</country>
       </postal>
       <email>vallem.veerendra@gmail.com</email>
    </address>
   </author>

  <author initials='F.' surname="Baker" fullname='Fred Baker'>
     <address>
      <postal>
        <street/>

        <city>Santa Barbara</city>

        <code>93117</code>

        <region>California</region>

        <country>United States of America</country>
      </postal>
      <email>FredBaker.IETF@gmail.com</email>
    </address>
    </author>
<date month="March" year="2018"/>

  <abstract>
  <t>OSPFv3 requires functional extension beyond what can readily be done with the
   fixed-format Link State Advertisement (LSA) as described in RFC 5340.
   Without LSA extension, attributes associated with OSPFv3 links and advertised IPv6 prefixes 
   must be advertised in separate LSAs and correlated to the fixed-format LSAs.
   This document extends the LSA format by encoding the existing OSPFv3 LSA 
   information in Type-Length-Value (TLV) tuples and allowing advertisement
   of additional information with additional TLVs. 
   Backward-compatibility mechanisms are also described.</t> 

   <t>This document updates RFC 5340, "OSPF for IPv6", and RFC 5838, "Support of Address
   Families in OSPFv3", by providing TLV-based encodings for the base OSPFv3 unicast support
   and OSPFv3 address family support.</t> 
  </abstract>
</front>

<middle>
<section title="Introduction">
  <t>OSPFv3 requires functional extension beyond what can readily be done with the
   fixed-format Link State Advertisement (LSA) as described in RFC 5340 <xref target="OSPFV3"/>.
   Without LSA extension, attributes associated with OSPFv3 links and advertised IPv6 prefixes 
   must be advertised in separate LSAs and correlated to the fixed-format LSAs.
   This document extends the LSA format by encoding the existing OSPFv3 LSA 
   information in Type-Length-Value (TLV) tuples and allowing advertisement
   of additional information with additional TLVs. 
   Backward-compatibility mechanisms are also described.</t> 

   <t>This document updates RFC 5340, "OSPF for IPv6", and RFC 5838, "Support of Address
   Families in OSPFv3", by providing TLV-based encodings for the base OSPFv3 support 
   <xref target="OSPFV3"/> and OSPFv3 address family support <xref target="OSPFV3-AF"/>.</t> 

  <t>A similar extension was previously proposed in support of multi-topology routing.
     Additional requirements for the OSPFv3 LSA extension include source/destination routing, 
     route tagging, and others.</t> 

   <t>A final requirement is to limit the changes to OSPFv3 to those necessary for 
      TLV-based LSAs. For the most part, the semantics of existing OSPFv3 LSAs are retained for
      their TLV-based successor LSAs described herein. Additionally, encoding details, e.g.,
      the representation of IPv6 prefixes as described in Appendix A.4.1 in 
      RFC 5340 <xref target="OSPFV3"/>, have been retained. This requirement was included
      to increase the expedience of IETF adoption and deployment.</t>

   <t>The following aspects of the OSPFv3 LSA extension are described:
   <list style="numbers"> 
      <t>Extended LSA Types</t> 
      <t>Extended LSA TLVs</t> 
      <t>Extended LSA Formats</t> 
      <t>Backward Compatibility</t>
   </list></t>
  <section title="Requirements Notation">
     <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
      "MAY", and "OPTIONAL" in this document are to be interpreted as
      described in BCP&nbsp;14 <xref target="RFC2119"/> <xref target="RFC8174"/> 
      when, and only when, they appear in all capitals, as shown here.</t>
  </section>
  <section title="OSPFv3 LSA Terminology">
   <t>The TLV-based OSPFv3 LSAs described in this document will be referred to as
      Extended LSAs. The OSPFv3 fixed-format LSAs <xref target="OSPFV3"/> will
      be referred to as Legacy LSAs.</t>
   </section>
  </section>

<section anchor="LSATYPE" title="OSPFv3 Extended LSA Types">
<t>In order to provide backward compatibility, new LSA codes must be allocated. There are eight 
   fixed-format LSAs defined in RFC 5340 <xref target="OSPFV3"/>. For ease of implementation and
   debugging, the LSA function codes are the same as the fixed-format LSAs only with 32, i.e., 0x20, added. 
   The alternative to this mapping was to allocate a bit in the LS Type indicating the 
   new LSA format. However, this would have used one half the LSA function code space for the 
   migration of the eight original fixed-format LSAs. For backward compatibility, the U-bit MUST be
   set in the LS Type so that the LSAs will be flooded by OSPFv3 routers that do not understand them.</t>
   <t><figure title="OSPFv3 Extended LSA Types">
     <artwork>

         LSA function code   LS Type   Description
         ----------------------------------------------------
         33                  0xA021    E-Router-LSA
         34                  0xA022    E-Network-LSA
         35                  0xA023    E-Inter-Area-Prefix-LSA
         36                  0xA024    E-Inter-Area-Router-LSA
         37                  0xC025    E-AS-External-LSA
         38                  N/A       Unused (Not to be allocated)
         39                  0xA027    E-Type-7-LSA
         40                  0x8028    E-Link-LSA
         41                  0xA029    E-Intra-Area-Prefix-LSA

      </artwork>
   </figure></t>
</section>
<section anchor="TLV" title="OSPFv3 Extended LSA TLVs">
   <t>The format of the TLVs within the body of the Extended LSAs is the same as
       the format used by the Traffic Engineering Extensions to OSPF <xref target="TE"/>.
       The variable TLV section consists of one or more nested TLV
       tuples.  Nested TLVs are also referred to as sub-TLVs. 
       The format of each TLV is:</t>


   <t><figure title="TLV Format">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            Value...                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>

   <t>The Length field defines the length of the value portion in octets
   (thus, a TLV with no value portion would have a length of 0).  The TLV
   is padded to 4-octet alignment; padding is not included in the Length
   field (so a 3-octet value would have a length of 3, but the total
   size of the TLV would be 8 octets).  Nested TLVs are also 32-bit
   aligned.  For example, a 1-byte value would have the Length field set
   to 1, and 3 octets of padding would be added to the end of the value
   portion of the TLV.</t>
<t>This document defines the following top-level TLV types:
   <list style="symbols"> 
     <t>0 - Reserved</t>
     <t>1 - Router-Link TLV</t>
     <t>2 - Attached-Routers TLV</t>
     <t>3 - Inter-Area-Prefix TLV</t>
     <t>4 - Inter-Area-Router TLV</t>
     <t>5 - External-Prefix TLV</t>
     <t>6 - Intra-Area-Prefix TLV</t>
     <t>7 - IPv6 Link-Local Address TLV</t>
     <t>8 - IPv4 Link-Local Address TLV</t>
    </list></t>

<t>Additionally, this document defines the following sub-TLV types: 
   <list style="symbols"> 
     <t>0 - Reserved</t>
     <t>1 - IPv6-Forwarding-Address sub-TLV</t>
     <t>2 - IPv4-Forwarding-Address sub-TLV</t>
     <t>3 - Route-Tag sub-TLV</t>
    </list></t>

<t>In general, TLVs and sub-TLVs MAY occur in any order, and the specification
should define whether the TLV or sub-TLV is required and the behavior when
there are multiple occurrences of the TLV or sub-TLV. While this document only 
describes the usage of TLVs and sub-TLVs, sub-TLVs may be nested to any
level as long as the sub-TLVs are fully specified in the specification for the
subsuming sub-TLV. 
</t>

<t>For backward compatibility, an LSA is not considered malformed from a TLV perspective
unless either a required TLV is missing or a specified TLV is less than the minimum
required length. Refer to <xref target="TLV-PROCESS"/> for more information on TLV
backward compatibility.
</t> 

<section anchor="PrefixOptions" title="Prefix Options Extensions">
<t>The prefix options are extended from Appendix A.4.1.1 <xref target="OSPFV3"/>.
The applicability of the LA-bit is expanded, and it
SHOULD be set in Inter-Area-Prefix TLVs and MAY be set in External-Prefix TLVs when the 
advertised host IPv6 address, i.e., PrefixLength = 128 for the IPv6 Address Family or PrefixLength = 32 for the
IPv4 Address Family <xref target="OSPFV3-AF"/>, is an interface address. In RFC 5340, 
the LA-bit is only set in Intra-Area-Prefix-LSAs (Section 4.4.3.9 of
<xref target="OSPFV3"/>). This will allow a stable address to be advertised without having
to configure a separate loopback address in every OSPFv3 area.</t>

<section anchor="N-BIT" title="N-bit Prefix Option">

<t>Additionally, the N-bit prefix option is defined. The figure below shows the position
of the N-bit in the prefix options (value 0x20).
<figure title="The Prefix Options Field">
   <artwork>
                       0  1  2  3  4  5  6  7
                     +--+--+--+--+--+--+--+--+
                     |  |  | N|DN| P| x|LA|NU|
                     +--+--+--+--+--+--+--+--+    
    </artwork>
</figure>
</t>
<t>The N-bit is set in PrefixOptions for a host address
(PrefixLength=128 for the IPv6 Address Family or PrefixLength=32 for
the IPv4 Address Family <xref target="OSPFV3-AF"/>) that identifies the advertising router. While it is similar to the LA-bit, 
there are two differences. The advertising router MAY choose NOT to set the N-bit even
when the above conditions are met. If the N-bit is set and the
PrefixLength is NOT 128 for the IPv6 Address Family or 32 for the IPv4 Address Family <xref target="OSPFV3-AF"/>, the N-bit 
MUST be ignored. Additionally, the N-bit is propagated 
in the PrefixOptions when an OSPFv3 Area Border Router (ABR) originates an 
Inter-Area-Prefix-LSA for an Intra-Area route that has the N-bit set in the PrefixOptions.
Similarly, the N-bit is propagated in the PrefixOptions when an OSPFv3 Not-So-Stubby Area (NSSA) ABR originates an
E-AS-External-LSA corresponding to an NSSA route as described in Section 3 of  
RFC 3101 <xref target="NSSA"/>.
The N-bit is added to the Inter&nbhy;Area&nbhy;Prefix TLV (<xref target="Inter-Area-Prefix-TLV"/>), 
External-Prefix TLV (<xref target="External-Prefix-TLV"/>), 
and Intra&nbhy;Area&nbhy;Prefix&nbhy;TLV (<xref target="Intra-Area-Prefix-TLV"/>). The N-bit is used as hint
to identify the preferred address to reach the advertising OSPFv3 router. This would be in 
contrast to an anycast address <xref target="IPV6-ADDRESS-ARCH"/>, which could also be a local address with 
the LA&nbhy;bit set. It is useful for applications such as identifying the prefixes corresponding to 
Node Segment Identifiers (SIDs) in Segment Routing <xref target="SEGMENT-ROUTING"/>. There may be 
future applications requiring selection of a prefix associated with an OSPFv3 router.</t>
</section></section>

<section anchor="Router-Link-TLV" title="Router-Link TLV">
<t>The Router-Link TLV defines a single router link, and the field  
definitions correspond directly to links in the OSPFv3 Router-LSA; 
see Appendix A.4.3 of <xref target="OSPFV3"/>. The Router-Link TLV is only
applicable to the E-Router-LSA (<xref target="E-Router-LSA"/>).
Inclusion in other Extended LSAs MUST be ignored.</t>

   <t><figure title="Router-Link TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          1 (Router-Link)      |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |       0       |           Metric              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Interface ID                             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Neighbor Interface ID                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Neighbor Router ID                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
</section>

<section anchor="Attached-Routers-TLV" title="Attached-Routers TLV">
<t>The Attached-Routers TLV defines all the routers attached to an OSPFv3
multi-access network. The field  
definitions correspond directly to content of the OSPFv3 Network-LSA; see
Appendix A.4.4 of <xref target="OSPFV3"/>. The Attached-Routers TLV is only
applicable to the E&nbhy;Network&nbhy;LSA (<xref target="E-Network-LSA"/>).
Inclusion in other Extended LSAs MUST be ignored.</t>
   <t><figure title="Attached-Routers TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        2 (Attached-Routers)   |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Adjacent Neighbor Router ID                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .              Additional Adjacent Neighbors                    .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
  <t>There are two reasons for not having a separate TLV or sub-TLV for
     each adjacent neighbor. The first is to discourage using the 
     E&nbhy;Network&nbhy;LSA for more than its current role of solely advertising 
     the routers attached to a multi-access network. The router's metric 
     as well as the attributes of individual attached routers should be advertised
     in their respective E-Router-LSAs. The second reason is that 
     there is only a single E-Network-LSA per multi-access link
     with the Link State ID set to the Designated Router's Interface ID, 
     and consequently, compact encoding has been chosen to
     decrease the likelihood that the size of the E-Network-LSA will require
     IPv6 fragmentation when advertised in an OSPFv3 Link State 
     Update packet.<vspace blankLines="100"/></t>

</section>

<section anchor="Inter-Area-Prefix-TLV" title="Inter-Area-Prefix TLV">
<t>The Inter-Area-Prefix TLV defines a single OSPFV3 inter-area prefix. 
The field definitions correspond directly to the content of an OSPFv3 IPv6 Prefix,
as defined in Appendix A.4.1 of <xref target="OSPFV3"/>, and an OSPFv3 
Inter-Area-Prefix-LSA, as defined in Appendix A.4.5 of <xref target="OSPFV3"/>.
Additionally, the PrefixOptions are extended as described in
<xref target="PrefixOptions"/>.
The Inter-Area-Prefix TLV is only
applicable to the E&nbhy;Inter&nbhy;Area&nbhy;Prefix&nbhy;LSA (<xref target="E-Inter-Area-Prefix-LSA"/>).
Inclusion in other Extended LSAs MUST be ignored.</t>
   <t><figure title="Inter-Area-Prefix TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       3 (Inter-Area Prefix)   |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      0        |                  Metric                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | PrefixLength  | PrefixOptions |              0                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Address Prefix                         |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure><vspace blankLines="100"/></t>
</section>

<section anchor="Inter-Area-Router-TLV" title="Inter-Area-Router TLV">
<t>The Inter-Area-Router TLV defines a single OSPFv3 Autonomous System 
Boundary Router (ASBR) that is reachable in another area. 
The field definitions correspond directly to the content of an 
OSPFv3 Inter&nbhy;Area&nbhy;Router&nbhy;LSA, as
defined in Appendix A.4.6 of <xref target="OSPFV3"/>. The Inter-Area-Router TLV is only
applicable to the E&nbhy;Inter&nbhy;Area&nbhy;Router&nbhy;LSA (<xref target="E-Inter-Area-Router-LSA"/>).
Inclusion in other Extended LSAs MUST be ignored.</t>
   <t><figure title="Inter-Area-Router TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       4 (Inter-Area Router)   |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      0        |                Options                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      0        |                Metric                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Destination Router ID                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure><vspace blankLines="100"/></t>
</section>

<section anchor="External-Prefix-TLV" title="External-Prefix TLV">
<t>The External-Prefix TLV defines a single OSPFv3 external prefix. 
With the exception of omitted fields noted below, the field definitions 
correspond directly to the content of an OSPFv3 IPv6 Prefix,
as defined in Appendix A.4.1 of <xref target="OSPFV3"/>, and an OSPFv3 AS&nbhy;External&nbhy;LSA,
as defined in Appendix A.4.7 of <xref target="OSPFV3"/>. The External-Prefix TLV is only
applicable to the E-AS-External-LSA (<xref target="E-AS-External-LSA"/>) and 
the E-NSSA-LSA (<xref target="E-NSSA-LSA"/>).
Additionally, the PrefixOptions are extended as described in
<xref target="PrefixOptions"/>.
Inclusion in other Extended LSAs MUST be ignored.</t>
   <t><figure title="External-Prefix TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       5 (External Prefix)     |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         |E| | |                Metric                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | PrefixLength  | PrefixOptions |              0                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Address Prefix                         |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
     <t>In the External-Prefix TLV, the optional IPv6/IPv4 Forwarding Address and 
     External Route Tag are now sub-TLVs. Given
     the Referenced LS Type and Referenced Link State ID from the
     AS-External-LSA have never been used or even specified, they have
     been omitted from the External-Prefix TLV. If there were ever 
     a requirement for a referenced LSA, it could be satisfied
     with a sub-TLV.</t> 
  <t>The following sub-TLVs are defined for optional inclusion in
     the External-Prefix TLV:
     <vspace blankLines="0" /><list style="symbols"> 
     <t>1 - IPv6-Forwarding-Address sub-TLV (<xref target="IPv6-Forwarding-Address-TLV"/>)</t>
     <t>2 - IPv4-Forwarding-Address sub-TLV (<xref target="IPv4-Forwarding-Address-TLV"/>)</t>
     <t>3 - Route-Tag sub-TLV (<xref target="Route-Tag-TLV"/>)</t>
   </list><vspace blankLines="100"/></t>
</section>

<section anchor="Intra-Area-Prefix-TLV" title="Intra-Area-Prefix TLV">
<t>The Intra-Area-Prefix TLV defines a single OSPFv3 intra-area prefix. 
The field definitions correspond directly to the content of an OSPFv3 IPv6 Prefix,
as defined in Appendix A.4.1 of <xref target="OSPFV3"/>, and an OSPFv3 Link-LSA, as
defined in Appendix A.4.9 of <xref target="OSPFV3"/>. The Intra&nbhy;Area&nbhy;Prefix TLV is only
applicable to the E-Link-LSA (<xref target="E-Link-LSA"/>) and the
E-Intra-Area-Prefix-LSA (<xref target="E-Intra-Area-Prefix-LSA"/>).
Additionally, the PrefixOptions are extended as described in
<xref target="PrefixOptions"/>.
Inclusion in other Extended LSAs MUST be ignored.</t>
   <t><figure title="Intra-Area-Prefix TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       6 (Intra-Area Prefix)   |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      0        |                  Metric                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | PrefixLength  | PrefixOptions |              0                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Address Prefix                         |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure><vspace blankLines="100"/></t>
</section>

<section anchor="IPv6-Link-Local-Address-TLV" title="IPv6 Link-Local Address TLV">
  <t>The IPv6 Link-Local Address TLV is to be used with IPv6 address families
     as defined in <xref target="OSPFV3-AF"/>.
     The IPv6 Link-Local Address TLV is only applicable 
     to the E-Link-LSA (<xref target="E-Link-LSA"/>). Inclusion in other Extended
     LSAs MUST be ignored.</t>
   <t><figure title="IPv6 Link-Local Address TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  7 (IPv6 Local-Local Address) |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +-                                                             -+
   |                                                               |
   +-            IPv6 Link-Local Interface Address                -+
   |                                                               |
   +-                                                             -+
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure><vspace blankLines="100"/></t>
</section>

<section anchor="IPv4-Link-Local-Address-TLV" title="IPv4 Link-Local Address TLV">
  <t>The IPv4 Link-Local Address TLV is to be used with IPv4 address families
     as defined in <xref target="OSPFV3-AF"/>.
     The IPv4 Link-Local Address TLV is only applicable 
     to the E-Link-LSA (<xref target="E-Link-LSA"/>). Inclusion in other Extended
     LSAs MUST be ignored.</t>
   <t><figure title="IPv4 Link-Local Address TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  8 (IPv4 Local-Local Address) |       TLV Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             IPv4 Link-Local Interface Address                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            Sub-TLVs                           .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure><vspace blankLines="100"/></t>
</section>

<section anchor="IPv6-Forwarding-Address-TLV" title="IPv6-Forwarding-Address Sub-TLV">
   <t>The IPv6-Forwarding-Address TLV has identical semantics
      to the optional forwarding address in Appendix A.4.7 of 
      <xref target="OSPFV3"/>. The IPv6-Forwarding-Address TLV is 
      applicable to the External-Prefix TLV (<xref target="External-Prefix-TLV"/>). 
      Specification as a sub-TLV of other TLVs is not defined herein. 
      The sub-TLV is optional and the first specified instance is used
      as the forwarding address as defined in <xref target="OSPFV3"/>. 
      Instances 
      subsequent to the first MUST be ignored.</t>

     <t>The IPv6-Forwarding-Address TLV is to be used with IPv6 address families
      as defined in <xref target="OSPFV3-AF"/>. It MUST be ignored for other 
      address families. 
      The IPv6-Forwarding-Address TLV length must meet a minimum 
      length (16 octets), or it will be considered malformed as described in 
      <xref target="TLV-PROCESS"/>.
       </t>
   <t><figure title="IPv6-Forwarding-Address TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       1 - Forwarding Address  |          sub-TLV Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +-                                                             -+
   |                                                               |
   +-                    Forwarding Address                       -+
   |                                                               |
   +-                                                             -+
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
</section>

<section anchor="IPv4-Forwarding-Address-TLV" title="IPv4-Forwarding-Address Sub-TLV">
   <t>The IPv4-Forwarding-Address TLV has identical semantics
      to the optional forwarding address in Appendix A.4.7 of 
      <xref target="OSPFV3"/>. The IPv4&nbhy;Forwarding&nbhy;Address TLV is  
      applicable to the External-Prefix TLV (<xref target="External-Prefix-TLV"/>). 
      Specification as a sub-TLV of other TLVs is not defined herein. 
      The sub-TLV is optional, and the first specified instance is used
      as the forwarding address as defined in <xref target="OSPFV3"/>. 
      Instances 
      subsequent to the first MUST be ignored.</t>

     <t>The IPv4-Forwarding-Address TLV is to be used with IPv4 address families
      as defined in <xref target="OSPFV3-AF"/>. It MUST be ignored for other 
      address families.
      The IPv4-Forwarding-Address TLV length must meet a minimum 
      length (4 octets), or it will be considered malformed as described in 
      <xref target="TLV-PROCESS"/>.
      </t>
   <t><figure title="IPv4-Forwarding-Address TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       2 - Forwarding Address  |          sub-TLV Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Forwarding Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
</section>

<section anchor="Route-Tag-TLV" title="Route-Tag Sub-TLV">
   <t>The optional Route-Tag sub-TLV has identical semantics
      to the optional External Route Tag in Appendix A.4.7 of 
      <xref target="OSPFV3"/>. The Route-Tag sub-TLV is 
      applicable to the External-Prefix TLV (<xref target="External-Prefix-TLV"/>).  
      Specification as a sub-TLV 
      of other TLVs is not defined herein. The sub-TLV is optional, 
      and the first specified instance is used as the Route Tag 
      as defined in <xref target="OSPFV3"/>. Instances 
      subsequent to the first MUST be ignored.</t>

      <t>The Route-Tag TLV length must meet a minimum 
      length (4 octets), or it will be considered malformed as described in 
      <xref target="TLV-PROCESS"/>.
     </t>
   <t><figure title="Route-Tag Sub-TLV">
     <artwork>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       3 - Route Tag           |          sub-TLV Length       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Route Tag                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
</section>

</section>
<section anchor="EXTENDED-LSAS" title="OSPFv3 Extended LSAs">
<t>This section specifies the OSPFv3 Extended LSA formats and 
encoding. The Extended OSPFv3 LSAs corresponded directly to the 
original OSPFv3 LSAs specified in <xref target="OSPFV3"/>.</t>
<section anchor="E-Router-LSA" title="OSPFv3 E-Router-LSA">
<t>The E-Router-LSA has an LS Type of 0xA021 and has 
the same base information content as the Router-LSA defined in 
Appendix A.4.3 of <xref target="OSPFV3"/>. However, unlike the existing
Router-LSA, it is fully extensible and represented as TLVs.</t>
   <t><figure title="Extended Router-LSA">
     <artwork>

    0                    1                   2                   3
    0 1 2 3  4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           LS Age               |1|0|1|         0x21            |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Link State ID                            |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Advertising Router                          |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    LS Sequence Number                          |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        LS Checksum             |            Length             |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  0  |Nt|x|V|E|B|            Options                            |
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                                .
   .                            TLVs                                .
   .                                                                .
   +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
   <t>Other than having a different LS Type, all LSA Header fields are 
    the same as defined for the Router-LSA.
    Initially, only the top-level Router-Link TLV (<xref target="Router-Link-TLV"/>)
    is applicable, and an E-Router-LSA may include multiple
    Router-Link TLVs.  Like the existing Router-LSA, the LSA length is used to
    determine the end of the LSA including any TLVs. Depending on the
    implementation, it is perfectly valid for an E&nbhy;Router&nbhy;LSA to not
    contain any Router-Link TLVs. However, this would imply that the
    OSPFv3 router doesn't have any adjacencies in the corresponding
    area and is forming an adjacency or adjacencies over an unnumbered 
    link(s). Note that no E-Router-LSA stub link is advertised for
    an unnumbered link.
    <vspace blankLines="100"/></t>
</section>

<section anchor="E-Network-LSA" title="OSPFv3 E-Network-LSA">
<t>The E-Network-LSA has an LS Type of 0xA022 and has the same 
base information content as the Network-LSA defined in Appendix A.4.4
of <xref target="OSPFV3"/>. However, unlike the existing Network-LSA,
it is fully extensible and represented as TLVs.</t>
   <t><figure title="E-Network-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          LS Age               |1|0|1|         0x22            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       LS Checksum             |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       0       |            Options                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                           TLVs                                .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
   <t>Other than having a different LS Type, all LSA Header fields are 
     the same as defined for the Network-LSA.
     Like the existing Network-LSA, the LSA length is used to determine
     the end of the LSA including any TLVs. 
     Initially, only the top-level Attached-Routers TLV 
     (<xref target="Attached-Routers-TLV"/>) is applicable. 
     If the Attached-Router TLV is not included in the E-Network-LSA, it is 
     treated as malformed as described in <xref target="MALFORMED"/>. 
     Instances of the Attached-Router TLV subsequent to the first MUST be ignored. 
     <vspace blankLines="100"/></t>
</section>

<section anchor="E-Inter-Area-Prefix-LSA" title="OSPFv3 E-Inter-Area-Prefix-LSA">
<t>The E-Inter-Area-Prefix-LSA has an LS Type of 0xA023 and has the same
base information content as the Inter-Area-Prefix-LSA defined in Appendix A.4.5 of
<xref target="OSPFV3"/>. However, unlike the existing Inter&nbhy;Area&nbhy;Prefix&nbhy;LSA, 
it is fully extensible and represented as TLVs.</t>
   <t><figure title="E-Inter-Area-Prefix-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          LS Age               |1|0|1|         0x23            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       LS Checksum             |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                           TLVs                                .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
   <t>Other than having a different LS Type, all LSA Header fields are 
      the same as defined for the Inter-Area-Prefix-LSA. In order to retain 
      compatibility and semantics
      with the current OSPFv3 specification, each Inter-Area-Prefix LSA 
      MUST contain a single Inter-Area-Prefix TLV. This will 
      facilitate migration and avoid changes to functions such as 
      incremental Shortest Path First (SPF) computation.</t>

    <t>Like the existing Inter-Area-Prefix-LSA, the LSA length is used to determine
       the end of the LSA including any TLVs. 
       Initially, only the top-level Inter-Area-Prefix TLV
       (<xref target="Inter-Area-Prefix-TLV"/>) is applicable.
       If the Inter-Area-Prefix TLV is not included in the E-Inter-Area-Prefix-LSA,
       it is treated as malformed as described in <xref target="MALFORMED"/>.
       Instances of the 
       Inter-Area-Prefix TLV subsequent to the first MUST be ignored. 
<vspace blankLines="100"/></t>
</section> 

<section anchor="E-Inter-Area-Router-LSA" title="OSPFv3 E-Inter-Area-Router-LSA">
<t>The E-Inter-Area-Router-LSA has an LS Type of 0xA024 and has the same base
information content as the Inter-Area-Router-LSA defined in Appendix A.4.6
of <xref target="OSPFV3"/>. However, unlike the Inter&nbhy;Area&nbhy;Router&nbhy;LSA, it is
fully extensible and represented as TLVs.</t>
   <t><figure title="E-Inter-Area-Router-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          LS Age               |1|0|1|         0x24            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       LS Checksum             |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                           TLVs                                .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
   <t>Other than having a different LS Type, all LSA Header fields are the 
      same as defined for the Inter-Area-Router-LSA. In order to retain 
      compatibility and semantics
      with the current OSPFv3 specification, each Inter-Area-Router-LSA 
      MUST contain a single Inter-Area-Router TLV. This will 
      facilitate migration and avoid changes to functions such as 
      incremental SPF computation.</t>

    <t>Like the existing Inter-Area-Router-LSA, the LSA length is used to determine
       the end of the LSA including any TLVs. 
       Initially, only the top-level Inter-Area-Router TLV
       (<xref target="Inter-Area-Router-TLV"/>) is applicable.
       If the Inter-Area-Router TLV is not included in the E-Inter-Area-Router-LSA, it is 
       treated as malformed as described in <xref target="MALFORMED"/>.
       Instances of the 
       Inter-Area-Router TLV subsequent to the first MUST be ignored. 
       <vspace blankLines="100"/></t>
</section> 

<section anchor="E-AS-External-LSA" title="OSPFv3 E-AS-External-LSA">
<t>The E-AS-External-LSA has an LS Type of 0xC025 and has the same base
information content as the AS-External-LSA defined in Appendix A.4.7 of
<xref target="OSPFV3"/>. However, unlike the existing AS-External-LSA, it is 
fully extensible and represented as TLVs.</t>
   <t><figure title="E-AS-External-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          LS Age               |1|1|0|         0x25            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       LS Checksum             |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                           TLVs                                .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
   <t>Other than having a different LS Type, all LSA Header fields are the same 
     as defined for the AS-External-LSA. 
     In order to retain compatibility and semantics with the current
     OSPFv3 specification, each LSA MUST contain a single 
     External-Prefix TLV. This will facilitate migration and avoid
     changes to OSPFv3 functions such as incremental SPF computation.</t> 

  <t>Like the existing AS-External-LSA, the LSA length is used
     to determine the end of the LSA including any TLVs.
     Initially, only the top-level External-Prefix TLV
     (<xref target="External-Prefix-TLV"/>) is applicable.
       If the External-Prefix TLV is not included in the E-External-AS-LSA, it is 
       treated as malformed as described in <xref target="MALFORMED"/>.
       Instances of the 
       External-Prefix TLV subsequent to the first MUST be ignored. 
     <vspace blankLines="100"/></t>
</section> 

<section anchor="E-NSSA-LSA" title="OSPFv3 E-NSSA-LSA">
<t>The E-NSSA-LSA will have the same format and TLVs
as the Extended AS&nbhy;External&nbhy;LSA (<xref target="E-AS-External-LSA"/>).
This is the same relationship that exists
between the NSSA-LSA, as defined in Appendix A.4.8 of <xref target="OSPFV3"/>, 
and the AS-External-LSA. The
NSSA-LSA will have type 0xA027, which implies area flooding scope. 
Future requirements may dictate that supported TLVs differ between the
E-AS-External-LSA and the E-NSSA-LSA. However, future requirements are 
beyond the scope of this document.<vspace blankLines="100"/></t>
</section> 

<section anchor="E-Link-LSA" title="OSPFv3 E-Link-LSA">
<t>The E-Link-LSA has an LS Type of 0x8028 and will have the same
base information content as the Link-LSA defined in Appendix A.4.9 of 
<xref target="OSPFV3"/>. However, unlike the existing Link-LSA, it 
is fully extensible and represented as TLVs.</t>
   <t><figure title="E-Link-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          LS Age               |1|0|0|         0x28            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       LS Checksum             |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Rtr Priority  |                Options                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                           TLVs                                .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    </artwork>
</figure></t>
  <t>Other than having a different LS Type, all LSA Header fields are the same 
     as defined for the Link-LSA.</t> 

  <t>Only the Intra-Area-Prefix TLV (<xref target="Intra-Area-Prefix-TLV"/>),
     IPv6 Link-Local Address TLV (<xref target="IPv6-Link-Local-Address-TLV"/>),
     and IPv4 Link-Local Address TLV (<xref target="IPv4-Link-Local-Address-TLV"/>)
     are applicable to the E-Link-LSA.     
     Like the Link-LSA, the E-Link-LSA affords advertisement
     of multiple intra-area prefixes. Hence, multiple Intra-Area-Prefix TLVs
     (<xref target="Intra-Area-Prefix-TLV"/>) 
     may be specified, and the LSA length defines the end of the LSA including
     any TLVs.</t> 

  <t>A single instance of the 
     IPv6 Link-Local Address TLV (<xref target="IPv6-Link-Local-Address-TLV"/>)
     SHOULD be included in the E-Link-LSA. 
     Instances following the first MUST be ignored. 
     For IPv4 address families 
     as defined in <xref target="OSPFV3-AF"/>, this TLV MUST be ignored.</t>

  <t>Similarly, only a single instance of the 
     IPv4 Link-Local Address TLV (<xref target="IPv4-Link-Local-Address-TLV"/>) 
     SHOULD be included in the E-Link-LSA. 
     Instances following the first MUST be ignored. For OSPFv3 IPv6 address
     families as defined in <xref target="OSPFV3-AF"/>, this TLV SHOULD be ignored.</t>

  <t>If the IPv4/IPv6 Link-Local Address TLV corresponding to the OSPFv3 Address Family
     is not included in the E-Link-LSA, it is 
     treated as malformed as described in <xref target="MALFORMED"/>.</t> 
  <t>Future specifications may support advertisement of routing and topology 
     information for multiple address families. However, this is beyond
     the scope of this document.<vspace blankLines="100"/></t>
</section> 

<section anchor="E-Intra-Area-Prefix-LSA" title="OSPFv3 E-Intra-Area-Prefix-LSA">
<t>The E-Intra-Area-Prefix-LSA has an LS Type of 0xA029 and has the same base 
information content as the Intra-Area-Prefix-LSA defined in 
Appendix A.4.10 of <xref target="OSPFV3"/> except for the Referenced LS Type. 
However, unlike the Intra-Area-Prefix-LSA, it is fully extensible and represented 
as TLVs. The Referenced LS Type MUST be either an E&nbhy;Router&nbhy;LSA (0xA021) or an 
E-Network-LSA (0xA022).</t>
   <t><figure title="E-Intra-Area-Prefix-LSA">
     <artwork>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           LS Age              |1|0|1|         0x29            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link State ID                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   Advertising Router                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   LS Sequence Number                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        LS Checksum            |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       0                       |     Referenced LS Type        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Referenced Link State ID                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               Referenced Advertising Router                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                            TLVs                               .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </artwork>
   </figure></t>
  <t>Other than having a different LS Type, all LSA Header fields are the same 
     as defined for the Intra-Area-Prefix-LSA.</t> 
  <t>Like the Intra-Area-Prefix-LSA, the E-Intra-Area-Link-LSA affords advertisement
     of multiple intra-area prefixes. Hence, multiple Intra-Area-Prefix TLVs
     may be specified, and the LSA length defines the end of the LSA including
     any TLVs.</t> 
</section> 
</section>

<section anchor="MALFORMED" title="Malformed OSPFv3 Extended LSA Handling">
<t>Extended LSAs that have inconsistent length or other encoding errors, as described
herein, MUST NOT be installed in the Link State Database, acknowledged, or flooded. Reception
of malformed LSAs SHOULD be counted and/or logged for examination by the administrator 
of the OSPFv3 routing domain. Note that for the purposes of length validation, a TLV 
or sub-TLV should not be considered invalid unless the length exceeds the length of the 
LSA or does not meet the minimum length requirements for the TLV or sub-TLV. This allows for sub-TLVs to 
be added as described in <xref target="TLV-PROCESS"/>.</t>

<t>Additionally, an LSA MUST be considered malformed if it does not include all of  
the required TLVs and sub-TLVs.</t> 
</section> 
<section anchor="COMPAT" title="LSA Extension Backward Compatibility">
 <t>In the context of this document, backward compatibility is solely related to the 
capability of an OSPFv3 router to receive, process, and originate the TLV-based LSAs defined
herein. Unrecognized TLVs and sub-TLVs are ignored. 
Backward compatibility for future OSPFv3 extensions utilizing the TLV-based LSAs is 
out of scope and must be covered in the documents describing those extensions. Both full
and, if applicable, partial deployment SHOULD be specified for future TLV-based OSPFv3 LSA 
extensions.</t>

<section anchor="FULL-MIGRATION" title="Full Extended LSA Migration">
<t>If ExtendedLSASupport is enabled (<xref target="global-config"/>), OSPFv3 Extended LSAs will 
be originated and used for the SPF computation. Individual OSPF Areas can be migrated separately
with the Legacy AS-External-LSAs being originated and used for the 
SPF computation. This is accomplished by enabling AreaExtendedLSASupport 
(<xref target="area-config"/>).</t>

<t>An OSPFv3 routing domain or area may be non-disruptively migrated using separate OSPFv3 instances
for the Extended LSAs. Initially, the OSPFv3 instances with ExtendedLSASupport will have a lower
preference, i.e., higher administrative distance, than the OSPFv3 instances originating and 
using the Legacy LSAs. Once the routing domain or area is fully migrated and the OSPFv3
Routing Information Bases (RIBs) have been verified, the OSPFv3 instances using the Extended LSAs
can be given preference. When this has been completed and the routing within the OSPF routing domain 
or area has been verified, the original OSPFv3 instance using Legacy LSAs can be removed.</t>
</section>

<section anchor="SPARSE-MODE" title="Extended LSA Sparse-Mode Backward Compatibility">
<t>In this mode, OSPFv3 will use the Legacy LSAs for the SPF computation and will only originate
Extended LSAs when LSA origination is required in support of additional functionality. Furthermore, those  
Extended LSAs will only include the top-level TLVs (e.g., Router-Link TLVs or Inter-Area TLVs), which 
are required for that new functionality. However, if a top-level TLV is advertised, 
it MUST include required sub-TLVs, or it will be considered malformed as described in 
<xref target="MALFORMED"/>.
Hence, this mode of compatibility is known as "sparse-mode". The advantage of sparse-mode is that 
functionality utilizing the OSPFv3 Extended LSAs can be added to an existing OSPFv3 routing domain
without the requirement for migration. In essence, this compatibility mode is very much like 
the approach taken for OSPFv2 <xref target="OSPF-PREFIX-LINK"/>. As with all the compatibility 
modes, backward compatibility for the functions utilizing the Extended LSAs must be described
in the IETF documents describing those functions.</t>
</section> 

<section anchor="TLV-PROCESS" title="LSA TLV Processing Backward Compatibility">
<t>This section defines the general rules for processing LSA TLVs. To ensure compatibility of
future TLV-based LSA extensions, all implementations MUST adhere to these rules:
   <list style="numbers"> 
     <t>Unrecognized TLVs and sub-TLVs are ignored when parsing or processing Extended LSAs.</t>

     <t>Whether or not partial deployment of a given TLV is supported MUST be specified.</t>

     <t>If partial deployment is not supported, mechanisms to ensure the corresponding feature
        is not deployed MUST be specified in the document defining the new TLV or sub-TLV.</t>

     <t>If partial deployment is supported, backward compatibility and partial deployment MUST
        be specified in the document defining the new TLV or sub-TLV.</t>

     <t>If a TLV or sub-TLV is recognized but the length is less than the minimum, then the LSA
        should be considered malformed, and it SHOULD NOT be acknowledged. Additionally, the 
        occurrence SHOULD be logged with enough information to identify the LSA by type, Link State ID, originator,
        and sequence number and identify the TLV or sub-TLV in error. 

Ideally, the log entry would include
        the hexadecimal or binary representation of the LSA including the malformed 
        TLV or sub-TLV.</t>

     <t>Documents specifying future TLVs or Sub-TLVs MUST specify the requirements for usage of
        those TLVs or sub-TLVs.</t>

     <t>Future TLVs or sub-TLVs must be optional. However, there may be requirements for sub-TLVs if
        an optional TLV is specified.</t>
   </list></t>
</section>
</section>
<section title="Security Considerations">                        
<t>In general, extensible OSPFv3 LSAs are subject to the same security concerns as those described
in RFC 5340 <xref target="OSPFV3"/>. Additionally, implementations must assure that malformed
TLV and sub-TLV permutations do not result in errors that cause hard OSPFv3 failures.</t>

<t>If there were ever a requirement to digitally sign OSPFv3 LSAs as described for OSPFv2 LSAs 
in RFC 2154 <xref target="OSPF-DIGITAL-SIGNATURE"/>, the mechanisms described herein would greatly 
simplify the extension.</t>
</section>

<section title="IANA Considerations">                        
<t>This specification defines nine OSPFv3 Extended LSA types as described
in <xref target="LSATYPE"/>. These have been added to the existing OSPFv3 LSA Function 
Codes registry.</t>

<t>The specification defines a code point for 
the N-bit in the OSPFv3 Prefix-Options registry. The value 0x20 has been assigned.</t>

<t>This specification also creates two registries for OSPFv3 Extended LSA TLVs and sub-TLVs.
The TLV and sub-TLV code points in these registries are common to all Extended LSAs, and their
respective definitions must define where they are applicable.</t> 

<section title="OSPFv3 Extended LSA TLV Registry">                        
<t>The "OSPFv3 Extended LSA TLVs" registry defines top-level TLVs for Extended LSAs and 
has been placed in the existing OSPFv3 IANA registry.</t>
<t>Nine values have been allocated:
   <list style="symbols"> 
     <t>0 - Reserved</t>
     <t>1 - Router-Link TLV</t>
     <t>2 - Attached-Routers TLV</t>
     <t>3 - Inter-Area-Prefix TLV</t>
     <t>4 - Inter-Area-Router TLV</t>
     <t>5 - External-Prefix TLV</t>
     <t>6 - Intra-Area-Prefix TLV</t>
     <t>7 - IPv6 Link-Local Address TLV</t>
     <t>8 - IPv4 Link-Local Address TLV</t>
    </list></t>
<t>Types in the range 9-32767 are allocated via IETF Review or
 IESG Approval <xref target="RFC8126" />.</t>

<t>Types in the range 32768-33023 are Reserved for Experimental Use; these will
not be registered with IANA and MUST NOT be mentioned by RFCs.</t>

<t>Types in the range 33024-45055 are to be assigned on a 
First Come First Served (FCFS) basis.</t>

<t>Types in the range 45056-65535 are not to be assigned at this time.
Before any assignments can be made in the 33024-65535 range, there MUST
be an IETF specification that specifies IANA Considerations that cover
the range being assigned.</t>
</section>

<section title="OSPFv3 Extended LSA Sub-TLV Registry">                        
<t>The "OSPFv3 Extended LSA Sub-TLVs" registry defines sub-TLVs at any level of 
nesting for Extended LSAs and 
has been placed in the existing OSPFv3 IANA registry.</t>
<t>Four values have been allocated:
   <list style="symbols"> 
     <t>0 - Reserved</t>
     <t>1 - IPv6-Forwarding-Address sub-TLV</t>
     <t>2 - IPv4-Forwarding-Address sub-TLV</t>
     <t>3 - Route-Tag sub-TLV</t>
    </list></t>
<t>Types in the range 4-32767 are allocated via IETF Review or
IESG Approval.</t>

<t>Types in the range 32768-33023 are Reserved for Experimental Use; these will
not be registered with IANA and MUST NOT be mentioned by RFCs.</t>

<t>Types in the range 33024-45055 are to be assigned on 
an FCFS basis.</t>

<t>Types in the range 45056-65535 are not to be assigned at this time.
Before any assignments can be made in the 33024-65535 range, there MUST
be an IETF specification that specifies IANA Considerations that cover
the range being assigned.</t>
</section>
</section>

</middle>
<back>

<references title="Normative References">

<?rfc include="reference.RFC.2119" ?>
<?rfc include="reference.RFC.8126" ?>
<?rfc include="reference.RFC.8174" ?>

<reference anchor="OSPFV3" target="https://www.rfc-editor.org/info/rfc5340">
<front>
<title>OSPF for IPv6</title>
<author initials="R." surname="Coltun" fullname="Rob Coltun">
<organization>Acoustra Productionss</organization>
</author>
<author initials="D." surname="Ferguson" fullname="Dennis Ferguson">
<organization>Juniper Network, Inc</organization>
</author>
<author initials="J." surname="Moy" fullname="John Moy">
<organization>Sycamore Systems, Inc</organization>
</author>
<author initials="A." surname="Lindem" fullname="Acee Lindem">
<organization>Redback Networks</organization>
</author>
<date month="July" year="2008" />
</front>
<seriesInfo name="RFC" value="5340" />
<seriesInfo name="DOI" value="10.17487/RFC5340" />
</reference>

<reference anchor="OSPFV3-AF" target="https://www.rfc-editor.org/info/rfc5838">
<front>
<title>Support of Address Families in OSPFv3</title>
<author initials='A.' surname='Lindem' fullname='A. Lindem' role='editor'>
<organization /></author>
<author initials='S.' surname='Mirtorabi' fullname='S. Mirtorabi'>
<organization /></author>
<author initials='A.' surname='Roy' fullname='A. Roy'>
<organization /></author>
<author initials='M.' surname='Barnes' fullname='M. Barnes'>
<organization /></author>
<author initials='R.' surname='Aggarwal' fullname='R. Aggarwal'>
<organization /></author>
<date year='2010' month='April' />
</front>
<seriesInfo name="RFC" value="5838" />
<seriesInfo name="DOI" value="10.17487/RFC5838" />
</reference>

<reference anchor="TE" target="https://www.rfc-editor.org/info/rfc3630">
<front>
<title>Traffic Engineering (TE) Extensions to OSPF Version 2</title>
<author initials="D." surname="Katz" fullname="Dave Katz">
<organization>Juniper Networks</organization>
</author>
<author initials="K." surname="Kompella" fullname="Kireeti Kompella">
<organization>Juniper Networks</organization>
</author>
<author initials="D." surname="Yeung" fullname="Derek Yeung">
<organization>Procket Networks</organization>
</author>
<date month="September" year="2003" />
</front>
<seriesInfo name="RFC" value="3630" />
<seriesInfo name="DOI" value="10.17487/RFC3630" />
</reference>

<reference anchor="NSSA" target="https://www.rfc-editor.org/info/rfc3101">
<front>
<title>The OSPF Not-So-Stubby Area (NSSA) Option</title>
<author initials="P." surname="Murphy" fullname="Pat Murphy">
<organization>US Geological Survey</organization>
</author>
<date month="January" year="2003" />
</front>
<seriesInfo name="RFC" value="3101" />
<seriesInfo name="DOI" value="10.17487/RFC3101" />
</reference>

</references>

<references title="Informative References">

<reference anchor="OSPF-DIGITAL-SIGNATURE" target="https://www.rfc-editor.org/info/rfc2154">
<front>
<title>OSPF with Digital Signatures</title>
<author initials="S." surname="Murphy" fullname="Sandra Murphy">
<organization>Trusted Information Systems</organization>
</author>
<author initials="M." surname="Badger" fullname="Madelyn Badger">
<organization>Trusted Information Systems</organization>
</author>
<author initials="B." surname="Wellington" fullname="Brian Wellington">
<organization>Trusted Information Systems</organization>
</author>
<date month="June" year="1997" />
</front>
<seriesInfo name="RFC" value="2154"/>
<seriesInfo name="DOI" value="10.17487/RFC2154" />
</reference>

<!--draft-ietf-ospf-mt-ospfv3-03; Expired-->
<reference anchor='MT-OSPFV3'>
<front>
<title>Multi-topology routing in OSPFv3 (MT-OSPFv3)</title>
<author initials='S' surname='Mirtorabi' fullname='Sina Mirtorabi'>
    <organization />
</author>
<author initials='A' surname='Roy' fullname='Abhay Roy'>
    <organization />
</author>
<date month='July' year='2007' />
</front>
<seriesInfo name='Work in Progress,' value='draft-ietf-ospf-mt-ospfv3-03' />
</reference>


<reference anchor="IPV6-ADDRESS-ARCH" target="https://www.rfc-editor.org/info/rfc4291">
<front>
<title>IP Version 6 Addressing Architecture</title>
<author initials="R." surname="Hinden" fullname="Robert Hinden">
<organization>Nokia</organization>
</author>
<author initials="S." surname="Deering" fullname="Steve Deering">
<organization>Cisco Systems</organization>
</author>
<date month="February" year="2006" />
</front>
<seriesInfo name="RFC" value="4291" />
<seriesInfo name="DOI" value="10.17487/RFC4291" />
</reference>

<!-- draft-ietf-ospf-ospfv3-segment-routing-extensions-11: I-D Exists -->
<reference anchor='SEGMENT-ROUTING'>
<front>
<title>OSPFv3 Extensions for Segment Routing</title>
<author initials='P' surname='Psenak' fullname='Peter Psenak'>
    <organization />
</author>
<author initials='S' surname='Previdi' fullname='Stefano Previdi'>
    <organization />
</author>
<author initials='C' surname='Filsfils' fullname='Clarence Filsfils'>
    <organization />
</author>
<author initials='H' surname='Gredler' fullname='Hannes Gredler'>
    <organization />
</author>
<author initials='R' surname='Shakir' fullname='Rob Shakir'>
    <organization />
</author>
<author initials='W' surname='Henderickx' fullname='Wim Henderickx'>
    <organization />
</author>
<author initials='J' surname='Tantsura' fullname='Jeff Tantsura'>
    <organization />
</author>
<date month='January' year='2018' />
</front>
<seriesInfo name='Work in Progress,' value='draft-ietf-ospf-ospfv3-segment-routing-extensions-11' />
</reference>


<reference anchor="OSPF-PREFIX-LINK" target="https://www.rfc-editor.org/info/rfc7684">
<front>
<title>OSPFv2 Prefix/Link Attribute Advertisement</title>
<author initials="P." surname="Psenak" fullname="Peter Psenak">
<organization>Cisco Systems</organization>
</author>
<author initials="H." surname="Gredler" fullname="Hannes Gredler">
<organization>Juniper Networks</organization>
</author>
<author initials="R." surname="Shakir" fullname="Rob Shakir">
<organization>Individual Contributer</organization>
</author>
<author initials="W." surname="Henderickx" fullname="Wim Henderickx">
<organization>Alcatel-Lucent</organization>
</author>
<author initials="J." surname="Tantsura" fullname="Jeff Tantsura">
<organization>Ericsson</organization>
</author>
<author initials="A." surname="Lindem" fullname="Acee Lindem">
<organization>Cisco Systems</organization>
</author>
<date month="November" year="2015" />
</front>
<seriesInfo name="RFC" value="7684" />
<seriesInfo name="DOI" value="10.17487/RFC7684" />
</reference>
</references>

<section anchor="global-config" title="Global Configuration Parameters">
   <t>The global configurable parameter ExtendedLSASupport is added to the 
   OSPFv3 protocol. If ExtendedLSASupport is enabled, the OSPFv3 router will originate 
   OSPFv3 Extended LSAs and use the LSAs for the SPF computation. If ExtendedLSASupport is 
   not enabled, a subset of OSPFv3 Extended LSAs may still be originated and used for other 
   functions as described in <xref target="SPARSE-MODE"/>.</t> 
</section>
<section anchor="area-config" title="Area Configuration Parameters">
   <t>The area configurable parameter AreaExtendedLSASupport is added to the 
   OSPFv3 protocol. If AreaExtendedLSASupport is enabled, the OSPFv3 router will originate 
   link and area OSPFv3 Extended LSAs and use the LSAs for the SPF computation. 
   Legacy AS-Scoped LSAs will still be originated and used for the AS-External-LSA
   computation. If AreaExtendedLSASupport is 
   not enabled, a subset of OSPFv3 link and area Extended LSAs may still be originated and
   used for other functions as described in <xref target="SPARSE-MODE"/>.</t> 

   <t>For regular areas, i.e., areas where AS-scoped LSAs are flooded, disabling 
   AreaExtendedLSASupport for a regular OSPFv3 area (not a Stub or NSSA area) 
   when ExtendedLSASupport is enabled is contradictory and 
   SHOULD be prohibited by implementations.</t>
</section>
  <section title="Acknowledgments" numbered='no'>
  <t>OSPFv3 TLV-based LSAs were first proposed in "Multi-topology routing in 
OSPFv3 (MT-OSPFv3)" <xref target="MT-OSPFV3"/>.</t>
  <t>Thanks for Peter Psenak for significant contributions to the backward-compatibility
     mechanisms.</t>
  <t>Thanks go to Michael Barnes, Mike Dubrovsky, Anton Smirnov, and Tony Przygienda for 
     review of the draft versions and discussions of backward compatibility.</t>
  <t>Thanks to Alan Davey for review and comments including the suggestion to separate
     the Extended LSA TLV definitions from the Extended LSAs definitions.</t>
  <t>Thanks to David Lamparter for review and suggestions on
     backward compatibility.</t>
  <t>Thanks to Karsten Thomann, Chris Bowers, Meng Zhang, and Nagendra Kumar for review
     and editorial comments.</t>
  <t>Thanks to Alia Atlas for substantive Routing Area Director (AD) comments prior 
     to IETF last call.</t>
  <t>Thanks to Alvaro Retana and Suresh Krishnan for substantive comments during 
     IESG Review.</t>
  <t>Thanks to Mehmet Ersue for the Operations and Management (OPS) Directorate review.</t>

  </section>

<section title="Contributors" numbered='no'>

<figure>
<artwork>  
Sina Mirtorabi
Cisco Systems
170 Tasman Drive
San Jose, CA  95134
United States of America

Email: sina@cisco.com
</artwork> 
</figure>
</section>

</back>
</rfc>
