<?xml version="1.0" encoding="US-ASCII"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">


<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc rfcedstyle="yes"?>

<rfc number="6753" category="std" ipr="trust200902" submissionType="IETF" consensus="yes">
  <front>
    <title abbrev="HELD Dereferencing">A Location Dereference Protocol Using
HTTP-Enabled Location Delivery (HELD)</title>

    <author initials="J." surname="Winterbottom" fullname="James Winterbottom">
      <organization>Commscope</organization>
      <address>
	<postal>
	  <street>Andrew Building (39)</street>
	  <street>Wollongong University Campus</street>
	  <street>Northfields Avenue</street>
	  <city>Wollongong</city>
	  <region>NSW</region>
	  <code>2522</code>
	  <country>AU</country>
	</postal>
	<phone>+61 242 212938</phone>
	<email>james.winterbottom@commscope.com</email>
      </address>
    </author>
    <author initials="H." surname="Tschofenig" fullname="Hannes Tschofenig">
      <organization>Nokia Siemens Networks</organization>
      <address>
	<postal>
	  <street>Linnoitustie 6</street>
	  <city>Espoo</city>
	  <code>02600</code>
	  <country>Finland</country>
	</postal>
	<phone>+358 (50) 4871445</phone>
	<email>Hannes.Tschofenig@gmx.net</email>
	<uri>http://www.tschofenig.priv.at</uri>
      </address>
    </author>
    <author initials="H." surname="Schulzrinne" fullname="Henning Schulzrinne">
      <organization>Columbia University</organization>
      <address>
	<postal>

         <street>Department of Computer Science</street>
         <street>450 Computer Science Building</street>
         <city>New York</city>
         <region>NY</region>
         <code>10027</code>
         <country>USA</country>

	</postal>
	<phone>+1 212 939 7042</phone>
	<email>hgs@cs.columbia.edu</email>
	<uri>http://www.cs.columbia.edu</uri>
      </address>
    </author>
    <author initials="M." surname="Thomson" fullname="Martin Thomson">
      <organization>Microsoft</organization>
      <address>
	<postal>
	  <street>3210 Porter Drive</street>
	  <city>Palo Alto</city>
	  <region>CA</region>
	  <code>94304</code>
	  <country>USA</country>
	</postal>
	<phone>+1 650-353-1925</phone>
	<email>martin.thomson@skype.net</email>
      </address>
    </author>

    <date month="October" year="2012"/>
    <area>RAI</area>
    <workgroup>GEOPRIV</workgroup>

    <keyword>HELD</keyword>
    <keyword>Dereference</keyword>
    <keyword>lbyr</keyword>
    <keyword>HTTP</keyword>
    <keyword>Location</keyword>
    <keyword>GEOPRIV</keyword>


    <abstract>
      <t>This document describes how to use the Hypertext Transfer Protocol (HTTP) over Transport Layer Security (TLS) as a dereference protocol to resolve a reference to a Presence Information Data Format Location Object (PIDF-LO). This document assumes that a Location Recipient possesses a URI that can be used in conjunction with the HTTP-Enabled Location Delivery (HELD) protocol to request the location of the Target.
      </t>

    </abstract>
  </front>
  <middle>
    <section anchor="intro" title="Introduction">

      <t>A <xref target="RFC5808">location URI</xref> identifies a resource
that contains the location of an entity.  This document specifies how a holder
of an "http:" or "https:"
location URI uses that URI to retrieve location
information using a subset of HELD functionality or an HTTP GET request.

      </t>

      <t>A location URI can be acquired using a location configuration protocol, such as <xref target="RFC5985">HTTP-Enabled Location Delivery (HELD)</xref> or <xref target="DHCP-URI-OPT">the Dynamic Host Configuration Protocol (DHCP) location URI option</xref>.
    </t>



      <t>A Location Recipient that dereferences a location URI acquires
location information in the form of a <xref target="RFC4119">Presence Information
Data Format - Location Object (PIDF-LO) document</xref>.  HELD parameters allow
for specifying the type of location information, though some constraints are
placed on allowable parameters.

      </t>
    
      <t>Location URIs compatible with HELD dereferencing use the "https:" or
"http:" scheme.  HELD
can be used by Location Recipients that are aware of the fact that the URI is a
location URI.  Mandatory support for an HTTP GET request ensures that the URI
can be used even if it is not recognized as a location URI.

      </t>
    </section>

    <section anchor="terminology" title="Terminology">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <xref target="RFC2119"/>.
      </t>

      <t>This document uses key terminology from several sources:
      <list style="symbols">
	<t>The terms for the GEOPRIV reference model defined are in <xref target="RFC6280"/>.
	</t>

	<t>The term "Location Information Server (LIS)", from <xref
target="RFC5687"/>, is a
      node in the access network that provides location information to
      an endpoint. A LIS provides location URIs.
	</t>
	<t>The term "Location Server (LS)", from <xref target="RFC6280"/>, is used to
identify the role that responds to a location dereference request.
A Location Server might be the same entity as the LIS, but the model in
<xref target="RFC5808"/>
allows for the existence of separate -- but related --
entities.
	</t>
	<t>The term "location URI" is coined in <xref target="RFC5808"/>.
	</t>
      </list>
      </t>

    </section>

    <section anchor="details" title="HELD Dereference Protocol">
      <t>This section describes how HELD can be used to dereference a location
URI.  This process can be applied when a Location Recipient is in possession of
a location URI with an "https:" or "http:" URI scheme.

      </t>

      <t>This document does not describe a specific authentication mechanism.  This means that authorization policies are unable to specifically identify authorized Location Recipients.
      </t>

      <t>A Location Recipient that wishes to dereference an "https:" or "http:" URI performs a
HELD request on HTTP to the identified resource.

      <list>
	<t>Note:  In many cases, an "http:" URI does not provide
sufficient security for location URIs.  The absence of the security mechanisms
provided by TLS means that the Rule Maker has no control over who receives
location information, and the Location Recipient has no assurance that the
information is correct.

	</t>
      </list></t>

      <t>The Location Recipient establishes a connection to the LS, as described in <xref target="RFC2818"/>.</t>

      <t>The scheme of a location URI determines whether or not TLS is used on
a given dereference transaction.  Location Servers MUST be configured to issue
only HTTPS URIs and respond to only to HTTPS dereference requests, unless
confidentiality and integrity protection are provided by some other mechanism.
For example, the server might only accept requests from clients within a
trusted network or via an IPsec-protected channel.  When TLS is used, the TLS
ciphersuite TLS_NULL_WITH_NULL_NULL MUST NOT be used, and the LS MUST be <xref
target="RFC6125">authenticated</xref> to ensure that the correct server is
contacted.

      </t>

      <t>A Location Server MAY reject a request and ask that a Location
Recipient provide authentication credentials if authorization is dependent on
the Location Recipient identity.  Future specifications could define an
authentication mechanism and a means by which Location Recipients are
identified in authorization policies.  This document does not provide definitions for
either item.

      </t>

      <section anchor="held-profile" title="HELD Usage Profile">
	<t>Use of HELD as a location dereference protocol is largely the same as its use as a location configuration protocol.  Aside from the restrictions noted in this document, HELD semantics do not differ from those established in <xref target="RFC5985"/>.
	</t>

	<t>The HELD <spanx style="verb">locationRequest</spanx> is the only
request permitted by this specification.  Similarly, request parameters other
than the following MUST NOT be accepted by the LS: <spanx
style="verb">responseTime</spanx> and <spanx style="verb">locationType</spanx> (including the associated <spanx style="verb">exact</spanx> attribute).
	</t>

	<t>Parameters and requests that do not have known behavior for dereference requests MUST NOT be used.  The LS MUST ignore any parameters that it does not understand unless it knows the parameters to be invalid.  If parameters are understood by the LS and known to be invalid, the LS MAY generate a HELD error response.  For instance, those defined in <xref target="RFC6155"/> are always invalid and can be rejected.
	</t>

	<t>The LS MUST NOT generate location URIs or provide a <spanx style="verb">locationUriSet</spanx> in response to a dereference request.  If the location request contains a <spanx style="verb">locationType</spanx> element that includes <spanx style="verb">locationURI</spanx>, this parameter is either ignored or rejected as appropriate, based on the associated <spanx style="verb">exact</spanx> attribute.
	</t>
      </section>

      <section title="HTTP GET Behavior">
	<t>GET is the method assumed by generic HTTP user agents; therefore,
unless context identifies an "https:" URI as a HELD URI, such a user agent
might simply send an HTTP GET.  Rather than providing an HTTP 405 (Method Not
Allowed) response indicating that POST is the only permitted method, a LIS MUST
provide a HELD location response if it receives an HTTP GET request.

	</t>

	<figure anchor="default-request" title="GET Request Equivalent Location Request">
	  <preamble>An HTTP GET request to a HELD URI produces a HELD response as if the following HELD request had been sent using HTTP POST:
	  </preamble>
	<artwork><![CDATA[
  <locationRequest xmlns="urn:ietf:params:xml:ns:geopriv:held">
    <locationType exact="false">
      geodetic civic
    </locationType>
  </locationRequest>
]]></artwork>
	</figure>

      <t>HTTP GET requests MUST be <xref target="RFC2616">safe and
idempotent</xref> -- that is, there are no side effects of making the request,
and a repeated request has no more effect than a single request.  Repeating a
HELD request might result in a different location, but only as a result of a
change in the state of the resource: the location of the Target.

      </t>

      <t>Only the creation of a location URI as a result of receiving a request
causes a HELD request to have side effects.  A request to a location URI can be both safe and idempotent, since a location URI cannot be produced in response to a request to a location URI.
      </t>

      <t>A Location Recipient MAY infer from a response containing the HELD
content type <spanx style="verb">application/held+xml</spanx> that a URI
references a resource that supports HELD.

      </t>

      <t>Content negotiation MAY be supported to produce a presence document in place of a HELD location response.  Where the presence document would otherwise be included in a <spanx style="verb">locationResponse</spanx> document, it can be included in the body of the HTTP response directly by including an <spanx style="verb">Accept</spanx> header that includes <spanx style="verb">application/pidf+xml</spanx>.
      </t>

      </section>
    </section>

    <section anchor="authorization" title="Authorization Models">

      <t>This section discusses two extreme types of authorization models for
dereferencing with HELD URIs, namely "Authorization by Possession" and
"Authorization by Access Control".  In the subsequent subsections, we discuss
the properties of these two models.  <xref target="communication-model"/>, from
<xref target="RFC5808"/>, shows the model applicable to location configuration,
conveyance, and dereference.

      </t>

      <figure anchor="communication-model" title="Communication Model">
	<artwork><![CDATA[
          +---------+--------+   Location    +-----------+
          |         |        |  Dereference  | Location  |
          |   LIS   -   LS   +---------------+ Recipient |
          |         |        |   Protocol    |           |
          +----+----+--------+      (3)      +-----+-----+
               |         `.                        |
               |    Policy `.                      |
 Location      |    Exchange `.                    |
 Configuration |      (*)      |                   |
 Protocol      |          +----+----+              |
   (1)         |          |  Rule   |   Location   |
               |          |  Maker  |   Conveyance |
         +-----+----+     +---------+   Protocol   |
         |          |                      (2)     |
         |  Target  +------------------------------+
         |          |
         +----------+
]]></artwork>
      </figure>

      <t>It is important to note that this document does not mandate a specific authorization model.  It is possible to combine aspects of both models.  However, no authentication framework is provided, which limits the policy options available when the "Authorization by Access Control" model is used.
      </t>

      <t>For either authorization model, the overall process is similar.  The following steps are followed, with minor alterations:
      <list style="numbers">
	<t>The Target acquires a location URI from the LIS.  This uses a location configuration protocol (LCP), such as HELD or DHCP.</t>

	<t>The Target then conveys the location URI to a third party, the Location Recipient (for example, using SIP as described in <xref target="RFC6442"/>). This step is shown in (2) of <xref target="communication-model"/>. </t>

	<t>The Location Recipient then needs to dereference the location URI in order to obtain the Location Object (3).  An "https:" or "http:" URI is dereferenced as described in this document; other URI schemes might be dereferenced using another method.</t>
      </list>
      </t>

      <t>In this final step, the Location Server (LS) or LIS makes an authorization decision.  How this decision is reached depends on the authorization model.
      </t>

      <section anchor="pawn" title="Authorization by Possession">
	<t>In this model, possession -- or knowledge -- of the location URI is
used to control access to location information.  A location URI might be
constructed such that it is hard to guess (see C8 of <xref target="RFC5808"/>),
and the set of entities that it is disclosed to can be limited.  The only
authentication this would require by the LS is evidence of possession of the
URI.  The LS could immediately authorize any request that indicates this URI.

	</t>

	<t>Authorization by possession does not require direct interaction with a Rule Maker; it is assumed that the Rule Maker is able to exert control over the distribution of the location URI.  Therefore, the LIS can operate with limited policy input from a Rule Maker.
	</t>

	<t>Limited disclosure is an important aspect of this authorization model.  The location URI is a secret; therefore, ensuring that adversaries are not able to acquire this information is paramount.  Encryption, such as might be offered by <xref target="RFC5246">TLS</xref> or <xref target="RFC5751">S/MIME</xref>, protects the information from eavesdroppers.
	</t>

	<t>Use of authorization by possession location URIs in a hop-by-hop
protocol such as <xref target="RFC3261">SIP</xref> adds the possibility of
on-path adversaries.  Depending on the usage of the location URI for certain
location-based applications (e.g., emergency services and location-based
routing), specific treatment is important, as discussed in <xref
target="RFC6442"/>.

	</t>

	<t>Using possession as a basis for authorization means that, once
granted, authorization cannot be easily revoked.  Cancellation of a location
URI ensures that legitimate users are also affected; application of additional
policy is theoretically possible but could be technically infeasible.
Expiration of location URIs limits the usable time for a location URI,
requiring that an attacker continue to learn new location URIs to retain access
to current location information.

	</t>

	<t>A very simple policy might be established at the time that a location URI is created.  This policy specifies that the location URI expires after a certain time, which limits any inadvertent exposure of location information to adversaries.  The expiration time of the location URI might be negotiated at the time of its creation, or it might be unilaterally set by the LIS.
	</t>
      </section>

      <section title="Authorization via Access Control">
	<t>Use of explicit access control provides a Rule Maker greater control over the behavior of an LS.  In contrast to authorization by possession, possession of this form of location URI does not imply authorization.  Since an explicit policy is used to authorize access to location information, the location URI can be distributed to many potential Location Recipients.
	</t>

	<t>Either before creation or dissemination of the location URI, the
Rule Maker establishes an authorization policy with the LS.  In reference to
<xref target="communication-model"/>, authorization policies might be
established at creation (Step 1) and need to be established before the location
URI is published (Step 2) to ensure that the policy grants access to the
desired Location Recipients.  Depending on the mechanism used, it might also be
possible to change authorization policies at any time.
	</t>

	<t>A possible format for these authorization policies is available with
GEOPRIV Common Policy <xref target="RFC4745"/> and Geolocation Policy <xref
target="GEOPRIV-POLICY"/>.  Additional constraints might be
established by other means.

	</t>

	<t>The LS enforces the authorization policy when a Location Recipient dereferences the URI.  Explicit authorization policies allow a Rule Maker to specify how location information is provided to Location Recipients.
	</t>
      </section>


      <section title="Access Control with HELD Dereference">
	<t>This document does not describe a specific authentication mechanism; therefore, the authorization by access control model is not an option.  Instead, this document assumes the authorization by possession model.</t>

	<t>Other policy mechanisms, such as those described in <xref
target="GEOPRIV-POLICY"/>, can be applied for different Location
Recipients if each recipient is given a different location URI.  Each location
URI can be assigned a different authorization policy.  Selective disclosure used
in this fashion can be used in place of identity-based authorization.

	</t>

	<t>How policy is associated with a location URI is not defined by this document.  <xref target="GEOPRIV-POLICY-URI"/> describes one possible mechanism.
	</t>

	<t>Use of an identity-based authorization policy is not precluded.  A Location Server MAY support an authentication mechanism that enables identity-based authorization policies to be used.  Future specifications might define means of identifying recipients.
	</t>

	<t><list><t>Note:  Policy frameworks like <xref target="RFC4745"/> degrade in a
way that protects privacy if features are not supported.  If a policy specifies
a rule that is conditional on the identity of a recipient and the protocol does
not (or cannot) provide an assertion identity of the recipient, the rule has no
effect, and the policy defaults to providing less information.
        </t></list>
	</t>
      </section>

    </section>

    <section anchor="examples" title="Examples">
      <t>An example scenario envisioned by this document is shown in <xref target="fig1"/>.  This diagram shows how a location dereference protocol fits with location configuration and conveyance.  <xref target="RFC5808"/> contains more information on this scenario and others like it.
      </t>

      <figure anchor="fig1" title="Example of Dereference Protocol Exchange">
	<artwork><![CDATA[
                         +-------------+
+------------+           |  Location   |            +-----------+
| End Device |           | Information |            | Location  |
|  (Target)  |           |   Server    |            | Recipient |
+-----+------+           +------+------+            +-----+-----+
      |                         |                         |
   .- + - - - - - - - - - - - - + -.                      |
   :  |     locationRequest     |  :                      |
   .  |----(for location URI)-->|  .                      |
   :  |                         |  : Location             |
   .  |     locationResponse    |  . Configuration        |
   :  |<-----(location URI)-----|  :                      |
   .  |                         |  .                      |
   `- + - - - - - - - - - - - - + -'                      |
      |                         |                         |
      |                Location Conveyance                |
      |~ ~ ~ ~ ~ ~ ~ ~ ~ ~(location URI)~ ~ ~ ~ ~ ~ ~ ~ ~>|
      |                         |                         |
      |                      .- + - - - - - - - - - - - - + -.
      |                      :  |     locationRequest     |  :
      |                      .  |<------(for civic)-------|  .
      |        Dereferencing :  |                         |  :
      |                      .  |     locationResponse    |  .
      |                      :  |--------(PIDF-LO)------->|  :
      |                      .  |                         |  .
      |                      `- + - - - - - - - - - - - - + -'
      |                         |                         |
]]></artwork>
	</figure>
      <t>The example in <xref target="ex-request"/> shows the simplest form of dereferencing request using HELD to the location URI <spanx style="verb">https://ls.example.com:49152/uri/w3g61nf5n66p0</spanx>.  The only way that this differs from the example in Section 10.1 of <xref target="RFC5985"/> is in the request URI and the source of the URI.
      </t>

	<figure anchor="ex-request" title="Minimal Dereferencing Request">
	  <artwork><![CDATA[
POST /uri/w3g61nf5n66p0 HTTP/1.1
Host: ls.example.com:49152
Content-Type: application/held+xml
Content-Length: 87

<?xml version="1.0"?>
<locationRequest xmlns="urn:ietf:params:xml:ns:geopriv:held"/>
    ]]></artwork>
	</figure>

      <t><xref target="ex-response"/> shows the response to the previous request listing both civic and geodetic location information of the Target's location.  Again, this is identical to the response in Section 10.1 of <xref target="RFC5985"/> -- unless policy specifies otherwise, the Location Recipient receives the same information as the Device.
      </t>
	<figure anchor="ex-response" title="Response with Location Information">
	  <artwork><![CDATA[
HTTP/1.1 200 OK
Server: Example LIS
Date: Mon, 10 Jan 2011 03:42:29 GMT
Expires: Tue, 11 Jan 2011 03:42:29 GMT
Cache-control: private
Content-Type: application/held+xml
Content-Length: 676

<?xml version="1.0"?>
<locationResponse xmlns="urn:ietf:params:xml:ns:geopriv:held">
<presence xmlns="urn:ietf:params:xml:ns:pidf"
          entity="pres:3650n87934c@ls.example.com">
  <tuple id="b650sf789nd">
  <status>
   <geopriv xmlns="urn:ietf:params:xml:ns:pidf:geopriv10"
     xmlns:gbp="urn:ietf:params:xml:ns:pidf:geopriv10:basic-policy">
    <location-info>
       <Point xmlns="http://www.opengis.net/gml"
              srsName="urn:ogc:def:crs:EPSG::4326">
         <pos>-34.407 150.88001</pos>
       </Point>
     </location-info>
     <usage-rules>
       <gbp:retransmission-allowed>
         false</gbp:retransmission-allowed>
       <gbp:retention-expiry>
         2011-01-11T03:42:29+00:00</gbp:retention-expiry>
     </usage-rules>
     <method>Wiremap</method>
   </geopriv>
  </status>
  <timestamp>2006-01-10T03:42:28+00:00</timestamp>
  </tuple>
</presence>
</locationResponse>
	  ]]></artwork>
	</figure>

	<figure anchor="ex-get" title="GET Request">
	  <preamble>The following GET request is treated in an equivalent fashion.  The LS treats this request as though it were a location request of the form shown in <xref target="default-request"/>.  The same response might be provided.
	  </preamble>
	  <artwork><![CDATA[
GET /uri/w3g61nf5n66p0 HTTP/1.1
Host: ls.example.com:49152
Accept: application/held+xml
    ]]></artwork>
	</figure>

	<figure anchor="ex-get-conneg" title="GET Request with Content Negotiation">
	  <preamble>The following GET request uses content negotiation to indicate a preference for a presence document.
	  </preamble>
	  <artwork><![CDATA[
GET /uri/w3g61nf5n66p0 HTTP/1.1
Host: ls.example.com:49152
Accept: application/pidf+xml,application/held+xml;q=0.5
   ]]></artwork>
	</figure>

	<figure anchor="ex-get-response" title="GET Response with PIDF-LO">
	  <preamble>The response only differs from a normal HELD location response to a POST request in that the <spanx style="verb">locationResponse</spanx> element is omitted and the <spanx style="verb">Content-Type</spanx> header reflects the changed content.
	  </preamble>
	  <artwork><![CDATA[
HTTP/1.1 200 OK
Server: Example LIS
Date: Mon, 10 Jan 2011 03:42:29 GMT
Expires: Tue, 11 Jan 2011 03:42:29 GMT
Cache-control: private
Content-Type: application/pidf+xml
Content-Length: 591

<?xml version="1.0"?>
<presence xmlns="urn:ietf:params:xml:ns:pidf"
          entity="pres:3650n87934c@ls.example.com">
  <!-- PIDF contents are identical to the previous example -->
</presence>
	  ]]></artwork>
	</figure>

    </section>

    <section anchor="security" title="Security Considerations">
      <t>Privacy of location information is the most important security consideration for this document.  Two measures in particular are used to protect privacy: TLS and authorization policies.  TLS provides a means of ensuring confidentiality of location information through encryption and mutual authentication.  An authorization policy allows a Rule Maker to explicitly control how location information is provided to Location Recipients.
      </t>

      <t>The process by which a Rule Maker establishes an authorization policy
is not covered by this document; several methods are possible, for instance,
<xref target="GEOPRIV-POLICY-URI"/> and <xref target="RFC4825"/>.

      </t>

      <t>TLS MUST be used for dereferencing location URIs unless confidentiality and integrity are provided by some other mechanism, as discussed in <xref target="details"/>.  Location Recipients MUST authenticate the host identity using the domain name included in the location URI, using the procedure described in Section 3.1 of <xref target="RFC2818"/>.  Local policy determines what a Location Recipient does if authentication fails or cannot be attempted.
      </t>

      <t>The <xref target="pawn">authorization by possession model</xref> further relies on TLS when transmitting the location URI to protect the secrecy of the URI.  Possession of such a URI implies the same privacy considerations as possession of the PIDF-LO document that the URI references.
      </t>

      <t>Location URIs MUST only be disclosed to authorized Location
Recipients.  The <xref target="RFC6280">GEOPRIV architecture</xref> 
designates the Rule
Maker to authorize disclosure of the URI.
      </t>

      <t>Protection of the location URI is necessary, since the policy
attached to such a location URI permits anyone who has the URI to view
the associated location information. 
This aspect of
security is covered in more detail in the specification of location conveyance
protocols, such as <xref target="RFC6442"/>.

      </t>

      <t>According to the requirements in <xref target="RFC5808"/> 
the LS MUST NOT provide any information about the Target except its location,
unless policy from a Rule Maker allows otherwise. Thus, the Location Server
MUST only provide an unlinked pseudonym in the "entity" attribute of the
PIDF-LO document unless the Rule Maker policy allows for identity disclosure.
      </t>

      <t>Further security considerations and requirements relating to the use of location URIs are described in <xref target="RFC5808"/>.
      </t>

    </section>

    <section title="Acknowledgements">
      <t>Thanks to Barbara Stark and Guy Caron for providing early
comments. Thanks to Rohan Mahy for constructive comments on the scope and
format of the document. Thanks to Ted Hardie for his strawman proposal that
provided assistance with the security section of this document.  Richard Barnes
made helpful observations on the application of authorization policy.  Bernard
Aboba and Julian Reschke contributed constructive reviews.</t>


      <t>The participants of the GEOPRIV interim meeting 2008 provided significant feedback on this document.</t>

      <t>James Polk provided input on security in June 2008.</t>

      <t>Martin Dawson was an original author of this document.  Sadly, he
passed away prior to its publication.</t>

    </section>
  </middle>
  <back>

<?rfc rfcedstyle="no"?>

    <references title="Normative References">


      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2616.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2818.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4119.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5491.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5985.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6125.xml"?>
    </references>


    <references title="Informative References">

      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.3261.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.3693.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4745.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.4825.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5246.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5687.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5751.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5808.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6155.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6280.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.6442.xml"?>

<!-- ietf-geopriv-policy IESG STATE  -->

<reference anchor='GEOPRIV-POLICY'>
<front>
<title>Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information</title>

<author initials='H' surname='Schulzrinne' fullname='Henning Schulzrinne'>
    <organization />
</author>

<author initials='H' surname='Tschofenig' fullname='Hannes Tschofenig'>
    <organization />
</author>

<author initials='J' surname='Cuellar' fullname='Jorge Cuellar'>
    <organization />
</author>

<author initials='J' surname='Polk' fullname='James Polk'>
    <organization />
</author>

<author initials='J' surname='Morris' fullname='John Morris'>
    <organization />
</author>

<author initials='M' surname='Thomson' fullname='Martin Thomson'>
    <organization />
</author>

<date month='August' day='21' year='2012' />

</front>

<seriesInfo name='Work in' value='Progress' />
</reference>


<!-- ietf-geopriv-policy-uri; Waiting for AD  -->

<reference anchor='GEOPRIV-POLICY-URI'>
<front>
<title>Location Configuration Extensions for Policy Management</title>

<author initials='R' surname='Barnes' fullname='Richard Barnes'>
    <organization />
</author>

<author initials='M' surname='Thomson' fullname='Martin Thomson'>
    <organization />
</author>

<author initials='J' surname='Winterbottom' fullname='James Winterbottom'>
    <organization />
</author>

<author initials='H' surname='Tschofenig' fullname='Hannes Tschofenig'>
    <organization />
</author>

<date month='November' day='28' year='2011' />

</front>

<seriesInfo name='Work in' value='Progress' />

</reference>


<!-- ietf-geopriv-dhcp-lbyr-uri-option; waiting for AD -->

<reference anchor='DHCP-URI-OPT'>
<front>
<title>Dynamic Host Configuration Protocol (DHCP) IPv4 and IPv6 Option for a Location Uniform Resource Identifier (URI)</title>

<author initials='J' surname='Polk' fullname='James Polk'>
    <organization />
</author>

<date month='May' day='31' year='2012' />

</front>

<seriesInfo name='Work in' value='Progress' />

</reference>

   </references>
<?rfc rfcedstyle="yes"?>


    <section title="GEOPRIV Using Protocol Compliance">
      <t>This section describes how use of HELD as a location dereference protocol complies with the GEOPRIV requirements described in <xref target="RFC3693"/>.

      <list style="format Req. %d." counter="Requirements">

	<t>(Location Object generalities):
	<vspace blankLines="1"/>
	This requirement relates to the <xref target="RFC4119">PIDF-LO</xref> document, which is used by HELD.  These requirements are addressed by <xref target="RFC4119"/> and <xref target="RFC5491"/>.
	</t>

	<t>(Location Object fields):
	<vspace blankLines="1"/>
	This requirement relates to the <xref target="RFC4119">PIDF-LO</xref> document, which is used by HELD.  These requirements are addressed by <xref target="RFC4119"/> and <xref target="RFC5491"/>.
	</t>

	<t>(Location Data Types):
	<vspace blankLines="1"/>
	This requirement relates to the <xref target="RFC4119">PIDF-LO</xref> document, which is used by HELD.  These requirements are addressed by <xref target="RFC4119"/> and <xref target="RFC5491"/>.
	</t>
      </list>
      </t>

      <t>Section 7.2 of <xref target="RFC3693"/> details the requirements of a &quot;Using Protocol&quot;. These requirements are restated, followed by a statement of compliance:

      <list style="format Req. %d." counter="Requirements">
	<t>"The using protocol has to obey the privacy and security instructions coded in the Location Object and in the corresponding Rules regarding the transmission and storage of the LO".
	<vspace blankLines="1"/>
	Compliant: This specification describes the use of HTTP over TLS for carrying the PIDF-LO from the LS to the Location Recipient.  The sending and receiving parties are expected to comply with the instructions carried inside the object.
	<vspace blankLines="1"/>
	Though discouraged, using unsecured "http:" URIs is permitted.  Using unsecured HTTP is likely to result in non-compliance with this requirement.
	</t>

	<t>"The using protocol will typically facilitate that the keys associated with the credentials are transported to the respective parties, that is, key establishment is the responsibility of the using protocol".
	<vspace blankLines="1"/>

	Compliant: This document specifies that authentication of the LS uses
the established public key infrastructure used by <xref target="RFC2818">HTTP
over TLS</xref>.  Authentication of Location Recipients is based on
distribution of a secret (the location URI) using a conveyance protocol (for
instance, <xref target="RFC6442"/>), allowances are made for later work to
define alternative methods.

	</t>

	<t>"(Single Message Transfer) In particular, for tracking of small target devices, the design should allow a single message/packet transmission of location as a complete transaction".
	<vspace blankLines="1"/>
	Not Compliant: The XML encoding specified in <xref target="RFC4119"/> is not suited to single packet transfers.  Use of compressed <xref target="RFC2616">content encoding</xref> might allow this condition to be met.
	</t>
      </list>
      </t>

      <t>Section 7.3 of <xref target="RFC3693"/> details the requirements of a
&quot;Rule based Location Data Transfer&quot;.  These requirements are restated
where they are applicable to this document:

      <list style="format Req. %d." counter="Requirements">
	<t>"(LS Rules) The decision of a Location Server to provide a Location Recipient access to Location Information MUST be based on Rule Maker-defined Privacy Rules".
	<vspace blankLines="1"/>
	Compliant: This document describes two alternative methods by which a
Rule Maker is able to control access to location information.  Rule Maker
policy is enforced by the LS when a location URI is dereferenced.  However,
this document does not describe how a location URI is created or how a Rule
Maker associates policy with a location URI.  These are covered by other
specifications.
	</t>

	<t>(LG Rules) Not Applicable: This relationship between LS and the
source of its information (be that Location Generator (LG) or LIS) is out of
the scope of this document.
	</t>

	<t>"(Viewer Rules) A Viewer does not need to be aware of the full Rules defined by the Rule Maker (because a Viewer SHOULD NOT retransmit Location Information), and thus a Viewer SHOULD receive only the subset of Privacy Rules necessary for the Viewer to handle the LO in compliance with the full Privacy Rules (such as, instruction on the time period for which the LO can be retained)".
	<vspace blankLines="1"/>
	Compliant: The Rule Maker might define (via mechanisms outside the scope of this document) which policy rules are disclosed to other entities.  For instance, if <xref target="RFC4745"/> is used to convey authorization policies from Rule Maker to LS, this is possible using the parameters specified in <xref target="GEOPRIV-POLICY"/>.
	<vspace blankLines="1"/>
	In order to comply with these rules, a Location Recipient MUST NOT redistribute a location URI without express permission.  Depending on the access control model, the location URI might be secret (see Section 3.3 of <xref target="RFC5808"/>).
	</t>

	  <t>(Full Rule language) Not Applicable: Note, however, that GEOPRIV has
defined a rule language capable of expressing a wide range of privacy rules
(see <xref target="RFC4745"/> and <xref target="GEOPRIV-POLICY"/>.

	  </t>

	  <t>(Limited Rule language) Not Applicable: This requirement applies to (and is addressed by) <xref target="RFC4119">PIDF-LO</xref>.
	  </t>
	</list>
      </t>

      <t>Section 7.4 of <xref target="RFC3693"/> details the requirements of &quot;Location Object Privacy and Security&quot;.  These requirements are restated where they are applicable to this document:
	<list style="format Req. %d." counter="Requirements">
	  <t>(Identity Protection) Compliant: Identity protection of the Target is provided as long as both of the following conditions are true:
	    <list style="format (%c)" counter="subbullets">
	      <t>the location URI is not associated with the identity of the Target in any context, and
	      </t>
	      <t>the PIDF-LO does not contain information about the identity of the Target.
	      </t>
	    </list>
	    For instance, this requirement is complied with if the protocol that conveys the location URI does not link the identity of the Target to the location URI and the LS doesn't include meaningful identification information in the PIDF-LO document.  <xref target="security"/> recommends that an unlinked pseudonym is used by the LS.
	  </t>

	  <t>(Credential Requirements) Compliant: The primary security
mechanism specified in this document is Transport Layer Security.  TLS offers
the ability to use different types of credentials, including symmetric,
asymmetric, or a combination of them.</t>


	  <t>(Security Features) Compliant: GEOPRIV defines a few security
requirements for the protection of Location Objects such as mutual endpoint
authentication, data object integrity, data object confidentiality, and replay
protection.  The ability to use Transport Layer Security fulfills most of these
requirements.  Authentication of Location Recipients in this document relies on
proof of a shared secret -- the location URI.  This does not preclude the
addition of more robust authentication procedures.

	  </t>

	  <t>(Minimal Crypto) Compliant: The mandatory-to-implement ciphersuite
is provided in the TLS layer security specification <xref target="RFC5246"/>.</t>

	</list>
      </t>
    </section>

    <section title="Compliance to Location Reference Requirements">
      <t>This section describes how HELD complies to the location reference requirements stipulated in <xref target="RFC5808"/>.  Compliance of <xref target="RFC5985"/> to the Location Configuration Protocol is included.

      <list><t>Note: Use of HELD as a location dereference protocol does not necessarily imply that HELD is the corresponding LCP.  This document is still applicable to HTTP location URIs that are acquired by other means.
      </t></list>
      </t>

      <section title="Requirements for a Location Configuration Protocol">
	<t>
	  <list style="format C%d." counter="lbyr-lcp">
	    <t>"Location URI support:  The location configuration protocol MUST support a location reference in URI form".
	    <vspace blankLines="1"/>
	    Compliant: HELD only provides location references in URI form.
	    </t>

	    <t>"Location URI expiration:  When a location URI has a limited validity interval, its lifetime MUST be indicated".
	    <vspace blankLines="1"/>
	    Compliant: HELD indicates the expiry time of location URIs using the <spanx style="verb">expires</spanx> attribute.  <xref target="GEOPRIV-POLICY-URI"/> provides a way to control expiration of a location URI.
	    </t>

	    <t>"Location URI cancellation:  The location configuration protocol MUST support the ability to request a cancellation of a specific location URI".
	    <vspace blankLines="1"/>
	    Compliant with Extension: <xref target="GEOPRIV-POLICY-URI"/>
describes how a location URI can be canceled through the application of policy.
Without extensions, HELD does not provide a method for canceling location
URIs.

	    </t>

	    <t>"Location Information Masking:  The location URI MUST ensure, by default, through randomization and uniqueness, that the location URI does not contain location information specific components".
	    <vspace blankLines="1"/>
	    Compliant: The HELD specification <xref target="RFC5985"/> explicitly references this requirement in providing guidance on the format of the location URI.
	    </t>

	    <t>"Target Identity Protection:  The location URI MUST NOT contain information that identifies the Target (e.g., user or device)".
	    <vspace blankLines="1"/>
	    Compliant: The HELD specification <xref target="RFC5985"/> provides specific guidance on the anonymity of the Target with regards to the generation of location URIs.  <xref target="security"/> expands on this guidance.
	    </t>

	    <t>"Reuse indicator:  There SHOULD be a way to allow a Target to control whether a location URI can be resolved once only, or multiple times".
	    <vspace blankLines="1"/>
	    Not Compliant: Specific extensions to the protocol or authorization
policy formats are needed to alter the default behavior, which allows unlimited
resolution of the location URI.
	    </t>

	    <t>"Selective disclosure:  The location configuration protocol MUST provide a mechanism that allows the Rule Maker to control what information is being disclosed about the Target".
	    <vspace blankLines="1"/>
	    Compliant with Extension: Use of policy mechanisms and <xref target="GEOPRIV-POLICY-URI"/> enable this capability.  Note that this document recommends that only location information be provided.
	    </t>

	    <t>"Location URI Not guessable:  As a default, the location configuration protocol MUST return location URIs that are random and unique throughout the indicated lifetime.  A location URI with 128-bits of randomness is RECOMMENDED".
	    <vspace blankLines="1"/>
	    Compliant: HELD specifies that location URIs conform to this requirement.  The amount of randomness is not specifically identified since it depends on a number of factors that change over time, such as the number of valid location URIs, the validity period of those URIs, and the rate that guesses can be made.
	    </t>

	    <t>"Location URI Options:  In the case of user-provided authorization policies, where anonymous or non-guessable location URIs are not warranted, the location configuration protocol MAY support a variety of optional location URI conventions, as requested by a Target to a location configuration server, (e.g., embedded location information within the location URI)".
	    <vspace blankLines="1"/>
	    Not Compliant: HELD does not support Device-specified location URI forms.
	    </t>
	  </list>
	</t>
      </section>

      <section title="Requirements for a Location Dereference Protocol">
	<t>
	  <list style="format D%d." counter="lbyr-ldp">
	    <t>"Location URI support: The location dereference protocol MUST support a location reference in URI form".
	    <vspace blankLines="1"/>
	    Compliant: HELD only provides location references in URI form.
	    </t>

	    <t>"Authentication:  The location dereference protocol MUST include mechanisms to authenticate both the client and the server".
	    <vspace blankLines="1"/>
	    Partially Compliant: TLS provides means for mutual authentication.  This document only specifies the required mechanism for server authentication.  Client authentication is not precluded.
	    </t>

	    <t>"Dereferenced Location Form: The value returned by the dereference protocol MUST contain a well-formed PIDF-LO document".
	    <vspace blankLines="1"/>
	    Compliant: HELD requires that Location Objects are in the form of a PIDF-LO that complies with <xref target="RFC5491"/>.
	    </t>

	    <t>"Location URI Repeated Use: The location dereference protocol MUST support the ability for the same location URI to be resolved more than once, based on dereference server configuration".
	    <vspace blankLines="1"/>
	    Compliant: A Location Recipient may access and use a location URI as many times as desired until URI expiration results in the URI being invalidated.  Authorization policies might include rules that modify this behavior.
	    </t>

	    <t>"The location dereference protocol MUST support confidentiality protection of messages sent between the Location Recipient and the location server".
	    <vspace blankLines="1"/>
	    Compliant: This document strongly recommends the use of TLS for
confidentiality, and HELD mandates its implementation.  Unsecured HTTP is
permitted: the associated risks are described in <xref target="details"/>.

	    </t>

	  </list>
	</t>
      </section>
    </section>
  </back>
</rfc>
