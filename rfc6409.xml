<?xml version="1.0" encoding="US-ASCII"?>

<!-- NOTE to anyone trying to compile this: current xml2rfc will not
	  process it with "strict" .. produces all sorts of spurious
	  errors about improperly-organized front/ middle/ back parts --> 

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [

<!ENTITY rfc3865 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3865.xml'>
<!ENTITY rfc2645 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2645.xml'>
<!ENTITY rfc2852 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2852.xml'>
<!ENTITY rfc4141 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4141.xml'>
<!ENTITY rfc4871 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4871.xml'>
<!ENTITY rfc4880 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.4880.xml'>
<!ENTITY rfc5672 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5672.xml'>
<!ENTITY rfc5751 PUBLIC ''
   'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5751.xml'>

]>

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc compact="yes"?>
<?rfc subcompact="no" ?>
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments='yes' ?>
<?rfc inline='yes' ?>  
<?rfc rfcedstyle="yes"?>

<rfc submissionType="IETF" consensus="yes" number="6409" ipr="trust200902" obsoletes="4409" category="std" seriesNo="72">
   
  <front>
    <title abbrev="Message Submission for Mail">
      Message Submission for Mail</title>
<author initials="R." surname="Gellens" fullname="Randall Gellens">
  <organization>QUALCOMM Incorporated</organization>
  <address>
    <postal>
      <street>5775 Morehouse Drive</street>
      <city>San Diego</city> <region>CA</region> <code>92121-2779</code>
      <country>USA</country> </postal>
      <!-- <phone>?? </phone> -->
    <email>rg+ietf@qualcomm.com</email>
  </address>
  </author>
  <author initials="J.C." surname="Klensin" fullname="John C Klensin">
  <organization/>
  <address>
    <postal>
      <street>1770 Massachusetts Ave, #322</street>
      <city>Cambridge</city> <region>MA</region> <code>02140</code>
      <country>USA</country> </postal>
    <phone>+1 617 491 5735 </phone>
    <email>john-ietf@jck.com</email>
  </address>
  </author>

  <date month="November" year="2011"/>

  <area>Applications</area>
  <workgroup>YAM</workgroup>
  
    <keyword>Text</keyword>
    <keyword>Internationalization</keyword>
    <keyword>ASCII</keyword>
    <keyword>Unicode</keyword>
    <keyword>UTF-8</keyword>
    <abstract>
      <t>This memo splits message submission from message relay,
		 allowing each service to operate according to its own rules
		 (for security, policy, etc.), and specifies what actions are
		 to be taken by a submission server.</t>
	  <t>Message relay is unaffected, and continues to use SMTP
		 over port 25.</t>
	  <t>When conforming to this document, message submission uses
		 the protocol specified here, normally over port 587. </t>
	  <t>This separation of function offers a number of benefits,
		 including the ability to apply specific security or policy
		 requirements.</t>
    </abstract>
  </front>
        

  <middle>
  <section title="Introduction">
	 <t>SMTP <xref target="SMTP-MTA"/> was defined as a message
		*transfer* protocol, that is, a 
		means to route (if needed) and deliver finished (complete)
		messages.</t>
	 <t>Message Transfer Agents (MTAs) are not supposed to alter the
		message text, except to add 'Received', 'Return-Path', and
		other header fields as required by <xref target="SMTP-MTA" />.
        However, SMTP is now also widely used as a message
		*submission* protocol, that is, a means for Message User
		Agents (MUAs) to introduce new messages into the MTA routing
		network.  The process that accepts message submissions from
		MUAs is termed a "Message Submission Agent" (MSA).</t>
	 <t>In order to permit unconstrained communications, SMTP is not
		often authenticated during message relay.</t>
	 <t>Authentication and authorization of initial submissions have
		become increasingly important, driven by changes in security
		requirements and rising expectations that submission servers
		take responsibility for the message traffic they originate.</t>
     <t>   For example, due to the prevalence of machines that have worms,
   viruses, or other malicious software that generate large amounts of
   spam, many sites now prohibit outbound traffic on the standard SMTP
   port (port 25), funneling all mail submissions through submission
   servers.</t>


   <t> In addition to authentication and authorization issues, messages
   being submitted are, in some cases, finished (complete) messages and,
   in other cases, are unfinished (incomplete) in one or more aspects.
   Unfinished messages may need to be completed to ensure they conform
   to the Message Format specification
   <xref target="MESSAGE-FORMAT"/> and related requirements.  For example, the
   message may lack a proper 'Date' header field, and domains might not
   be fully qualified.  In some cases, the MUA may be unable to generate
   finished messages (e.g., it might not know its time zone).  Even when
   submitted messages are complete, local site policy may dictate that
   the message text be examined or modified in some way, e.g., to
   conceal local name or address spaces.  Such completions or
   modifications have been shown to cause harm when performed by
   downstream MTAs -- that is, MTAs after the first-hop submission MTA
   -- and are, in general, considered to be outside the province of
   standardized MTA functionality.</t>

   <t>Separating messages into submissions and transfers allows
	  developers and network administrators to do the
	  following more easily:
	  <list style="symbols">
		 <t>Implement security policies and guard against unauthorized mail
       relaying or injection of unsolicited bulk mail.</t>
	     <t>Implement authenticated submission, including off-site submission
       by authorized users such as travelers.</t>
	     <t>Separate the relevant software code differences, thereby making
       each code base more straightforward and allowing for different
       programs for relay and submission.</t>
	     <t>Detect configuration problems with a site's mail
			clients.</t>
		 <t>Provide a basis for adding enhanced submission services.</t>
	   </list></t>

   <t>This memo describes a low-cost, deterministic means for messages to
   be identified as submissions, and it specifies what actions are to be
   taken by a submission server.</t>

		 
   </section>

   <section title="Document Information">
	  <section title="Definitions of Terms Used in This Memo">
   <t>Many of the concepts and terms used in this document are defined in
   <xref target="SMTP-MTA" />; familiarity with those documents is assumed here.</t>

   <t>Fully Qualified
	  <vspace blankLines="1"/>
   Containing or consisting of a domain that can be globally resolved
   using the Domain Name Service, that is, not a local alias or partial
   specification.</t>

   <t>Message Submission Agent (MSA)
	  <vspace blankLines="1"/>
   A process that conforms to this specification.  An MSA acts as a
   submission server to accept messages from MUAs, and it either delivers
   them or acts as an SMTP client to relay them to an MTA.</t>

   <t>Message Transfer Agent (MTA)
	  <vspace blankLines="1"/>
   A process that conforms to <xref target="SMTP-MTA" />.  An MTA acts as an SMTP server
   to accept messages from an MSA or another MTA, and it either delivers
   them or acts as an SMTP client to relay them to another MTA.</t>

   <t>Message User Agent (MUA)
	  <vspace blankLines="1"/>
   A process that acts (often on behalf of a user and with a user
   interface) to compose and submit new messages, and to process delivered
   messages.
	  <vspace blankLines="1"/>
   For delivered messages, the receiving MUA may obtain and process the
   message according to local conventions or, in what is commonly
   referred to as a split-MUA model, Post Office Protocol <xref target="POP3"/> or IMAP
   <xref target="IMAP4" /> is used to access delivered messages, whereas the protocol
   defined here (or SMTP) is used to submit messages.</t>
  </section>

  <section title="Conventions Used in This Document" anchor="DocConventions">
   <t>Examples use the 'example.net' domain.</t>

   <t>The key words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT", and "MAY"
   in this document are to be interpreted as defined in
   <xref target="KEYWORDS"/>.</t>
   </section>
   </section>

   <section title="Message Submission" anchor="MessageSubmission">
	  <section title="Submission Identification">
		 <t>Port 587 is reserved for email message submission as specified in
   this document.  Messages received on this port are defined to be
   submissions.  The protocol used is ESMTP <xref target="SMTP-MTA"/>, with
   additional restrictions or allowances as specified here.</t>

         <t>Although most email clients and servers can be configured to use port
   587 instead of 25, there are cases where this is not possible or
   convenient.  A site MAY choose to use port 25 for message submission
   by designating some hosts to be MSAs and others to be MTAs.</t>
      </section>

	  <section title="Message Rejection and Bouncing">

		 <t>MTAs and MSAs MAY implement message rejection rules that rely, in part,
   on whether the message is a submission or a relay.</t>
         <t>For example, some sites might configure their MTAs to reject all RCPT
   commands for messages that do not reference local users, and they might
   configure their MSA to reject all message submissions that do not
   come from authorized users, with authorization based on either the
   authenticated identity or the submitting endpoint being within a
   protected IP environment.</t>


        <t>NOTE:  It is better to reject a message than to risk sending one that
   is damaged.  This is especially true for problems that are
   correctable by the MUA, for example, an invalid 'From' field.</t>

        <t>If an MSA is not able to determine a return path to the submitting
   user, from a valid MAIL FROM, a valid source IP address, or based on
   authenticated identity, then the MSA SHOULD immediately reject the
   message.  A message can be immediately rejected by returning a 550
   code to the MAIL command.</t>

       <t>Note that a null return path, that is, MAIL FROM:&lt;&gt;, is permitted and
   MUST NOT, in itself, be cause for rejecting a message.  (MUAs need to
   generate null return-path messages for a variety of reasons,
   including disposition notifications.)</t>

       <t>Except in the case where the MSA is unable to determine a valid
   return path for the message being submitted, text in this
   specification that instructs an MSA to issue a rejection code MAY be
   complied with by accepting the message and subsequently generating a
   bounce message.  (That is, if the MSA is going to reject a message
   for any reason except being unable to determine a return path, it can
   optionally do an immediate rejection or accept the message and then
   mail a bounce.)</t>

       <t>NOTE:  In the normal case of message submission, immediately
   rejecting the message is preferred, as it gives the user and MUA
   direct feedback.  To properly handle delayed bounces, the client MUA
   needs to maintain a queue of messages it has submitted and match
   bounces to them.  Note that many contemporary MUAs do not have this
   capability.</t>
      </section>

      <section title="Authorized Submission" anchor="AuthorizedSubmission">

         <t>Numerous methods have been used to ensure that only authorized users
   are able to submit messages.  These methods include authenticated
   SMTP, IP address restrictions, secure IP and other tunnels, and prior
   POP authentication.</t>

         <t>Authenticated SMTP <xref target="SMTP-AUTH"/> has seen
			widespread deployment.  It 
   allows the MSA to determine an authorization identity for the message
   submission, one that is not tied to other protocols.</t>

         <t>IP address restrictions are very widely implemented, but they do not allow
   for travelers and similar situations, and they can be easily spoofed
   unless all transport paths between the MUA and MSA are
   trustworthy.</t>

         <t>Secure IP <xref target="IPSEC"/>, and other encrypted and
			authenticated tunneling 
   techniques, can also be used and provide additional benefits of
   protection against eavesdropping and traffic analysis.</t>

         <t>Requiring a POP <xref target="POP3"/> authentication
			(from the same IP address) 
   within some amount of time (e.g., 20 minutes) prior to the start of a
   message submission session has also been used, but this does impose
   restrictions on clients as well as servers, which may cause
   difficulties.  Specifically, the client must do a POP authentication
   before an SMTP submission session, and not all clients are capable
   and configured for this.  Also, the MSA must coordinate with the POP
   server, which may be difficult.  There is also a window during which
   an unauthorized user can submit messages and appear to be a
   previously authorized user.  Since it is dependent on the MUA's IP
   addresses, this technique is substantially as subject to IP address
   spoofing as validation based on known IP addresses alone (see
   above).</t>
   </section>
   </section>

   <section title="Mandatory Actions">
	  <t>An MSA MUST do all of the following:</t>

	  <section title="General Submission Rejection Code">
		 <t>Unless covered by a more precise response code, response code 554 is
   to be used to reject a MAIL, RCPT, or DATA command that contains
   something improper.</t>
      </section>

	  <section title="Ensure All Domains Are Fully Qualified">
		 <t>The MSA MUST ensure that all domains in the SMTP envelope are fully
			qualified.</t>
		 <t>If the MSA examines or alters the message text in any way, except to
		   add trace header fields <xref target="SMTP-MTA" />, it MUST ensure that all domains
		   in address header fields are fully qualified.</t>

		<t>Reply code 554 is to be used to reject a MAIL, RCPT, or DATA command
		   that contains improper domain references.</t>

		<t>A frequent local convention is to accept single-level domains (e.g.,
		   'sales') and then to expand the reference by adding the remaining
		   portion of the domain name (e.g., to 'sales.example.net').  Local
		   conventions that permit single-level domains SHOULD reject, rather
		   than expand, incomplete multi-level domains (e.g., 'squeaky.sales'),
		   since such expansion is particularly risky.</t>
      </section>

	  <section title="Require Authentication">
		 <t>The MSA MUST, by default, issue an error response to the MAIL command
		   if the session has not been authenticated using <xref target="SMTP-AUTH" />, unless
		   it has already independently established authentication or
		   authorization (such as being within a protected
		   subnetwork).</t>
		<t> <xref target="AuthorizedSubmission"/> discusses
		   authentication mechanisms. </t>
		<t>Reply code 530 <xref target="SMTP-AUTH"/> is used for this
		   purpose.</t>
	  </section>
	  </section>

	  <section title="Recommended Actions">
		 <t>The MSA SHOULD do all of the following.</t>

		 <section title="Enforce Address Syntax">
			<t>An MSA SHOULD reject messages with illegal syntax in a sender or
			   recipient SMTP envelope address.</t>
			<t>If the MSA examines or alters the message text in any way, except to add
			   trace header fields, it SHOULD reject messages with illegal address
			   syntax in address header fields.</t>
			<t>Reply code 501 is to be used to reject a MAIL or RCPT command that
			   contains a detectably improper address.</t>

			<t>When addresses are resolved after submission of the
			   message body, reply code 554 (with a suitable enhanced
			   status code from <xref target="SMTP-CODES"/>) is used
			   after end-of-data, if the message contains invalid
			   addresses in the header.</t>
		</section>

		<section title="Log Errors" anchor="LogErrors">
		   <t>The MSA SHOULD log message errors, especially apparent
			  misconfigurations of client software.</t>

		   <t>It can be very helpful to notify the administrator when problems are
			   detected with local mail clients.  This is another advantage of
			   distinguishing submission from relay: system administrators might be
			   interested in local configuration problems, but not in client
			   problems at other sites.</t>

			<t>Note that it is important to impose limits on such logging to prevent
			   certain forms of denial-of-service (DoS) attacks.</t>
		</section>

		<section title="Apply Shorter Timeouts" anchor="ShortTimeout">
		   <t>The timeouts specified in Section 4.5.3.2 of
			  <xref target="SMTP-MTA">RFC 5321</xref> are designed to
			  deal with the many types of situations that can be
			  encountered on the public Internet.  The relationship
			  among clients and servers corresponding to this
			  specification is typically much closer and more
			  predictable.  Submission clients behave differently
			  from relay client in some areas, especially tolerance for timeouts.  In practice, message submission clients tend to have short
			  timeouts (perhaps 2-5 minutes for a reply to any command).
			  Submission servers SHOULD respond to any command (even 
			  DATA) in fewer than 2 minutes.
			  <!-- new text, 20110726 -->
		      When the submission server has a close administrative
			  and/or network relationship with the submission
			  client(s) -- e.g., with a webmail interface calling on a
			  tightly bound submission server -- mutual agreement on
			  much shorter timeouts MAY be appropriate. </t> 
		</section>
		</section>

	<section title="Optional Actions">
	   <t>The MSA MAY do any of the following.</t>

	   <section title="Enforce Submission Rights">
		  <t>The MSA MAY issue an error response to a MAIL command if the address
		   in MAIL FROM appears to have insufficient submission rights or is
		   not authorized with the authentication used (if the session has been
		   authenticated).</t>

		<t>Reply code 550 with an appropriate enhanced status code per
		   <xref target="SMTP-CODES"/>, such as 5.7.1, is used for
		   this purpose.</t>
		</section>

		<section title="Enforce Permissions">
		   <t>The MSA MAY issue an error response to a RCPT command if inconsistent
			   with the permissions given to the user (if the session has been
			   authenticated).</t>

			<t>Reply code 550 with an appropriate enhanced status
			   code per <xref target="SMTP-CODES"/>, such as 5.7.1,
			   is used for this purpose.</t>
		</section>

		<section title="Check Message Data">
		   <t>The MSA MAY issue an error response to the DATA command or send a
			   failure result after end-of-data if the submitted message is
			   syntactically invalid, seems inconsistent with permissions given
			   to the user (if known), or violates site policy in
			   some way.</t>
		   <t>Reply code 554 is used for syntactic problems in the
			  data.  Reply code 501 is used if the command itself is
			  not syntactically valid.  Reply code 550 with an
			  appropriate enhanced status code
			  per <xref target="SMTP-CODES"/> (such as 5.7.1) is used
			  to reject based on the submitting user.  Reply code 550
			  with an appropriate enhanced status code (such as
			  5.7.0) is used if the message violates site policy.</t> 
		</section>

		<section title="Support for the Postmaster Address">
		   <t>If appropriate under local conditions and to facilitate
			  conformance with the "postmaster" requirements of
			  <xref target="SMTP-MTA"/>, the MSA MAY permit a reduced
			  degree of authentication for mail addressed to the 
			  "postmaster" (or one of its alternate spelling forms, see
			  <xref target="SMTP-MTA"/>), in one or more domains, as compared to
			  requirements 
			  enforced for other addresses.  Among other benefits, this provides an
			  address of last resort that can be used by authorized users to report
			  problems that otherwise prevent them from submitting mail.</t>
		</section>

		<section title="Adjust Character Encodings" anchor="CharEncode">
		   <t>Subject to limits imposed by other protocols and
			  specifications, the MSA MAY convert among character sets
			  or string encodings to improve message usefulness, 
			  likelihood of delivery, or conformance with other
			  specifications or recommendations.  Such conversions MAY
			  include, when necessary, replacement of addresses whose
			  encoding does not conform to RFC 5321 with ones that do,
			  using information available out of band.</t>
		</section>
    </section>

	<section title="Interaction with SMTP Extensions" anchor="SMTP-Interaction">
	   <t>The following table lists Standards Track and
		   Experimental SMTP extensions whose documents do not
		   explicitly specify their applicability to this protocol.
		   Listed are the EHLO keyword, name, an indication as to the
		   use of the extension on the submit port, and a 
		   reference.</t>
<figure><artwork>
+--------------------+----------------------+--------+-----------------+
| Keyword            | Name                 |Sub-    | Reference       |
|                    |                      |mission |                 |
+--------------------+----------------------+--------+-----------------+
|PIPELINING          |Pipelining            |SHOULD  |[PIPELINING]     |
|ENHANCEDSTATUSCODES |Enhanced Status Codes |SHOULD  |[CODES-EXTENSION]|
|ETRN                |Extended Turn         |MUST NOT|[ETRN]           |
|   ...              |Extended Codes        |SHOULD  |[SMTP-CODES]     |
|DSN                 |Delivery Status       |SHOULD  |[DSN]            |
|                    |  Notification        |        |                 |
|SIZE                |Message size          |MAY     |[SIZE]           |
|   ...              |521 reply code        |MUST NOT|[REPLY-521]      |
|CHECKPOINT          |Checkpoint/Restart    |MAY     |[CHECKPOINT]     |
|BINARYMIME          |Binary MIME           |MAY     |[CHUNKING]       |
|CHUNKING            |Chunking              |MAY     |[CHUNKING]       |
|8BITMIME            |Use 8-bit data        |SHOULD  |[RFC6152]        |
|AUTH                |Authentication        |MUST    |[SMTP-AUTH]      |
|STARTTLS            |Start TLS             |MAY     |[START-TLS]      |
|NO-SOLICITING       |Notification of       |MAY     |[RFC3865]        |
|                    |  no soliciting       |        |                 |
|MTRK                |Message Tracking      |MAY     |[MSG-TRACK]      |
|ATRN                |On-Demand Relay       |MUST NOT|[RFC2645]        |
|DELIVERBY           |Deliver By            |MAY     |[RFC2852]        |
|CONPERM             |Content Conversion    |MAY     |[RFC4141]        |
|                    |  Permission          |        |                 |
|CONNEG              |Content Conversion    |MAY     |[RFC4141]        |
|                    |  Negotiation         |        |                 |
+--------------------+----------------------+--------+-----------------+
                             Table 1
</artwork></figure>
<!-- 
		<texttable anchor="ExtTable">
		   <preamble>[[RFC Editor: Please see if you can do something
			  with the formatting of this table that results in a more
			  readable appearance.  Consult the document editors as
			  needed.]]</preamble>
		   <ttcol align='left'>Keyword</ttcol>
		   <ttcol align='left'>Name</ttcol>

		   <ttcol align='center'>Submission</ttcol>
		   <ttcol align='left'>Reference</ttcol>
<c>PIPELINING</c> <c>Pipelining</c><c>SHOULD</c> <c><xref target="PIPELINING"/></c>
<c>ENHANCEDSTATUSCODES</c> <c>Enhanced Status Codes</c> <c>SHOULD</c> <c><xref target="CODES-EXTENSION"/></c>

<c>ETRN</c> <c>Extended Turn</c> <c>MUST NOT</c> <c><xref target="ETRN"/></c>
<c> ...</c> <c>Extended Codes</c> <c>SHOULD</c> <c><xref target="SMTP-CODES"/></c>
<c>DSN</c> <c>Delivery Status Notification</c> <c>SHOULD</c> <c><xref target="DSN"/></c>

<c>SIZE</c> <c>Message size</c> <c>MAY</c> <c><xref target="SIZE"/></c>
<c>...</c> <c>521 reply code</c> <c>MUST NOT</c> <c><xref target="REPLY-521"/></c>
<c>CHECKPOINT</c> <c>Checkpoint/Restart</c> <c>MAY</c> <c><xref target="CHECKPOINT"/></c>

<c>BINARYMIME</c> <c>Binary MIME</c> <c>MAY</c> <c><xref target="CHUNKING"/></c>
<c>CHUNKING</c> <c>Chunking</c> <c>MAY</c> <c><xref target="CHUNKING"/></c>
<c>8BITMIME</c> <c>Use 8-bit data</c> <c>SHOULD</c> <c><xref target="RFC6152"/></c>

<c>AUTH</c> <c>Authentication</c> <c>MUST</c> <c><xref target="SMTP-AUTH"/></c>
<c>STARTTLS</c> <c>Start TLS</c> <c>MAY</c> <c><xref target="Start-TLS"/></c>
<c>NO-SOLICITING</c> <c>Notification of no soliciting</c> <c>MAY</c> <c><xref target="RFC3865"/></c>

<c>MTRK</c> <c>Message Tracking</c> <c>MAY</c> <c><xref target="Msg-Track"/></c>
<c>ATRN</c> <c>On-Demand Relay</c> <c>MUST NOT</c> <c><xref target="RFC2645"/></c>
<c>DELIVERBY</c> <c>Deliver By</c> <c>MAY</c> <c><xref target="RFC2852"/></c>

<c>CONPERM</c> <c>Content Conversion Permission</c> <c>MAY</c> <c><xref target="RFC4141"/></c>
<c>CONNEG</c> <c>Content Conversion Negotiation</c> <c>MAY</c> <c><xref target="RFC4141"/></c>

    Template:
    <c>K</c> <c>TBS</c> <c>S</c> <c><xref target=""/></c>  

    </texttable> -->	
	 
    <t>Future SMTP extensions SHOULD explicitly specify if they are valid on
   the Submission port.</t>

    <t>Some SMTP extensions are especially useful for message
	   submission:</t>

    <t>Extended Status Codes <xref target="SMTP-CODES"/> SHOULD be
	   supported and used according
	   to <xref target="CODES-EXTENSION"/>.   This permits the MSA to
	   notify the 
	   client of specific configuration or other problems in more detail
	   than the response codes listed in this memo.  Because some rejections
	   are related to a site's security policy, care should be used not to
	   expose more detail to unauthenticated senders than is
	   needed.</t>

	<t> <xref target="PIPELINING"/> SHOULD be supported by the
	   MSA.</t>

	<t><xref target="SMTP-AUTH"/> allows the MSA to validate the
	   authority and determine the identity of the submitting user
	   and MUST be supported by the MSA.</t>

	<t><xref target="START-TLS"/> is the most widely used mechanism,
	   at the time this document was written, that allows the MUA and MSA to
	   protect message submission integrity and privacy.</t>

	<t>Any references to the DATA command in this memo also refer to
	   any substitutes for DATA, such as the BDAT command used with
	   <xref target="CHUNKING"/>.</t>

   </section>

   <section title="Message Modifications" anchor="MsgMods">
	  <t>Sites MAY modify submissions to ensure compliance with
		 standards and site policy.  This section describes a number
		 of such modifications that are often considered useful.</t>

	  <t>NOTE:  As a matter of guidance for local decisions to implement
	   message modification, a paramount rule is to limit such actions to
	   remedies for specific problems that have clear solutions.  This is
	   especially true with address elements.  For example, indiscriminately
	   appending a domain to an address or element that lacks one typically
	   results in more broken addresses.  An unqualified address must be
	   verified to be a valid local part in the domain before the domain can
	   be safely added.</t>

	 <t>Any message forwarded or delivered by the MSA MUST conform to the
	   requirements of <xref target="SMTP-MTA"/>
	   and <xref target="MESSAGE-FORMAT"/> or the requirements
	   permitted by extensions that are supported by the MSA and
	   accepted by the next-hop server.</t>

	<t>Message modification can affect the validity of an existing message
      signature, such as by 
	   <xref target="DKIM">DomainKeys Identified Mail (DKIM)</xref>,
	   <xref target="RFC4880">Pretty Good Privacy (PGP)</xref>, or
	   <xref target="RFC5751">Secure MIME (S/MIME)</xref>,
      and can render the  signature invalid.  This, in turn, can affect
      message handling by later receivers, such as filtering engines that
      consider the presence or absence of a valid signature.</t>

	<section title="Add 'Sender'">
	   <t>The MSA MAY add or replace the 'Sender' field, if the identity of the
		  sender is known and this is not given in the 'From'
		  field.</t>
	   <t>The MSA MUST ensure that any address it places in a 'Sender' field is,
		  in fact, a valid mail address.</t>
	  </section>

	  <section title="Add 'Date'">
		 <t> The MSA MAY add a 'Date' field to the submitted message,
			if it lacks it, or correct the 'Date' field if it does
			not conform to <xref target="MESSAGE-FORMAT"/> syntax.</t>
	  </section>

	  <section title="Add 'Message-ID'">
		 <t>The MSA SHOULD add or replace the 'Message-ID' field, if
			it lacks it, or it is not valid syntax (as defined by
			<xref target="MESSAGE-FORMAT"/>).  Note that a number of
			clients still do not generate 'Message-ID' fields.</t>
	  </section>

	  <section title="Transfer Encode">
		 <t>The MSA MAY apply transfer encoding to the message according to MIME
			conventions, if needed and not harmful to the MIME type.</t>
	  </section>

	  <section title="Sign the Message">
		 <t>The MSA MAY (digitally) sign or otherwise add authentication
   information to the message.</t>
	  </section>

	  <section title="Encrypt the Message">
		 <t>The MSA MAY encrypt the message for transport to reflect
			organizational policies.</t>

		 <t>NOTE:  To be useful, the addition of a signature and/or encryption by
		   the MSA generally implies that the connection between the MUA and MSA
		   must, itself, be secured in some other way, for example, by operating
		   inside of a secure environment, by securing the submission connection
		   at the transport layer, or by
		   using an <xref target="SMTP-AUTH"/> mechanism that
		   provides for session integrity.</t>
	  </section>

	  <section title="Resolve Aliases" anchor="ResolveAliases">
		 <t>The MSA MAY resolve and rewrite aliases (e.g., Canonical Name (CNAME) records) for
			domain names, in the 
		   SMTP envelope and/or in address fields of the header, subject
		   to local policy.</t>

		<t>NOTE: <xref target="SMTP-MTA">SMTP</xref> prohibits the use
		   of domain name aliases in addresses and the session-opening
		   announcement.  As with other SMTP requirements, RFC 5321
		   effectively prohibits an MSA from forwarding such messages
		   into the public Internet.  Nonetheless, unconditionally
		   resolving aliases could be harmful.  For 
		   example, if www.example.net and ftp.example.net are both aliases for
		   mail.example.net, rewriting them could lose useful information.</t>
      </section>
			   
	  <section title="Header Rewriting">
		 <t>The MSA MAY rewrite local parts and/or domains in the SMTP envelope
		   and, optionally, in address fields of the header, according to local
		   policy.  For example, a site may prefer to rewrite 'JRU' as
		   'J.Random.User' in order to hide login names and/or to rewrite
		   'squeaky.sales.example.net' as 'zyx.example.net' to hide machine
		   names and make it easier to move users.</t>
		<t>However, only addresses, local-parts, or domains that match specific
		   local MSA configuration settings should be altered.  It would be very
		   dangerous for the MSA to apply data-independent rewriting rules, such
		   as always deleting the first element of a domain name.  So, for
		   example, a rule that strips the leftmost element of the domain, if
		   the complete domain matches '*.foo.example.net', would be
		   acceptable.</t>

		<t>The MSA MUST NOT rewrite a forward-pointing (destination)
		   address in a way that violates the constraints
		   of <xref target="SMTP-MTA"/> on modifications of
		   local-parts.  Changes to addressing and encoding, carried out
		   in conjunction with the action
		   of <xref target="CharEncode"/>, do not violate this
		   principle if the MSA has sufficient information available
		   to successfully and accurately apply the substitution.</t>
	  </section>
	  </section>
	  
	  <section title="Security Considerations">
		 <t>Separation of submission and relay of messages allows a site to
   implement different policies for the two types of services, including
   requiring the use of additional security mechanisms for one or both.  It
   can do this in a way that is simpler, both technically and
   administratively.  This increases the likelihood that policies will
   be applied correctly.</t>

         <t> Separation also can aid in tracking and preventing unsolicited bulk
   email.</t>

         <t> For example, a site could configure its mail servers such that the
   MSA requires authentication before accepting a message, and the MTA
   rejects all RCPT commands for non-local users.  This can be an
   important element in a site's total email security policy.</t>

         <t> If a site fails to require any form of authorization for message
   submissions (see <xref target="AuthorizedSubmission" /> for discussion), it is allowing open use
   of its resources and name; unsolicited bulk email can be injected
   using its facilities.</t>

         <t> <xref target="MessageSubmission" /> includes further discussion of issues with some
   authentication methods.</t>

         <t> <xref target="LogErrors" /> includes a cautionary note that unlimited logging can
   enable certain forms of denial-of-service attacks.</t>

   </section>

   <section title="IANA Considerations" anchor="IANAConsid">
	  <t> The entries in Table 1 have been
		 corrected (reference for NO-SOLICITING) and extended (ATRN,
		 DELIVERBY, CONPERM, and CONNEG).  The "SMTP Service 
		Extensions" registry has been updated to reflect the changed and new
		entries.  Entries in the registry that do not appear in the table above
		are correct and should not be altered.</t>
	 <t>The entry in the "SMTP Service Extensions" registry for RFC
		4409 has been updated to reference this document.  The
		original reference for Submit (RFC 2476), which should have
		been corrected earlier, has also been updated to point to this
		document.</t>
	 <t>The entry in the "Service Name and Transport Protocol Port
		Number Registry" for port 587 has been updated to point to
		this document.</t>

   </section>

   <section title="Acknowledgments">
	  <t> The preparation and development of the current version of
		 this specification was stimulated by discussions in the IETF
		 YAM and EAI Working Groups.  Dave Crocker, Subramanian
		 Moonesamy, Barry Leiba, John Levine, and others provided
		 text that appeared in this document or versions leading up to
		 it.</t>
	  
	  <t>Nathaniel Borenstein and Barry Leiba were instrumental in the
		 development of RFC 4409, the update to RFC 2476.</t>

	  <t>The original memo (RFC 2476) was developed, in part, based on comments
		   and discussions that took place on and off the IETF-Submit mailing
		   list.  The help of those who took the time to review that document
		   and make suggestions is appreciated, especially that of Dave Crocker,
		   Ned Freed, Keith Moore, John Myers, and Chris Newman.</t>
	  <t>Special thanks to Harald Alvestrand, who got this effort
		 started.</t>
   </section>

   </middle>

   <back>
<?rfc rfcedstyle="no" ?>
	  
<references title="Normative References">

   <reference anchor="KEYWORDS">

<front>
<title abbrev='RFC Key Words'>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='Scott Bradner'>
<organization>Harvard University</organization>
<address>
<postal>
<street>1350 Mass. Ave.</street>
<street>Cambridge</street>
<street>MA 02138</street></postal>
<phone>- +1 617 495 3864</phone>
<email>sob@harvard.edu</email></address></author>
<date year='1997' month='March' />
<area>General</area>
<keyword>keyword</keyword>
<abstract>
<t>
   In many standards track documents several words are used to signify
   the requirements in the specification.  These words are often
   capitalized.  This document defines these words as they should be
   interpreted in IETF documents.  Authors who follow these guidelines
   should incorporate this phrase near the beginning of their document:

<list>
<t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in
      RFC 2119.
</t></list></t>
<t>
   Note that the force of these words is modified by the requirement
   level of the document in which they are used.
</t></abstract></front>

<seriesInfo name='BCP' value='14' />
<seriesInfo name='RFC' value='2119' />
<format type='TXT' octets='4723' target='http://www.rfc-editor.org/rfc/rfc2119.txt' />
<format type='HTML' octets='17491' target='http://xml.resource.org/public/rfc/html/rfc2119.html' />
<format type='XML' octets='5777' target='http://xml.resource.org/public/rfc/xml/rfc2119.xml' />
</reference>


   <reference anchor="SMTP-MTA">

<front>
<title>Simple Mail Transfer Protocol</title>
<author initials='J.' surname='Klensin' fullname='J. Klensin'>
<organization /></author>
<date year='2008' month='October' />
<abstract>
<t>This document is a specification of the basic protocol for Internet electronic mail transport.  It consolidates, updates, and clarifies several previous documents, making all or parts of most of them obsolete.  It covers the SMTP extension mechanisms and best practices for the contemporary Internet, but does not provide details about particular extensions.  Although SMTP was designed as a mail transport and delivery protocol, this specification also contains information that is important to its use as a "mail submission" protocol for "split-UA" (User Agent) mail reading systems and mobile environments. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='5321' />
<format type='TXT' octets='225929' target='http://www.rfc-editor.org/rfc/rfc5321.txt' />
</reference>
		


   <reference anchor="SMTP-AUTH"> 

<front>
<title>SMTP Service Extension for Authentication</title>
<author initials='R.' surname='Siemborski' fullname='R. Siemborski'>
<organization /></author>
<author initials='A.' surname='Melnikov' fullname='A. Melnikov'>
<organization /></author>
<date year='2007' month='July' />
<abstract>
<t>This document defines a Simple Mail Transport Protocol (SMTP) extension whereby an SMTP client may indicate an authentication mechanism to the server, perform an authentication protocol exchange, and optionally negotiate a security layer for subsequent protocol interactions during this session. This extension includes a profile of the Simple Authentication and Security Layer (SASL) for SMTP.&lt;/t>&lt;t> This document obsoletes RFC 2554. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='4954' />
<format type='TXT' octets='43493' target='http://www.rfc-editor.org/rfc/rfc4954.txt' />
</reference>

    
  </references>  <!-- End of Normative References -->
	 

  <references title="Informative References">

		&rfc3865;
		&rfc2645;
		&rfc2852;
		&rfc4141;
		&rfc4880;
		&rfc5751;




   <reference anchor="MESSAGE-FORMAT">

<front>
<title>Internet Message Format</title>
<author initials='P.' surname='Resnick' fullname='Peter W. 
Resnick' role='editor'>
<organization>Qualcomm Incorporated</organization>
<address>
<postal>
<street>5775 Morehouse Drive</street>
<city>San Diego</city>
<region>CA</region>
<code>92121-1714</code>
<country>US</country></postal>
<phone>+1 858 651 4478</phone>
<email>presnick@qualcomm.com</email>
<uri>http://www.qualcomm.com/~presnick/</uri></address></author>
<date year='2008' month='October' />
<abstract>
<t>This document specifies the Internet 
Message Format (IMF), a syntax for text messages
			that are sent between computer users, within 
the framework of "electronic mail"
			messages. This specification is a revision of 
Request For Comments (RFC) 2822, which
			itself superseded Request For Comments (RFC) 
822, "Standard for the Format of ARPA
			Internet Text Messages", updating it to 
reflect current practice and incorporating
			incremental changes that were specified in 
other RFCs.</t></abstract></front>

<seriesInfo name='RFC' value='5322' />
<format type='TXT' octets='122322' target='http://www.rfc-editor.org/rfc/rfc5322.txt' />
<format type='HTML' octets='213342' target='http://xml.resource.org/public/rfc/html/rfc5322.html' />
<format type='XML' octets='174183' target='http://xml.resource.org/public/rfc/xml/rfc5322.xml' />
</reference>
		

  <reference anchor="DKIM" >

<front>
<title>DomainKeys Identified Mail (DKIM) Signatures</title>
<author initials='D.' surname='Crocker' fullname='D. Crocker'>
<organization /></author>
<author initials='T.' surname='Hansen' fullname='T. Hansen'>
<organization /></author>
<author initials='M.' surname='Kucherawy' fullname='M. Kucherawy'>
<organization /></author>
<date year='2011' month='September' />
<abstract>
<t>DomainKeys Identified Mail (DKIM) permits a person, role, or organization that owns the signing domain to claim some responsibility for a message by associating the domain with the message. This can be an author's organization, an operational relay, or one of their agents. DKIM separates the question of the identity of the Signer of the message from the purported author of the message. Assertion of responsibility is validated through a cryptographic signature and by querying the Signer's domain directly to retrieve the appropriate public key. Message transit from author to recipient is through relays that typically make no substantive change to the message content and thus preserve the DKIM signature.&lt;/t>&lt;t> This memo obsoletes RFC 4871 and RFC 5672. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='6376' />
<format type='TXT' octets='176999' target='http://www.rfc-editor.org/rfc/rfc6376.txt' />
</reference>

		
   <reference anchor="REPLY-521">

<front>
<title>SMTP 521 Reply Code</title>
<author initials='A.' surname='Durand' fullname='Alain Durand'>
<organization>Institut de Mathematiques Appliquees de Grenoble (IMAG)</organization>
<address>
<postal>
<street>BP 53 38041 Grenoble</street>
<street>CEDEX 9</street>
<region />
<code />
<country>FR</country></postal>
<phone>+33 76 635703</phone>
<facsimile>+33 76 446675</facsimile>
<email>Alain.Durand@imag.fr</email></address></author>
<author initials='F.' surname='Dupont' fullname='Francis Dupont'>
<organization>Institut National de Recherche en Informatique et en Automatique</organization>
<address>
<postal>
<street>B.P. 105 / 78153 Le Chesnay</street>
<street>CEDEX</street>
<region />
<code />
<country>FR</country></postal>
<phone>+33 1 39635213</phone>
<facsimile>+33 1 39635330</facsimile>
<email>Francis.Dupont@inria.fr</email></address></author>
<date year='1995' month='September' />
<abstract>
<t>This memo defines a new Simple Mail Transfer Protocol (SMTP)reply code, 521, which one may use to indicate that an Internet host does not accept incoming mail.</t></abstract></front>

<seriesInfo name='RFC' value='1846' />
<format type='TXT' octets='6558' target='http://www.rfc-editor.org/rfc/rfc1846.txt' />
</reference>

<reference anchor='RFC6152'>

<front>
<title>SMTP Service Extension for 8-bit MIME Transport</title>
<author initials='J.' surname='Klensin' fullname='J. Klensin'>
<organization /></author>
<author initials='N.' surname='Freed' fullname='N. Freed'>
<organization /></author>
<author initials='M.' surname='Rose' fullname='M. Rose'>
<organization /></author>
<author initials='D.' surname='Crocker' fullname='D. Crocker'>
<organization /></author>
<date year='2011' month='March' />
<abstract>
<t>This memo defines an extension to the SMTP service whereby an SMTP content body consisting of text containing octets outside of the US-ASCII octet range (hex 00-7F) may be relayed using SMTP. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='STD' value='71' />
<seriesInfo name='RFC' value='6152' />
<format type='TXT' octets='13034' target='http://www.rfc-editor.org/rfc/rfc6152.txt' />
</reference>




   <reference anchor="CHECKPOINT">

<front>
<title abbrev='SMTP Checkpoint/Restart'>SMTP Service Extension for Checkpoint/Restart</title>
<author initials='D.' surname='Crocker' fullname='Dave Crocker'>
<organization>Brandenburg Consulting</organization>
<address>
<postal>
<street>675 Spruce Dr.</street>
<city>Sunnyvale</city>
<region>CA</region>
<code>94086</code>
<country>US</country></postal>
<phone>+1 408 246 8253</phone>
<facsimile>+1 408 249 6205</facsimile>
<email>dcrocker@mordor.stanford.edu</email></address></author>
<author initials='N.' surname='Freed' fullname='Ned Freed'>
<organization>Innosoft International, Inc.</organization>
<address>
<postal>
<street>1050 East Garvey Avenue South</street>
<city>West Covina</city>
<region>CA</region>
<code>91790</code>
<country>US</country></postal>
<phone>+1 818 919 3600</phone>
<facsimile>+1 818 919 3614</facsimile>
<email>ned@innosoft.com</email></address></author>
<date year='1995' month='September' />
<abstract>
<t>This memo defines an extension to the SMTP service whereby an interrupted SMTP transaction can be restarted at a later time without having to repeat all of the commands and message content sent prior to the interruption.</t></abstract></front>

<seriesInfo name='RFC' value='1845' />
<format type='TXT' octets='15399' target='http://www.rfc-editor.org/rfc/rfc1845.txt' />
</reference>


   <reference anchor="CHUNKING">

<front>
<title>SMTP Service Extensions for Transmission of Large and Binary MIME Messages</title>
<author initials='G.' surname='Vaudreuil' fullname='G. Vaudreuil'>
<organization /></author>
<date year='2000' month='December' />
<abstract>
<t>This memo defines two extensions to the SMTP (Simple Mail Transfer Protocol) service. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3030' />
<format type='TXT' octets='23405' target='http://www.rfc-editor.org/rfc/rfc3030.txt' />
</reference>


   <reference anchor="CODES-EXTENSION">

<front>
<title abbrev='SMTP Enhanced Error Codes'>SMTP Service Extension for Returning Enhanced Error Codes</title>
<author initials='N.' surname='Freed' fullname='Ned Freed'>
<organization>Innosoft International, Inc.</organization>
<address>
<postal>
<street>1050 East Garvey Avenue South</street>
<street>West Covina</street>
<street>CA 91790</street>
<country>USA</country></postal>
<phone>+1 818 919 3600           fax: +1 818 919 3614</phone>
<email>ned@innosoft.com</email></address></author>
<date year='1996' month='October' />
<area>Applications</area>
<keyword>SMTP</keyword>
<keyword>point-to-point protocol</keyword>
<keyword>simple mail transfer protocol</keyword></front>

<seriesInfo name='RFC' value='2034' />
<format type='TXT' octets='10460' target='http://www.rfc-editor.org/rfc/rfc2034.txt' />
<format type='HTML' octets='23516' target='http://xml.resource.org/public/rfc/html/rfc2034.html' />
<format type='XML' octets='10864' target='http://xml.resource.org/public/rfc/xml/rfc2034.xml' />
</reference>


   <reference anchor="DSN">
<front>
<title>Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)</title>
<author initials='K.' surname='Moore' fullname='K. Moore'>
<organization /></author>
<date year='2003' month='January' />
<abstract>
<t>This memo defines an extension to the Simple Mail Transfer Protocol (SMTP) service, which allows an SMTP client to specify (a) that Delivery Status Notifications (DSNs) should be generated under certain conditions, (b) whether such notifications should return the contents of the message, and (c) additional information, to be returned with a DSN, that allows the sender to identify both the recipient(s) for which the DSN was issued, and the transaction in which the original message was sent. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3461' />
<format type='TXT' octets='76076' target='http://www.rfc-editor.org/rfc/rfc3461.txt' />
</reference>


   <reference anchor="ETRN">


<front>
<title>SMTP Service Extension for Remote Message Queue Starting</title>
<author initials='J.' surname='De Winter' fullname='Jack De Winter'>
<organization>Wildbear Consulting, Inc.</organization>
<address>
<postal>
<street>17 Brock Street</street>
<city>Kitchener</city>
<region>Ontario</region>
<code>N2M 1X2</code>
<country>CA</country></postal>
<phone>+1 519 576 3873</phone>
<email>jack@wildbear.on.ca</email></address></author>
<date year='1996' month='August' />
<abstract>
<t>This memo defines an extension to the SMTP service whereby an SMTP client and server may interact to give the server an opportunity to start the processing of its queues for messages to go to a given host.  This extension is meant to be used in startup conditions as well as for mail nodes that have transient connections to their service providers.</t></abstract></front>

<seriesInfo name='RFC' value='1985' />
<format type='TXT' octets='14815' target='http://www.rfc-editor.org/rfc/rfc1985.txt' />
</reference>


   <reference anchor="IMAP4">

<front>
<title>INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1</title>
<author initials='M.' surname='Crispin' fullname='M. Crispin'>
<organization /></author>
<date year='2003' month='March' />
<abstract>
<t>The Internet Message Access Protocol, Version 4rev1 (IMAP4rev1) allows a client to access and manipulate electronic mail messages on a server.  IMAP4rev1 permits manipulation of mailboxes (remote message folders) in a way that is functionally equivalent to local folders.  IMAP4rev1 also provides the capability for an offline client to resynchronize with the server.  IMAP4rev1 includes operations for creating, deleting, and renaming mailboxes, checking for new messages, permanently removing messages, setting and clearing flags, RFC 2822 and RFC 2045 parsing, searching, and selective fetching of message attributes, texts, and portions thereof.  Messages in IMAP4rev1 are accessed by the use of numbers.  These numbers are either message sequence numbers or unique identifiers.  IMAP4rev1 supports a single server.  A mechanism for accessing configuration information to support multiple IMAP4rev1 servers is discussed in RFC 2244.  IMAP4rev1 does not specify a means of posting mail; this function is handled by a mail transfer protocol such as RFC 2821. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3501' />
<format type='TXT' octets='227640' target='http://www.rfc-editor.org/rfc/rfc3501.txt' />
</reference>


   <reference anchor="IPSEC">
<front>
<title>Security Architecture for the Internet Protocol</title>
<author initials='S.' surname='Kent' fullname='S. Kent'>
<organization /></author>
<author initials='K.' surname='Seo' fullname='K. Seo'>
<organization /></author>
<date year='2005' month='December' />
<abstract>
<t>This document describes an updated version of the "Security Architecture for IP", which is designed to provide security services for traffic at the IP layer.  This document obsoletes RFC 2401 (November 1998). [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='4301' />
<format type='TXT' octets='262123' target='http://www.rfc-editor.org/rfc/rfc4301.txt' />
</reference>


   <reference anchor="MSG-TRACK">
<front>
<title>SMTP Service Extension for Message Tracking</title>
<author initials='E.' surname='Allman' fullname='E. Allman'>
<organization /></author>
<author initials='T.' surname='Hansen' fullname='T. Hansen'>
<organization /></author>
<date year='2004' month='September' />
<abstract>
<t>This memo defines an extension to the SMTP service whereby a client may mark a message for future tracking. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3885' />
<format type='TXT' octets='17458' target='http://www.rfc-editor.org/rfc/rfc3885.txt' />
</reference>


   <reference anchor="PIPELINING">

<front>
<title>SMTP Service Extension for Command Pipelining</title>
<author initials='N.' surname='Freed' fullname='N. Freed'>
<organization /></author>
<date year='2000' month='September' />
<abstract>
<t>This memo defines an extension to the Simple Mail Transfer Protocol (SMTP) service whereby a server can indicate the extent of its ability to accept multiple commands in a single Transmission Control Protocol (TCP) send operation. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='STD' value='60' />
<seriesInfo name='RFC' value='2920' />
<format type='TXT' octets='17065' target='http://www.rfc-editor.org/rfc/rfc2920.txt' />
</reference>


   <reference anchor="POP3">

<front>
<title abbrev='POP3'>Post Office Protocol - Version 3</title>
<author initials='J.G.' surname='Myers' fullname='John G. Myers'>
<organization>Carnegie-Mellon University</organization>
<address>
<postal>
<street>5000 Forbes Ave</street>
<city>Pittsburgh</city>
<region>PA</region>
<code>15213</code>
<country>US</country></postal>
<email>jgm+@cmu.edu</email></address></author>
<author initials='M.T.' surname='Rose' fullname='Marshall T. Rose'>
<organization>Dover Beach Consulting, Inc.</organization>
<address>
<postal>
<street>420 Whisman Court</street>
<city>Mountain View</city>
<region>CA</region>
<code>94043-2186</code>
<country>US</country></postal>
<email>mrose@dbc.mtview.ca.us</email></address></author>
<date year='1996' month='May' /></front>

<seriesInfo name='STD' value='53' />
<seriesInfo name='RFC' value='1939' />
<format type='TXT' octets='47018' target='http://www.rfc-editor.org/rfc/rfc1939.txt' />
</reference>


   <reference anchor="SIZE">

<front>
<title abbrev='SMTP Size Declaration'>SMTP Service Extension for Message Size Declaration</title>
<author initials='J.' surname='Klensin' fullname='John Klensin'>
<organization>MCI</organization>
<address>
<postal>
<street>2100 Reston Parkway</street>
<city>Reston</city>
<region>VA</region>
<code>22091</code>
<country>US</country></postal>
<phone>+1 703 715 7361</phone>
<facsimile>+1 703 715 7436</facsimile>
<email>klensin@mci.net</email></address></author>
<author initials='N.' surname='Freed' fullname='Ned Freed'>
<organization>Innosoft International, Inc.</organization>
<address>
<postal>
<street>1050 East Garvey Avenue South</street>
<city>West Covina</city>
<region>CA</region>
<code>91790</code>
<country>US</country></postal>
<phone>+1 818 919 3600</phone>
<facsimile>+1 818 919 3614</facsimile>
<email>ned@innosoft.com</email></address></author>
<author initials='K.' surname='Moore' fullname='Keith Moore'>
<organization>University of Tennessee, Computer Science Dept.</organization>
<address>
<postal>
<street>107 Ayres Hall</street>
<city>Knoxville</city>
<region>TN</region>
<code>37996-1301</code>
<country>US</country></postal>
<email>moore@cs.utk.edu</email></address></author>
<date year='1995' month='November' />
<abstract>
<t>This memo defines an extension to the SMTP service whereby an SMTP client and server may interact to give the server an opportunity to decline to accept a message (perhaps temporarily) based on the client's estimate of the message size.</t></abstract></front>

<seriesInfo name='STD' value='10' />
<seriesInfo name='RFC' value='1870' />
<format type='TXT' octets='18226' target='http://www.rfc-editor.org/rfc/rfc1870.txt' />
</reference>


	<reference anchor="SMTP-CODES">

<front>
<title>Enhanced Mail System Status Codes</title>
<author initials='G.' surname='Vaudreuil' fullname='G. Vaudreuil'>
<organization /></author>
<date year='2003' month='January' />
<abstract>
<t>This document defines a set of extended status codes for use within the mail system for delivery status reports, tracking, and improved diagnostics.  In combination with other information provided in the Delivery Status Notification (DSN) delivery report, these codes facilitate media and language independent rendering of message delivery status. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3463' />
<format type='TXT' octets='31832' target='http://www.rfc-editor.org/rfc/rfc3463.txt' />
</reference>


   <reference anchor="START-TLS">

<front>
<title>SMTP Service Extension for Secure SMTP over Transport Layer Security</title>
<author initials='P.' surname='Hoffman' fullname='P. Hoffman'>
<organization /></author>
<date year='2002' month='February' />
<abstract>
<t>This document describes an extension to the SMTP (Simple Mail Transfer Protocol) service that allows an SMTP server and client to use TLS (Transport Layer Security) to provide private, authenticated communication over the Internet.  This gives SMTP agents the ability to protect some or all of their communications from eavesdroppers and attackers. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3207' />
<format type='TXT' octets='18679' target='http://www.rfc-editor.org/rfc/rfc3207.txt' />
</reference>

</references>
<?rfc rfcedstyle="yes" ?>

	  <section title="Major Changes from RFC 4409"
			  anchor="SubstantiveChanges"> 
		 <t> The protocol specified by this document is not
			substantively different from that of RFC 4409.  However,
			the present specification contains several clarifications
			and updates to reflect changes and revisions to other
			documents subsequent to the publication of RFC 4409.  The
			following specific changes may be of interest to some
			readers.</t>
		 <t><list style="symbols">
			<t>Updated several references to reflect more recent
			   versions of the various specifications.  As part of
			   this, reclassified RFC 4954 to a normative reference
			   (SMTP AUTH is a MUST for RFC 4409 and this specification).</t>
			<t>Updated the text in <xref target="SMTP-Interaction"/>
			   to reflect the existence and partial population of the
			   registry and the included table (Table 1) 
			   to correct one entry and add others.  See
			   <xref target="IANAConsid"/> for more information.</t>
			<t>Added new text (<xref target="ShortTimeout"/>) to
			   clarify that Submission Servers should respond
			   quickly.</t>
			<t>Added text to make it explicit that character encoding
			   changes are permitted.</t>
			<t> Added text to make it clear that modifications to
			   signed messages may cause problems and that they
			   should be carefully considered.</t> 
	     </list></t>
	  </section>


     </back>
  </rfc>
     
