<?xml version="1.0" encoding="US-ASCII"?>
<?rfc rfcedstyle="yes"?>
<?rfc subcompact="no"?>
<?rfc toc="yes"?>
<?rfc sortrefs="no"?>
<?rfc symrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<rfc category="info" number="4834">
  <front>
    <title abbrev="L3VPN Mcast Reqs">Requirements for Multicast in Layer 3
    Provider-Provisioned Virtual Private Networks (PPVPNs)</title>

    <author fullname="Thomas Morin" initials="T" role="editor" surname="Morin">
      <organization abbrev="France Telecom R&amp;D">France Telecom
      R&amp;D</organization>

      <address>
        <postal>
          <street>2, avenue Pierre Marzin</street>

          <code>22307</code>

          <city>Lannion</city>

          <country>France</country>
        </postal>

        <email>thomas.morin@orange-ftgroup.com</email>
      </address>
    </author>

    <date month="April" year="2007" />

    <workgroup>l3vpn Working Group</workgroup>

    <abstract>
      <t>This document presents a set of functional requirements for network
      solutions that allow the deployment of IP multicast within Layer 3 (L3)
      Provider-Provisioned Virtual Private Networks (PPVPNs). It specifies
      requirements both from the end user and service provider standpoints. It
      is intended that potential solutions specifying the support of IP
      multicast within such VPNs will use these requirements as
      guidelines.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction" toc="default">
      <t>Virtual Private Network (VPN) services satisfying the requirements
      defined in <xref format="default" pageno="false"
      target="RFC4031"></xref> are now being offered by many service providers
      throughout the world. VPN services are popular because customers need
      not be aware of the VPN technologies deployed in the provider network.
      They scale well for the following reasons:<list style="symbols">
          <t>because P routers (Provider Routers) need not be aware of VPN
          service details</t>

          <t>because the addition of a new VPN member requires only limited
          configuration effort</t>
        </list></t>

      <t>There is also a growing need for support of IP multicast-based
      services. Efforts to provide efficient IP multicast routing protocols
      and multicast group management have been made in standardization bodies
      which has led, in particular, to the definition of Protocol Independent
      Multicast (PIM) and Internet Group Management Protocol (IGMP).</t>

      <t>However, multicast traffic is not natively supported within existing
      L3 PPVPN solutions. Deploying multicast over an L3VPN today, with only
      currently standardized solutions, requires designing customized
      solutions which will be inherently limited in terms of scalability,
      operational efficiency, and bandwidth usage.</t>

      <t>This document complements the generic <xref format="default"
      pageno="false" target="RFC4031">L3VPN requirements </xref> document, by
      specifying additional requirements specific to the deployment within
      PPVPNs of services based on IP multicast. It clarifies the needs of both
      VPN clients and providers and formulates the problems that should be
      addressed by technical solutions with the key objective being to remain
      solution agnostic. There is no intent in this document to specify either
      solution-specific details or application-specific requirements. Also,
      this document does NOT aim at expressing multicast-related requirements
      that are not specific to L3 PPVPNs.</t>

      <t>It is expected that solutions that specify procedures and protocol
      extensions for multicast in L3 PPVPNs SHOULD satisfy these
      requirements.</t>
    </section>

    <?rfc needLines="10"?>

    <section title="Conventions Used in This Document" toc="default">
      <section anchor="terminology" title="Terminology" toc="default">
        <t>Although the reader is assumed to be familiar with the terminology
        defined in <xref format="default" pageno="false"
        target="RFC4031"></xref>, <xref format="default" pageno="false"
        target="RFC4364"></xref>, <xref format="default" pageno="false"
        target="RFC4601"></xref>, and <xref format="default" pageno="false"
        target="RFC4607"></xref>, the following glossary of terms may be
        worthwhile.</t>

        <t>We also propose here generic terms for concepts that naturally
        appear when multicast in VPNs is discussed.</t>

        <t><list style="hanging">
            <t hangText="ASM:"><vspace blankLines="0" />Any Source Multicast.
            One of the two multicast service models, in which a terminal
            subscribes to a multicast group to receive data sent to the group
            by any source.</t>

            <t
            hangText="Multicast-enabled VPN, multicast VPN, or             mVPN:"><vspace
            blankLines="0" />A VPN that supports IP multicast capabilities,
            i.e., for which some PE devices (if not all) are multicast-enabled
            and whose core architecture supports multicast VPN routing and
            forwarding.</t>

            <t hangText="PPVPN:"><vspace blankLines="0" />Provider-Provisioned
            Virtual Private Network.</t>

            <t hangText="PE, CE:"><vspace blankLines="0" />"Provider Edge",
            "Customer Edge" (as defined in <xref format="default"
            pageno="false" target="RFC4026"></xref>). As suggested in <xref
            format="default" pageno="false" target="RFC4026"></xref>, we will
            use these notations to refer to the equipments/routers/devices
            themselves. Thus, "PE" will refer to the router on the provider's
            edge, which faces the "CE", the router on the customer's edge.</t>

            <t hangText="VRF or VR:"><vspace blankLines="0" />By these terms,
            we refer to the entity defined in a PE dedicated to a specific VPN
            instance. "VRF" refers to "VPN Routing and Forwarding table" as
            defined in <xref format="default" pageno="false"
            target="RFC4364"></xref>, and "VR" to "Virtual Router" as defined
            in <xref target="VRs"></xref> terminology.</t>

            <t hangText="MDTunnel:"><vspace blankLines="0" />Multicast
            Distribution Tunnel. The means by which the customer's multicast
            traffic will be transported across the SP network. This is meant
            in a generic way: such tunnels can be either point-to-point or
            point-to-multipoint. Although this definition may seem to assume
            that distribution tunnels are unidirectional, the wording also
            encompasses bidirectional tunnels.</t>

            <t hangText="S:"><vspace blankLines="0" />Denotes a multicast
            source.</t>

            <t hangText="G:"><vspace blankLines="0" />Denotes a multicast
            group.</t>

            <t hangText="Multicast channel:"><vspace blankLines="0" />In the
            multicast SSM model <xref format="default" pageno="false"
            target="RFC4607"></xref>, a "multicast channel" designates traffic
            from a specific source S to a multicast group G. Also denominated
            as "(S,G)".</t>

            <t hangText="SP:"><vspace blankLines="0" />Service provider.</t>

            <t hangText="SSM:"><vspace blankLines="0" />Source Specific
            Multicast. One of the two multicast service models, where a
            terminal subscribes to a multicast group to receive data sent to
            the group by a specific source.</t>

            <t hangText="RP:"><vspace blankLines="0" />Rendezvous Point (<xref
            format="default" pageno="false" target="RFC4601"> Protocol
            Independent Multicast - Sparse Mode (PIM-SM)</xref>).</t>

            <t hangText="P2MP, MP2MP:"><vspace blankLines="0" /> Designate
            "Point-to-Multipoint" and "Multipoint-to-Multipoint" replication
            trees.</t>

            <t hangText="L3VPN, VPN:"><vspace blankLines="0" />Throughout this
            document, "L3VPN" or even just "VPN" will refer to
            "Provider-Provisioned Layer 3 Virtual Private Network" (PP
            L3VPNs), and will be preferred for readability.</t>
          </list>Please refer to <xref format="default" pageno="false"
        target="RFC4026"></xref> for details about terminology specifically
        relevant to VPN aspects, and to <xref format="default" pageno="false"
        target="RFC2432"></xref> for multicast performance or quality of
        service (QoS)-related terms.</t>
      </section>

      <section title="Conventions" toc="default">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <xref format="default"
        pageno="false" target="RFC2119"></xref>.</t>
      </section>
    </section>

    <?rfc needLines="10"?>

    <section title="Problem Statement" toc="default">
      <section anchor="motivations" title="Motivations" toc="default">
        <t>More and more L3VPN customers use IP multicast services within
        their private infrastructures. Naturally, they want to extend these
        multicast services to remote sites that are connected via a VPN.</t>

        <t>For instance, the customer could be a national TV channel with
        several geographical locations that wants to broadcast a TV program
        from a central point to several regional locations within its VPN.</t>

        <t>A solution to support multicast traffic could consist of
        point-to-point tunnels across the provider network and requires the
        PEs (Provider Edge routers) to replicate traffic. This would obviously
        be sub-optimal as it would place the replication burden on the PE and
        hence would have very poor scaling characteristics. It would also
        probably waste bandwidth and control plane resources in the provider's
        network.</t>

        <t>Thus, to provide multicast services for L3VPN networks in an
        efficient manner (that is, with a scalable impact on signaling and
        protocol state as well as bandwidth usage), in a large-scale
        environment, new mechanisms are required to enhance existing L3VPN
        solutions for proper support of multicast-based services.</t>
      </section>

      <section title="General Requirements" toc="default">
        <t>This document sets out requirements for L3 provider-provisioned VPN
        solutions designed to carry customers' multicast traffic. The main
        requirement is that a solution SHOULD first satisfy the requirements
        documented in <xref format="default" pageno="false"
        target="RFC4031"></xref>: as far as possible, a multicast service
        should have the same characteristics as the unicast equivalent,
        including the same simplicity (technology unaware), the same quality
        of service (if any), the same management (e.g., performance
        monitoring), etc.</t>

        <t>Moreover, it also has to be clear that a multicast VPN solution
        MUST interoperate seamlessly with current unicast VPN solutions. It
        would also make sense that multicast VPN solutions define themselves
        as extensions to existing L3 provider-provisioned VPN solutions (such
        as for instance, <xref format="default" pageno="false"
        target="RFC4364"></xref> or <xref format="none" pageno="false"
        target="VRs">[VRs]</xref>) and retain consistency with those, although
        this is not a core requirement.</t>

        <t>The requirements in this document are equally applicable to IPv4
        and IPv6, for both customer- and provider-related matters.</t>
      </section>

      <section anchor="scalvsoptim"
               title="Scaling vs. Optimizing Resource Utilization"
               toc="default">
        <t>When transporting multicast VPN traffic over a service provider
        network, there intrinsically is tension between scalability and
        resource optimization, since the latter is likely to require the
        maintenance of control plane states related to replication trees in
        the core network <xref format="default" pageno="false"
        target="RFC3353"></xref>.</t>

        <t>Consequently, any deployment will require a trade-off to be made.
        This document will express some requirements related to this
        trade-off.</t>
      </section>
    </section>

    <?rfc needLines="10"?>

    <section title="Use Cases" toc="default">
      <t>The goal of this section is to highlight how different applications
      and network contexts may have a different impact on how a multicast VPN
      solution is designed, deployed, and tuned. For this purpose, we describe
      some typical use case scenarios and express expectations in terms of
      deployment orders of magnitude.</t>

      <t>Most of the content of these sections originates from a survey done
      in summer 2005, among institutions and providers that expect to deploy
      such solutions. The full survey text and raw results (13 responses) were
      published separately, and we only present here the most relevant facts
      and expectations that the survey exposed.</t>

      <t>For scalability figures, we considered that it was relevant to
      highlight the highest expectations, those that are expected to have the
      greatest impact on solution design. For balance, we do also mention
      cases where such high expectations were expressed in only a few
      answers.</t>

      <section anchor="scenarios" title="Scenarios" toc="default">
        <t>We don't provide here an exhaustive set of scenarios that a
        multicast VPN solution is expected to support -- no solution should
        restrict the scope of multicast applications and deployments that can
        be done over a multicast VPN.</t>

        <t>Hence, we only give here a short list of scenarios that are
        expected to have a large impact on the design of a multicast VPN
        solution.</t>

          <?rfc needLines="8"?>

        <section title="Live Content Broadcast" toc="default">
          <t>Under this label, we group all applications that distribute
          content (audio, video, or other content) with the property that this
          content is expected to be consulted at once ("live") by the
          receiver. <?rfc needLines="3"?> Typical applications are broadcast
          TV, production studio connectivity, and distribution of market data
          feeds.</t>

          <t>The characteristics of such applications are the following:<list
              style="symbols">
              <t>one or few sources to many receivers</t>

              <t>sources are often in known locations; receivers are in less
              predictable locations (this latter point may depend on
              applications)</t>

              <t>in some cases, it is expected that the regularity of audience
              patterns may help improve how the bandwidth/state trade-off is
              handled</t>

              <t>the number of streams can be as high as hundreds, or even
              thousands, of streams</t>

              <t>bandwidth will depend on the application, but may vary
              between a few tens/hundreds of Kb/s (e.g., audio or low-quality
              video media) and tens of Mb/s (high-quality video), with some
              demanding professional applications requiring as much as
              hundreds of Mb/s.</t>

              <t>QoS requirements include, in many cases, a low multicast
              group join delay</t>

              <t>QoS of these applications is likely to be impacted by packet
              loss (some applications may be robust to low packet loss) and to
              have low robustness against jitter</t>

              <t>delay sensitivity will depend on the application: some
              applications are not so delay sensitive (e.g., broadcast TV),
              whereas others may require very low delay (professional studio
              applications)</t>

              <t>some of these applications may involve rapid changes in
              customer multicast memberships as seen by the PE, but this will
              depend on audience patterns and on the amount of provider
              equipments deployed close to VPN customers</t>
            </list></t>
        </section>

          <?rfc needLines="8"?>

        <section title="Symmetric Applications" toc="default">
          <t>Some use cases exposed by the survey can be grouped under this
          label, and include many-to-many applications such as conferencing
          and server cluster monitoring.</t>

          <?rfc needLines="4"?>

          <t>They are characterized by the relatively high number of streams
          that they can produce, which has a direct impact on scalability
          expectations.</t>

          <t>A sub-case of this scenario is the case of symmetric applications
          with small groups, when the number of receivers is low compared to
          the number of sites in the VPNs (e.g., video conferencing and
          e-learning applications).</t>

          <t>This latter case is expected to be an important input to solution
          design, since it may significantly impact how the bandwidth/state is
          managed.</t>

          <t>Optimizing bandwidth may require introducing dedicated states in
          the core network (typically as much as the number of groups) for the
          following reasons: <list style="symbols">
              <t>small groups, and low predictability of the location of
              participants ("sparse groups")</t>

              <t>possibly significantly high bandwidth (a few Mb/s per
              participant)</t>
            </list></t>

          <t>Lastly, some of these applications may involve real-time
          interactions and will be highly sensitive to packet loss, jitter,
          and delay.</t>
        </section>


        <section title="Data Distribution" toc="default">
          <t>Some applications that are expected to be deployed on multicast
          VPNs are non-real-time applications aimed at distributing data from
          few sources to many receivers.</t>

          <t>Such applications may be considered to have lower expectations
          than their counterparts proposed in this document, since they would
          not necessarily involve more data streams and are more likely to
          adapt to the available bandwidth and to be robust to packet loss,
          jitter, and delay.</t>

          <t>One important property is that such applications may involve
          higher bandwidths (hundreds of Mb/s).</t>
        </section>

          <?rfc needLines="8"?>

        <section title="Generic Multicast VPN Offer" toc="default">
          <t>This ISP scenario is a deployment scenario where IP-multicast
          connectivity is proposed for every VPN: if a customer requests a
          VPN, then this VPN will support IP multicast by default. In this
          case, the number of multicast VPNs equals the number of VPNs. This
          implies <?rfc needLines="5"?> a quite important scalability
          requirement (e.g., hundreds of PEs, hundreds of VPNs per PE, with a
          potential increase by one order of magnitude in the future).</t>

          <t>The per-mVPN traffic behavior is not predictable because how the
          service is used is completely up to the customer. This results in a
          traffic mix of the scenarios mentioned in Section <xref
          format="counter" pageno="false" target="scenarios"></xref>. QoS
          requirements are similar to typical unicast scenarios, with the need
          for different classes. Also, in such a context, a reasonably large
          range of protocols should be made available to the customer for use
          at the PE-CE level.</t>

          <t>Also, in such a scenario, customers may want to deploy multicast
          connectivity between two or more multicast VPNs as well as access to
          Internet Multicast.</t>
        </section>
      </section>

      <section anchor="scalability-figures"
               title="Scalability Orders of Magnitude" toc="default">
        <t>This section proposes orders of magnitude for different scalability
        metrics relevant for multicast VPN issues. It should be noted that the
        scalability figures proposed here relate to scalability expectations
        of future deployments of multicast VPN solutions, as the authors chose
        to not restrict the scope to only currently known deployments.</t>

        <section title="Number of VPNs with Multicast Enabled" toc="default">
          <t>From the survey results, we see a broad range of expectations.
          There are extreme answers: from 5 VPNs (1 answer) to 10k VPNs (1
          answer), but more typical answers are split between the low range of
          tens of VPNs (7 answers) and the higher range of hundreds or
          thousands of VPNs (2 + 4 answers).</t>

          <t>A solution SHOULD support a number of multicast VPNs ranging from
          one to several thousands.</t>

          <t>A solution SHOULD NOT limit the proportion of multicast VPNs
          among all (unicast) VPNs.</t>
        </section>

        <section title="Number of Multicast VPNs per PE" toc="default">
          <t>The majority of survey answers express a number of multicast VPNs
          per PE of around tens (8 responses between 5 and 50); a significant
          number of them (4) expect deployments with hundreds or thousands (1
          response) of multicast VPNs per PE.</t>

          <?rfc needLines="4"?>

          <t>A solution SHOULD support a number of multicast VPNs per PE of
          several hundreds, and may have to scale up to thousands of VPNs per
          PE.</t>
        </section>

        <?rfc needLines="5"?>

        <section title="Number of CEs per Multicast VPN per PE" toc="default">
          <t>Survey responses span from 1 to 2000 CEs per multicast VPN per
          PE. Most typical responses are between tens (6 answers) and hundreds
          (4 responses).</t>

          <t>A solution SHOULD support a number of CEs per multicast VPN per
          PE going up to several hundreds (and may target the support of
          thousands of CEs).</t>
        </section>

        <section title="PEs per Multicast VPN" toc="default">
          <t>People who answered the survey typically expect deployments with
          the number of PEs per multicast VPN in the range of hundreds of PEs
          (6 responses) or tens of PEs (4 responses). Two responses were in
          the range of thousands (one mentioned a 10k figure).</t>

          <t>A multicast VPN solution SHOULD support several hundreds of PEs
          per multicast VPN, and MAY usefully scale up to thousands.</t>

          <section title="... with Sources" toc="default">
            <t>The number of PEs (per VPN) that would be connected to sources
            seems to be significantly lower than the number of PEs per VPN.
            This is obviously related to the fact that many respondents
            mentioned deployments related to content broadcast applications
            (one to many).</t>

            <t>Typical numbers are tens (6 responses) or hundreds (4
            responses) of source-connected PEs. One respondent expected a
            higher number of several thousands.</t>

            <t>A solution SHOULD support hundreds of source-connected PEs per
            VPN, and some deployment scenarios involving many-to-many
            applications may require supporting a number of source-connected
            PEs equal to the number of PEs (hundreds or thousands).</t>
          </section>

          <section title="... with Receivers" toc="default">
            <t>The survey showed that the number of PEs with receivers is
            expected to be of the same order of magnitude as the number of PEs
            in a multicast VPN. This is consistent with the intrinsic nature
            of most multicast applications, which have few source-only
            participants.</t>
          </section>
        </section>

        <section title="PEs with Multicast VRFs" toc="default">
          <t>A solution SHOULD scale up to thousands of PEs having multicast
          service enabled.</t>
        </section>

        <section title="Number of Streams Sourced" toc="default">
          <t>Survey responses led us to retain the following orders of
          magnitude for the number of streams that a solution SHOULD
          support:</t>

          <t><list style="hanging">
              <t hangText="per VPN:">hundreds or thousands of streams</t>

              <t hangText="per PE:">hundreds of streams</t>
            </list></t>
        </section>
      </section>
    </section>

    <?rfc needLines="10"?>

    <section title="Requirements for Supporting IP Multicast within L3 PPVPNs"
             toc="default">
      <t>Again, the aim of this document is not to specify solutions but to
      give requirements for supporting IP multicast within L3 PPVPNs.</t>

      <t>In order to list these requirements, we have taken the standpoint of
      two different important entities: the end user (the customer using the
      VPN) and the service provider.</t>

      <t>In the rest of the document, by "a solution" or "a multicast VPN
      solution", we mean a solution that allows multicast in an L3
      provider-provisioned VPN, and which addresses the requirements listed in
      this document.</t>

      <section title="End User/Customer Standpoint" toc="default">
        <section anchor="service-definition" title="Service Definition"
                 toc="default">
          <t>As for unicast, the multicast service MUST be provider
          provisioned and SHALL NOT require customer devices (CEs) to support
          any extra features compared to those required for multicast in a
          non-VPN context. Enabling a VPN for multicast support SHOULD be
          possible with no impact (or very limited impact) on existing
          multicast protocols possibly already deployed on the CE devices.</t>
        </section>

        <section anchor="pece-reqs"
                 title="CE-PE Multicast Routing and Group Management Protocols"
                 toc="default">
          <t>Consequently to <xref format="default" pageno="false"
          target="service-definition"></xref>, multicast-related protocol
          exchanges between a CE and its directly connected PE SHOULD happen
          via existing multicast protocols.</t>

          <?rfc needLines="5"?>

          <t>Such protocols include: <xref format="default" pageno="false"
          target="RFC4601">PIM-SM</xref>, <xref format="default"
          pageno="false" target="BIDIR-PIM">bidirectional-PIM</xref>, <xref
          format="default" pageno="false" target="RFC3973">PIM - Dense Mode
          (DM)</xref>, and <xref format="default" pageno="false"
          target="RFC3376">IGMPv3</xref> (this version implicitly supports
          hosts that only implement <xref format="default" pageno="false"
          target="RFC1112">IGMPv1</xref> or <xref format="default"
          pageno="false" target="RFC2236">IGMPv2</xref>).</t>

          <t>Among those protocols, the support of PIM-SM (which includes the
          SSM model) and either IGMPv3 (for IPv4 solutions) and/or <xref
          format="default" pageno="false" target="RFC3810">Multicast Listener
          Discovery Version 2 (MLDv2)</xref> (for IPv6 solutions) is REQUIRED.
          Bidir-PIM support at the PE-CE interface is RECOMMENDED. And
          considering deployments, PIM-DM is considered OPTIONAL.</t>

          <t>When a multicast VPN solution is built on a VPN solution
          supporting IPv6 unicast, it MUST also support v6 variants of the
          above protocols, including MLDv2, and PIM-SM IPv6-specific
          procedures. For a multicast VPN solution built on a unicast VPN
          solution supporting only IPv4, it is RECOMMENDED that the design
          favors the definition of procedures and encodings that will provide
          an easy adaptation to IPv6.</t>
        </section>

        <section title="Quality of Service (QoS)" toc="default">
           

          <t>Firstly, general considerations regarding QoS in L3VPNs expressed
          in Section 5.5 of <xref format="default" pageno="false"
          target="RFC4031" /> are also relevant to this section.</t>

           

          <t>QoS is measured in terms of delay, jitter, packet loss, and
          availability. These metrics are already defined for the current
          unicast PPVPN services and are included in Service Level Agreements
          (SLAs). In some cases, the agreed SLA may be different between
          unicast and multicast, and that will require differentiation
          mechanisms in order to monitor both SLAs.</t>

           

          <t>The level of availability for the multicast service SHOULD be on
          par with what exists for unicast traffic. For instance, comparable
          traffic protection mechanisms SHOULD be available for customer
          multicast traffic when it is carried over the service provider's
          network.</t>

           

          <t>A multicast VPN solution SHALL allow a service provider to define
          at least the same level of quality of service as exists for unicast,
          and as exists for multicast in a non-VPN context. From this
          perspective, the deployment of multicast-based services within an
          L3VPN environment SHALL benefit from <xref format="default"
          pageno="false" target="RFC2475">Diffserv</xref> mechanisms that
          include multicast traffic identification, classification, and
          marking capabilities, as well as multicast traffic policing,
          scheduling, and conditioning capabilities. Such capabilities MUST
          therefore be supported by any participating device in the
          establishment and the maintenance of the multicast distribution
          tunnel within the VPN.</t>

           

          <?rfc needLines="4"?>

           

          <t>As multicast is often used to deliver high-quality services such
          as TV broadcast, a multicast VPN solution MAY provide additional
          features to support high QoS such as bandwidth reservation and
          admission control.</t>

           e 

          <?rfc needLines="4"?>

           

          <t>Also, considering that multicast reception is receiver-triggered,
          group join delay (as defined in <xref format="default"
          pageno="false" target="RFC2432" />) is also considered one important
          QoS parameter. It is thus RECOMMENDED that a multicast VPN solution
          be designed appropriately in this regard.</t>

           

          <t>The group leave delay (as defined in <xref format="default"
          pageno="false" target="RFC2432" />) may also be important on the
          CE-PE link for some usage scenarios: in cases where the typical
          bandwidth of multicast streams is close to the bandwidth of a PE-CE
          link, it will be important to have the ability to stop the emission
          of a stream on the PE-CE link as soon as it stops being requested by
          the CE, to allow for fast switching between two different
          high-throughput multicast streams. This implies that it SHOULD be
          possible to tune the multicast routing or group management protocols
          (e.g., IGMP/MLD or PIM) used on the PE-CE adjacency to reduce the
          group leave delay to the minimum.</t>

           

          <t>Lastly, a multicast VPN solution SHOULD as much as possible
          ensure that client multicast traffic packets are neither lost nor
          duplicated, even when changes occur in the way a client multicast
          data stream is carried over the provider network. Packet loss issues
          also have to be considered when a new source starts to send traffic
          to a group: any receiver interested in receiving such traffic SHOULD
          be serviced accordingly.</t>

           
        </section>

        <section title="Operations and Management" toc="default">
          <t>The requirements and definitions for operations and management
          (OAM) of L3VPNs that are defined in <xref format="default"
          pageno="false" target="RFC4176"></xref> equally apply to multicast,
          and are not extensively repeated in this document. This sub-section
          mentions the most important guidelines and details points of
          particular relevance in the context of multicast in L3VPNs.</t>

          <t>A multicast VPN solution SHOULD allow a multicast VPN customer to
          manage the capabilities and characteristics of their multicast VPN
          services.</t>

          <t>A multicast VPN solution MUST support SLA monitoring
          capabilities, which SHOULD rely upon techniques similar to those
          used for the unicast service for the same monitoring purposes.
          Multicast SLA-related metrics SHOULD be available through means
          similar to the ones already used for unicast-related monitoring,
          such as Simple Network Management Protocol (SNMP) <xref
          format="default" pageno="false" target="RFC3411"></xref> or IPFIX
          <xref format="default" pageno="false"
          target="IPFIX-PROT"></xref>.</t>

          <t>Multicast-specific characteristics that may be monitored include:
          multicast statistics per stream, end-to-end delay, and group
          join/leave delay (time to start/stop receiving a multicast group's
          traffic across the VPN, as defined in <xref format="default"
          pageno="false" target="RFC2432"></xref>, Section 3).</t>

          <t>The monitoring of multicast-specific parameters and statistics
          MUST include multicast traffic statistics:
          total/incoming/outgoing/dropped traffic, by period of time. It MAY
          include IP Performance Metrics related information (IPPM, <xref
          target="RFC2330"></xref>) that is relevant to the multicast traffic
          usage: such information includes the one-way packet delay, the
          inter-packet delay variation, etc. See <xref
          target="MULTIMETRICS"></xref>.</t>

          <t>A generic discussion of SLAs is provided in <xref
          format="default" pageno="false" target="RFC3809"></xref>.</t>

          <t>Apart from statistics on multicast traffic, customers of a
          multicast VPN will need information concerning the status of their
          multicast resource usage (multicast routing states and bandwidth).
          Indeed, as mentioned in <xref format="default" pageno="false"
          target="isp-control-mechanisms"></xref>, for scalability purposes, a
          service provider may limit the number (and/or throughput) of
          multicast streams that are received/sent to/from a client site. In
          such a case, a multicast VPN solution SHOULD allow customers to find
          out their current resource usage (multicast routing states and
          throughput), and to receive some kind of feedback if their usage
          exceeds the agreed bounds. Whether this issue will be better handled
          at the protocol level at the PE-CE interface or at the Service
          Management Level interface <xref format="default" pageno="false"
          target="RFC4176"></xref> is left for further discussion.</t>

          <t>It is RECOMMENDED that any OAM mechanism designed to trigger
          alarms in relation to performance or resource usage metrics
          integrate the ability to limit the rate at which such alarms are
          generated (e.g., some form of a hysteresis mechanism based on
          low/high thresholds defined for the metrics).</t>
        </section>

        <section anchor="customer-sec" title="Security Requirements"
                 toc="default">
          <t>Security is a key point for a customer who uses a VPN service.
          For instance, the <xref format="default" pageno="false"
          target="RFC4364"></xref> model offers some guarantees concerning the
          security level of data transmission within the VPN.</t>

          <t>A multicast VPN solution MUST provide an architecture with the
          same level of security for both unicast and multicast traffic.</t>

          <t>Moreover, the activation of multicast features SHOULD be
          possible:<list style="symbols">
              <t>per VRF / per VR</t>

              <t>per CE interface (when multiple CEs of a VPN are connected to
              a common VRF/VR)</t>

              <t>per multicast group and/or per channel</t>

              <t>with a distinction between multicast reception and
              emission</t>
            </list></t>

          <?rfc needLines="3"?>

          <t>A multicast VPN solution may choose to make the
          optimality/scalability trade-off stated in <xref format="default"
          pageno="false" target="scalvsoptim"></xref> by sometimes
          distributing multicast traffic of a client group to a larger set of
          PE routers that may include PEs that are not part of the VPN. From a
          security standpoint, this may be a problem for some VPN customers;
          thus, a multicast VPN solution using such a scheme MAY offer ways to
          avoid this for specific customers (and/or specific customer
          multicast streams).</t>
        </section>

        <section anchor="extranet" title="Extranet" toc="default">
          <t>In current PP L3VPN models, a customer site may be set up to be
          part of multiple VPNs, and this should still be possible when a VPN
          is multicast-enabled. In practice, it means that a VRF or VR can be
          part of more than one VPN.</t>

          <t>A multicast VPN solution MUST support such deployments.</t>

          <t>For instance, it must be possible to configure a VRF so that an
          enterprise site participating in a BGP/MPLS multicast-enabled VPN
          and connected to that VRF can receive a multicast stream from (or
          originate a multicast stream towards) another VPN that would be
          associated to that VRF.</t>

          <t>This means that a multicast VPN solution MUST offer means for a
          VRF to be configured so that multicast connectivity can be set up
          for a chosen set of extranet VPNs. More precisely, it MUST be
          possible to configure a VRF so that:<list style="symbols">
              <t>receivers behind attached CEs can receive multicast traffic
              sourced in the configured set of extranet VPNs</t>

              <t>sources behind attached CEs can reach multicast traffic
              receivers located in the configured set of extranet VPNs</t>

              <t>multicast reception and emission can be independently enabled
              for each of the extranet VPNs</t>
            </list></t>

          <t>Moreover, a solution MUST allow service providers to control an
          extranet's multicast connectivity independently from the extranet's
          unicast connectivity. More specifically:<list style="symbols">
              <t>enabling unicast connectivity to another VPN MUST be possible
              without activating multicast connectivity with that VPN</t>

              <?rfc needLines="6"?>

              <t>enabling multicast connectivity with another VPN SHOULD NOT
              require more than the strict minimal unicast routing. Sending
              multicast to a VPN SHOULD NOT require having unicast routes to
              that VPN; receiving multicast from a VPN SHOULD be possible with
              nothing more than unicast routes to the relevant multicast
              sources of that VPN</t>

              <?rfc needLines="4"?>

              <t>when unicast routes from another VPN are imported into a
              VR/VRF, for multicast Reverse Path Forwarding (RPF) resolution,
              this SHOULD be possible without making those routes available
              for unicast routing</t>
            </list></t>

          <t>Proper support for this feature SHOULD NOT require replicating
          multicast traffic on a PE-CE link, whether it is a physical or
          logical link.</t>
        </section>

        <section title="Internet Multicast" toc="default">
          <t>Connectivity with Internet Multicast is a particular case of the
          previous section, where sites attached to a VR/VRF would need to
          receive/send multicast traffic from/to the Internet.</t>

          <t>This should be considered OPTIONAL given the additional
          considerations, such as security, needed to fulfill the requirements
          for providing Internet Multicast.</t>
        </section>

        <section anchor="csc" title="Carrier's Carrier" toc="default">
          <t>Many L3 PPVPN solutions, such as <xref format="default"
          pageno="false" target="RFC4364"></xref> and <xref format="none"
          pageno="false" target="VRs">[VRs]</xref>, define the "Carrier's
          Carrier" model, where a "carrier's carrier" service provider
          supports one or more customer ISPs, or "sub-carriers". A multicast
          VPN solution SHOULD support the carrier's carrier model in a
          scalable and efficient manner.</t>

          <t>Ideally, the range of tunneling protocols available for the
          sub-carrier ISP should be the same as those available for the
          carrier's carrier ISP. This implies that the protocols that may be
          used at the PE-CE level SHOULD NOT be restricted to protocols
          required as per <xref format="default" pageno="false"
          target="pece-reqs"></xref> and SHOULD include some of the protocols
          listed in <xref format="default" pageno="false"
          target="tunneling"></xref>, such as for instance P2MP MPLS signaling
          protocols.</t>

          <t>In the context of MPLS-based L3VPN deployments, such as <xref
          format="default" pageno="false" target="RFC4364">BGP/MPLS VPNs
          </xref>, this means that MPLS label distribution SHOULD happen at
          the PE-CE level, giving the ability to the sub-carrier to use
          multipoint LSPs as a tunneling mechanism.</t>
        </section>

        <section title="Multi-Homing, Load Balancing, and Resiliency"
                 toc="default">
          <t>A multicast VPN solution SHOULD be compatible with current
          solutions that aim at improving the service robustness for customers
          such as multi-homing, CE-PE link load balancing, and fail-over. A
          multicast VPN solution SHOULD also be able to offer those same
          features for multicast traffic.</t>

          <t>Any solution SHOULD support redundant topology of CE-PE links. It
          SHOULD minimize multicast traffic disruption and fail-over.</t>
        </section>

        <section title="RP Engineering" toc="default">
          <t>When PIM-SM (or bidir-PIM) is used in ASM mode on the VPN
          customer side, the RP function (or RP-address in the case of
          bidir-PIM) has to be associated to a node running PIM, and
          configured on this node.</t>

          <section title="RP Outsourcing" toc="default">
            <t>In the case of PIM-SM in ASM mode, engineering of the RP
            function requires the deployment of specific protocols and
            associated configurations. A service provider may offer to manage
            customers' multicast protocol operation on their behalf. This
            implies that it is necessary to consider cases where a customer's
            RPs are outsourced (e.g., on PEs). Consequently, a VPN solution
            MAY support the hosting of the RP function in a VR or VRF.</t>
          </section>

          <section title="RP Availability" toc="default">
            <t>Availability of the RP function (or address) is required for
            proper operation of PIM-SM (ASM mode) and bidir-PIM. Loss of
            connectivity to the RP from a receiver or source will impact the
            multicast service. For this reason, different mechanisms exist,
            such as <xref format="default" pageno="false"
            target="PIM-BSR">BSR</xref> or anycast-RP (<xref format="default"
            pageno="false" target="RFC3446