<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<!--  USED v2 -->

<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="6"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc rfcedstyle="yes"?>

<rfc number="7138" ipr="trust200902" category="std" submissionType="IETF" consensus="yes">


<front>
	<title abbrev="OSPF-TE Extensions for OTN Support">
Traffic Engineering Extensions to OSPF 
for&nbsp;GMPLS&nbsp;Control&nbsp;of&nbsp;Evolving&nbsp;G.709&nbsp;Optical&nbsp;Transport&nbsp;Networks
    </title>

    <author initials="D." surname="Ceccarelli" fullname="Daniele Ceccarelli" role="editor">
      <organization>Ericsson</organization>
      <address>
	<postal>
          <street>Via E.Melen 77</street>
	  <code></code> 
	  <city>Genova - Erzelli</city> 
	  <country>Italy</country>
 	</postal>
	<email>daniele.ceccarelli@ericsson.com</email>
      </address>
    </author>

    <author initials="F." surname="Zhang" fullname="Fatai Zhang">
      <organization>Huawei Technologies</organization>
      <address>
	<postal>
          <street>F3-5-B R&amp;D Center, Huawei Base</street>
          <street>Bantian, Longgang District</street>
	  <code>518129</code> 
	  <city>Shenzhen</city> 
	  <country>P.R. China</country>
 	</postal>
        <phone>+86-755-28972912</phone>
	<email>zhangfatai@huawei.com</email>
      </address>
    </author>

    <author initials="S." surname="Belotti" fullname="Sergio Belotti">
      <organization>Alcatel-Lucent</organization>
      <address>
	<postal>
          <street>Via Trento, 30</street>
	  <code></code> 
	  <city>Vimercate</city> 
	  <country>Italy</country>
 	</postal>
	<email>sergio.belotti@alcatel-lucent.com</email>
      </address>
    </author>	


	 <author initials="R." surname="Rao" fullname="Rajan Rao">
      <organization>Infinera Corporation</organization>
      <address>
	<postal>
          <street>140, Caspian CT.</street>
	  <code></code> 
	  <city>Sunnyvale, CA-94089</city> 
	  <country>USA</country>
 	</postal>
	<email>rrao@infinera.com</email>
      </address>
    </author>	

	  <author initials="J.E" surname="Drake" fullname="John E. Drake">
      <organization>Juniper</organization>
      <address>
	<email>jdrake@juniper.net</email>
      </address>
    </author>

    <date month="March" year="2014" />
    <area>Routing</area>
    <workgroup>CCAMP Working Group</workgroup>
    <keyword>OSPF</keyword>
    <keyword>GMPLS</keyword>
    <keyword>G709</keyword>
    <keyword>OTN</keyword>



    <abstract>
	<t>
   This document describes Open Shortest Path First - Traffic
   Engineering (OSPF-TE) routing protocol extensions to support
   GMPLS control of Optical Transport Networks
   (OTNs) specified in ITU-T Recommendation G.709 as published in 2012.
   It extends mechanisms defined in RFC 4203. 
    </t>
    </abstract>
</front>


<middle>
<section title="Introduction" anchor="sec-intro">
 <t>
     G.709 ("Interfaces for the Optical Transport Network (OTN)") <xref target="G.709-2012"/> includes new fixed and flexible 
	 ODU (Optical channel Data Unit) containers, includes
	 two types of tributary slots (i.e., 1.25 Gbps and 2.5 Gbps), and supports 
	 various multiplexing relationships 
    (e.g., ODUj multiplexed into ODUk (j&lt;k)), two different tributary 
    slots for ODUk (K=1, 2, 3), and the ODUflex service type. 


In order to advertise this information in  
    routing, this document provides encoding specific to OTN technology 
	 for use in GMPLS OSPF-TE as defined in <xref target="RFC4203"/>.
    </t><t>
	For a short overview of OTN evolution and implications of OTN requirements
	on GMPLS routing, please refer to <xref target="RFC7062"/>. The information model and 
	an evaluation against the current solution are provided in <xref target="RFC7096"/>.
    The reader is supposed to be familiar with both of these documents.
    </t><t>
    Routing information for Optical Channel (OCh) layer (i.e., 
    wavelength) is beyond the scope of this document.  Please refer to
    <xref target="RFC6163"/> and <xref target="RFC6566"/> for further information.
	</t>
<section title="Terminology" anchor="sec-definitions">
	<t>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
	"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
	document are to be interpreted as described in <xref target="RFC2119"/>.
	</t>
	</section>
</section>

   
<!--2--><section title="OSPF-TE Extensions" anchor="sec-ext">	   
	<t>
	In terms of GMPLS-based OTN networks, each Optical channel Transport
Unit-k (OTUk) can be viewed 
	as a component link, and each component link can carry one or more 
	types of ODUj (j&lt;k). 
	</t><t>
	Each TE-Link State Advertisement (LSA) can carry a top-level link TLV with several nested sub-TLVs to 
	describe different attributes of a TE-Link. Two top-level TLVs are 
	defined in <xref target="RFC3630"/>: (1) The Router Address TLV (referred to as the 
	Node TLV) and (2) the TE-Link TLV. One or more sub-TLVs can be nested 
	into the two top-level TLVs. The sub-TLV set for the two top-level 
	TLVs are also defined in <xref target="RFC3630"/> and <xref target="RFC4203"/>. 
	</t><t>
	As discussed in <xref target="RFC7062"/> and <xref target="RFC7096"/>, OSPF-TE must be extended  
	to be able to advertise the termination and Switching Capabilities 
	of each different ODUj and ODUk/OTUk (Optical Transport Unit) and the advertisement of related multiplexing capabilities.
   These capabilities are carried in the Switching Capability specific
information 
   field of the Interface Switching Capability Descriptor (ISCD) using formats
defined 
   in this document.  
   As discussed in <xref target="RFC7062"/>, the use of a technology-specific
   Switching Capability specific information field necessitates
   the definition of a new Switching Capability value and
   associated new Switching Capability.
	</t><t>
	In the following, we will use ODUj to indicate a service type that is
multiplexed into a higher-order (HO) ODU, ODUk to indicate a higher-order ODU
including an ODUj, and ODUk/OTUk to indicate the layer mapped into the OTUk.

	Moreover, ODUj(S) and ODUk(S) are used to indicate the ODUj and ODUk supporting Switching Capability only,
	and the ODUj->ODUk format is used to indicate the ODUj-into-ODUk multiplexing capability.
	</t><t>
	This notation can be repeated as needed depending on the number of multiplexing levels. In the following, 
	the term "multiplexing tree" is used to identify a multiplexing hierarchy where the root is 
	always a server ODUk/OTUk and any other supported multiplexed container is represented with increasing
	granularity until reaching the leaf of the tree. The tree can be structured with more than one branch 
	if the server ODUk/OTUk supports more than one hierarchy.
	</t><t>
	For example, if a multiplexing hierarchy like the following one is considered:
<figure><artwork>
<![CDATA[          ODU2 ODU0    ODUflex ODU0
             \ /            \ /
              |              |
            ODU3           ODU2
               \            /
                \          /
                 \        /
                  \      /
                    ODU4]]>
</artwork></figure>
	the ODU4 is the root of the muxing tree; ODU3 and ODU2 are containers directly multiplexed into 
	the server; and ODU2 and ODU0 are the leaves of the ODU3 branch, while ODUflex and ODU0 are the leaves of the ODU2 one.
	This means that it is possible to have the following multiplexing capabilities:
<figure><artwork>
<![CDATA[	ODU2->ODU3->ODU4
	ODU0->ODU3->ODU4
	ODUflex->ODU2->ODU4
	ODU0->ODU2->ODU4]]>
</artwork>
</figure>
	</t>
</section>

<!--3--><section title="TE-Link Representation" anchor="sec-telink">	
	  <t>     
	  G.709 ODUk/OTUk links are represented as TE-Links in GMPLS Traffic 
      Engineering Topology for supporting ODUj layer switching. These 
      TE-Links can be modeled in multiple ways. 
      </t><t>
      OTUk physical link(s) can be modeled as a TE-Link(s). 
	 Figure 1 below provides an illustration of one-hop OTUk TE-Links.
	<figure title="OTUk TE-Links" anchor="fig-oduklink">
<artwork>
<![CDATA[
        +-------+               +-------+               +-------+
        |  OTN  |               |  OTN  |               |  OTN  |
        |Switch |<- OTUk Link ->|Switch |<- OTUk Link ->|Switch |
        |   A   |               |   B   |               |   C   |
        +-------+               +-------+               +-------+

                |<-- TE-Link -->|       |<-- TE-Link -->|]]>
</artwork>
</figure>              

      	It is possible to create TE-Links that span more than one hop by creating
	forwarding adjacencies (FAs) between non-adjacent nodes (see Figure 2). 
	As in the one-hop case, multiple-hop TE-Links advertise the ODU Switching
	Capability. 

 	<figure title="Multiple-Hop TE-Link" anchor="fig-multiplelink">
<artwork><![CDATA[     	
        +-------+               +-------+               +-------+
        |  OTN  |               |  OTN  |               |  OTN  |
        |Switch |<- OTUk Link ->|Switch |<- OTUk Link ->|Switch |
        |   A   |               |   B   |               |   C   |
        +-------+               +-------+               +-------+
                              ODUk Switched

                |<------------- ODUk Link ------------->|
                |<-------------- TE-Link--------------->|]]>
</artwork>
</figure> 
	</t>
</section>


<!--4-->

<section title="ISCD Format Extensions" anchor="sec-iscd">
<t>
      The ISCD describes the Switching
      Capability of an interface and is defined in <xref target="RFC4203"/>. This document defines a new
      Switching Capability value for OTN <xref target="G.709-2012"/> as follows:


<figure>
<artwork><![CDATA[ 
Value          Type
-----          ----
110            OTN-TDM capable]]>
</artwork>
</figure>
      When supporting the extensions defined 
in this document, for both fixed and flexible ODUs, 
 the Switching Capability and Encoding values MUST be used as follows:
<list style="symbols">

<t>Switching Capability = OTN-TDM</t>
<t>Encoding Type = G.709 ODUk (Digital Path) as defined in <xref target="RFC4328"/></t>
</list>
 </t>
<t>
      The same Switching Type and encoding values must be used for both fixed and flexible ODUs.
      When Switching Capability and Encoding fields are set to values as stated
      above, the Interface Switching Capability Descriptor MUST be 
      interpreted as defined in  <xref target="RFC4203"/>.
</t>
	<t>
     The MAX LSP Bandwidth field is used according to <xref target="RFC4203"/>, i.e., 0 &lt;= MAX LSP Bandwidth &lt;= ODUk/OTUk,
	 and intermediate values are those on the branch of the OTN switching hierarchy supported by the interface.
	 For example, in the OTU4 link it could be possible to have ODU4 as MAX LSP Bandwidth for some priorities, 
	 ODU3 for others, ODU2 for some others, etc.
	 The bandwidth unit is in bytes/second and the encoding MUST be in
	 IEEE floating point format. 
	 The discrete values for various ODUs are shown in the table below (please note that there are
	 1000 bits in a kilobit according to normal practices in telecommunications).

<figure><artwork><![CDATA[ 
+-------------------+-----------------------------+-----------------+
|     ODU Type      |    ODU nominal bit rate     |Value in Byte/Sec|
|                   |                             |(floating p. val)|
+-------------------+-----------------------------+-----------------+
|       ODU0        |      1,244,160 kbps         |    0x4D1450C0   |
|       ODU1        | 239/238 x 2,488,320 kbps    |    0x4D94F048   |
|       ODU2        | 239/237 x 9,953,280 kbps    |    0x4E959129   |
|       ODU3        | 239/236 x 39,813,120 kbps   |    0x4F963367   |
|       ODU4        | 239/227 x 99,532,800 kbps   |    0x504331E3   |
|       ODU2e       | 239/237 x 10,312,500 kbps   |    0x4E9AF70A   |
|                   |                             |                 |
|  ODUflex for CBR  |    239/238 x client signal  |     MAX LSP     |
|  Client signals   |           bit rate          |    Bandwidth    |
|                   |                             |                 |
| ODUflex for GFP-F |                             |     MAX LSP     |
|  Mapped client    |      Configured bit rate    |    Bandwidth    |
|       signal      |                             |                 |
|                   |                             |                 |
|      ODUflex      |      Configured bit rate    |     MAX LSP     | 
|     resizable     |                             |    Bandwidth    |              
+-------------------+-----------------------------+-----------------+]]>
</artwork>
</figure>
	A single ISCD MAY be used for the advertisement of unbundled or bundled links 
	supporting homogeneous multiplexing hierarchies and the same TS (tributary slot) granularity.
	A different ISCD MUST be used for each different muxing hierarchy 
	(muxing tree in the following examples) and different TS granularity supported within the TE-Link.
	</t><t>
    When a received LSA includes a sub-TLV not formatted accordingly to the precise 
    specifications in this document, the problem SHOULD be logged
    and the wrongly formatted sub-TLV MUST NOT be used for
    path computation.
	</t>

<!--4.1--><section title="Switching Capability Specific Information " anchor="sec-scsi">
	<t>
	The technology-specific part of the OTN-TDM ISCD may include a variable number
	of sub-TLVs called Bandwidth sub-TLVs. 
	Each sub-TLV is encoded with the sub-TLV header as defined in <xref
target="RFC3630"/>, Section 2.3.2. 

	The muxing hierarchy tree MUST be encoded as an order-independent list.
	Two types of Bandwidth sub-TLVs are defined (TBA by IANA). Note that
type values are defined in this document and not in <xref target="RFC3630"/>.
	<list style="symbols">
	<t>Type 1 - Unreserved Bandwidth for fixed containers</t>
	<t>Type 2 - Unreserved/MAX LSP Bandwidth for flexible containers</t>
	</list>
 </t>
<t>
	The Switching Capability specific information (SCSI) MUST include one Type 1 sub-TLV for each
	fixed container and one Type 2 sub-TLV
	for each variable container. Each container type is identified by a Signal Type.  Signal Type
    values are defined in <xref target="RFC7139"/>.
 </t>
	<t>   With respect to ODUflex, three different Signal Types are allowed:
<list style="symbols">
<t>20 - ODUflex(CBR) (i.e., 1.25*N Gbps)</t>
<t>21 - ODUflex(GFP-F), resizable (i.e., 1.25*N Gbps)</t>
<t>22 - ODUflex(GFP-F), non-resizable (i.e., 1.25*N Gbps)</t>
</list>

where CBR stands for Constant Bit Rate, and GFP-F stands for Generic Framing
Procedure - Framed.
</t>
<t>
   Each MUST always be
   advertised in separate Type 2 sub-TLVs as each uses different adaptation
   functions <xref target="G.805"/>.  In the case that both GFP-F resizable and non-resizable
   (i.e., 21 and 22) are supported, only Signal Type 21 SHALL be
   advertised as this type also implies support for Type 22 adaptation.
</t>

	
<!--4.1.1--><section title="Switching Capability Specific Information for Fixed Containers" anchor="sec-scsi11">
	<t>
	The format of the Bandwidth sub-TLV for fixed containers is depicted in the following figure:
	<figure title="Bandwidth Sub-TLV -- Type 1" anchor="fig-block1">
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
|        Type = 1 (Unres-fix)   |             Length            |      
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Signal Type  | Num of stages |T|S| TSG | Res |    Priority   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Stage#1    |      ...      |   Stage#N     |    Padding    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Unreserved ODUj at Prio 0    |             .....             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Unreserved ODUj at Prio 7    |     Unreserved Padding        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>		 
The values of the fields shown in <xref target="fig-block1"/> are explained in
<xref target="sec-scsi33"/>.
</t>
</section>


<!--4.1.2--><section title="Switching Capability Specific Information for Variable Containers" anchor="sec-scsi22">
	<t>
	The format of the Bandwidth sub-TLV for variable containers is depicted in the following figure:
<figure title="Bandwidth Sub-TLV -- Type 2" anchor="fig-block2">
<artwork><![CDATA[		 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
|    Type = 2 (Unres/MAX-var)   |             Length            |      
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Signal Type  | Num of stages |T|S| TSG | Res |    Priority   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Stage#1    |      ...      |   Stage#N     |    Padding    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                Unreserved Bandwidth at priority 0             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              ...                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                Unreserved Bandwidth at priority 7             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+	
|                 MAX LSP Bandwidth at priority 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              ...                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP Bandwidth at priority 7               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+	   ]]>
</artwork>
</figure>
The values of the fields shown in figure 4 are explained in <xref target="sec-scsi33"/>.
</t>
</section>

<!--4.1.3--><section title="Switching Capability Specific Information -- Field Values and Explanation" anchor="sec-scsi33">
<t>
The fields in the Bandwidth sub-TLV MUST be filled as follows:
 <list style="symbols">
	  <t>Signal Type (8 bits):  Indicates the ODU type being
advertised. Values are defined in <xref target="RFC7139"/>.</t>
			
      <t>Num of stages (8 bits): This field indicates the number of multiplexing stages
	  used to transport the indicated Signal Type. It MUST be set to the number of stages represented in the sub-TLV.</t>
	  
	 <t>Flags (8 bits): <list style="symbols">
           <t>T Flag (bit 17): Indicates whether the advertised bandwidth can be terminated. When
		    the Signal Type can be terminated T MUST be set, while when the Signal Type cannot be terminated 
			T MUST be cleared.</t>
 
          <t>S Flag (bit 18): Indicates whether the advertised bandwidth can be switched. 
		  When the Signal Type can be switched, S MUST be set; when the Signal Type cannot be switched, S MUST be cleared.</t>

		   <t> The value 0 in both the T bit and S bit MUST NOT be used.</t>
		   </list>
	  </t>
	  <t>TSG (3 bits): Tributary Slot Granularity. Used for the advertisement of the 
		  supported tributary slot granularity. The following values
MUST be used:<list style="symbols">
		          <t>0 - Ignored</t>
		 	  <t>1 - 1.25 Gbps / 2.5 Gbps</t>
		  	  <t>2 - 2.5 Gbps only</t>
			  <t>3 - 1.25 Gbps only</t>
			  <t>4-7 - Reserved</t>
		  </list>
		A value of 1 MUST be used on interfaces that are configured to
support the fallback procedures defined in <xref target="G.798"/>.  A value of 2 MUST be
used on interfaces

		that only support 2.5 Gbps tributary slots, such as <xref target="RFC4328"/> interfaces. A value of 3
		MUST be used on interfaces that are configured to only support
1.25 Gbps tributary slots. 
		A value of 0 MUST be used for non-multiplexed Signal Types (i.e., a non-OTN client).
		  </t>
	  <t>Res (3 bits): Reserved bits. MUST be set to 0 and ignored on receipt.</t>  
	  <t>Priority (8 bits): A bitmap used to indicate which priorities are being advertised. The bitmap 
	  is in ascending order, with the leftmost bit representing priority level 0 (i.e., the highest) 
	  and the rightmost bit representing priority level 7 (i.e., the lowest).  A bit MUST be set
	  (1) corresponding to each priority represented in the sub-TLV and
MUST NOT be set (0) when the
	  corresponding priority is not represented.  At least one priority level MUST be advertised 
	  that, unless overridden by local policy, SHALL be at priority level 0.</t>

	  <t>Stage (8 bits): Each Stage field indicates a Signal Type in the multiplexing hierarchy
	  used to transport the signal indicated in the Signal Type field. The number of Stage fields 
	  included in a sub-TLV MUST equal the value of the Num of stages field.  The Stage fields MUST 
	  be ordered to match the data plane in ascending order (from the lowest order ODU to the highest 
	  order ODU). The values of the Stage field are the same as those defined for the Signal Type field. 
	  When the Num of stages field carries a 0, then the Stage and Padding fields MUST be omitted.


	  <list>
	  <t>Example: For the ODU1->ODU2->OD3 hierarchy, the Signal Type field is set to ODU1 and 
	  two Stage fields are present, the first indicating ODU2 and the second ODU3 (server layer). </t>
	  </list>
	  </t>
	  
	  <t>Padding (variable): The Padding field is used to ensure the 32-bit alignment of stage fields.
	  The length of the Padding field is always a multiple of 8 bits (1 byte).  Its length can be 
	  calculated, in bytes, as: 4 - ( "value of Num of stages field" % 4). The Padding field MUST
	  be set to a zero (0) value on transmission and MUST be ignored on receipt.</t>
	  
	  <t>Unreserved ODUj (16 bits): This field indicates the Unreserved Bandwidth at a
	  particular priority level.  This field MUST be set to the number of ODUs at the indicated the 
	  Signal Type for a particular priority level.  One field MUST be present for each bit set 
	  in the Priority field, and the fields are ordered to match the Priority field. Fields MUST NOT be
	  present for priority levels that are not indicated in the Priority field.</t>
	  
	 <t>Unreserved Padding (16 bits): The Padding field is used to ensure 
	 the 32-bit alignment of the Unreserved ODUj fields.  When present, the 
	 Unreserved Padding field is 16 bits (2 bytes) long.  When the number of 
	 priorities is odd, the Unreserved Padding field MUST be 
	 included. When the number of priorities is even, the Unreserved Padding 
	 MUST be omitted.</t>
	
	<t>Unreserved Bandwidth (32 bits): This field indicates the 
	Unreserved Bandwidth at a particular priority level.  This field MUST be set to the bandwidth,
	in bytes/second in IEEE floating point format, available at the indicated Signal 
	Type for a particular priority level.  One field MUST be present for each bit 
	set in the Priority field, and the fields are ordered to match the Priority field. 
	Fields MUST NOT be present for priority levels that are not indicated in 
	the Priority field.</t>
	
	  <t>Maximum LSP Bandwidth (32 bits): This field indicates the maximum bandwidth that can be 
	  allocated for a single LSP at a particular priority level. This field MUST be set to 
	  the maximum bandwidth,  in bytes/second in IEEE floating point format, available to a single LSP at
	  the indicated Signal Type for a particular priority level. One field MUST be present for 
	  each bit set in the Priority field, and the fields are ordered to match the Priority field. 
	  Fields MUST NOT be present for priority levels that are not indicated in the Priority field. 
	  The advertisement of the MAX LSP Bandwidth MUST take into account
	  HO OPUk bit rate tolerance and be calculated according to the following formula:
		<list>
		<t>Max LSP BW = (# available TSs) * (ODTUk.ts nominal bit rate) * (1-HO OPUk bit rate tolerance)</t>
		</list>
		</t>
     </list> 	

	 </t>
	 </section>
	</section>

</section>

<!--5--><section title="Examples" anchor="sec-exampl">	   
    <t>
	The examples in the following pages are not normative and are not 
    intended to imply or mandate any specific implementation. 
	</t>
		<!--5.1--><section title="MAX LSP Bandwidth Fields in the ISCD" anchor="sec-exampl1">	 
	<t>
	This example shows how the MAX LSP Bandwidth fields of the ISCD are filled 
	according to the evolving of the TE-Link bandwidth occupancy. In this example, an
	OTU4 link is considered, with supported priorities 0,2,4,7 and muxing hierarchy
	ODU1->ODU2->ODU3->ODU4.
	</t><t>
	At time T0, with the link completely free, the advertisement would be:


	
<figure title="MAX LSP Bandwidth Fields in the ISCD at T0" anchor="fig-examp111">
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| SwCap=OTN_TDM | Encoding = 12 |    Reserved (all zeros)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 0 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 1 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 2 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 3 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 4 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 5 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 6 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 7 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Switching Capability Specific Information         |
|                        (variable length)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
	At time T1, an ODU3 at priority 2 is set up, so for priority 0, the MAX LSP
	Bandwidth is still equal to the ODU4 bandwidth, while for priorities from 2
	to 7 (excluding the non-supported ones), the MAX LSP Bandwidth is equal
	to ODU3, as no more ODU4s are available and the next supported ODUj in the 
	hierarchy is ODU3. The advertisement is updated as follows:
<figure title="MAX LSP Bandwidth Fields in the ISCD  at T1" anchor="fig-examp112">
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| SwCap=OTN_TDM | Encoding = 12 |    Reserved (all zeros)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 0 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 1 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 2 = 40 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 3 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 4 = 40 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 5 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 6 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 7 = 40 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Switching Capability Specific Information         |
|                        (variable length)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
	At time T2, an ODU2 at priority 4 is set up. 
The first ODU3 has not been available since T1 as it was kept by the ODU3
LSP, while the
second is no longer available and just 3 ODU2s are left in it.
ODU2 is now the MAX LSP Bandwidth for priorities
higher than 4. The advertisement is updated as follows:
<figure title="MAX LSP Bandwidth Fields in the ISCD at T2" anchor="fig-examp113">
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| SwCap=OTN_TDM | Encoding = 12 |    Reserved (all zeros)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 0 = 100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 1 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 2 = 40 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 3 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 4 = 10 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 5 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 6 = 0               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             MAX LSP Bandwidth at priority 7 = 10 Gbps         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Switching Capability Specific Information         |
|                        (variable length)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>



</t>
		</section>
	<!--5.2--><section title="Example of T, S, and TS Granularity Utilization" anchor="sec-exampl2">	 
	<t>
	In this example, an interface with tributary slot type 1.25 Gbps and fallback 
	procedure enabled is considered (TS granularity=1). It supports
	the simple ODU1->ODU2->ODU3 hierarchy and priorities 0 and 3.
	Suppose that in this interface, the ODU3 Signal Type can be both switched or terminated, 
	the ODU2 can only be terminated, and the ODU1 can only be switched. Please note
	that since the ODU1 is not being advertised to support ODU0, the value
of its TSG field is "ignored" (TS granularity=0).
	For the advertisement of the capabilities of such an interface, a single ISCD 
	is used. Its format is as follows:
<figure title="T, S, and TS Granularity Utilization" anchor="fig-examp2">
<artwork><![CDATA[		 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU1  |  #stages= 2   |0|1|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU3  |       Padding (all zeros)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU1 at Prio 0      |     Unres ODU1 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |1|0|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  |        Padding (all zeros)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU2 at Prio 0      |     Unres ODU2 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 0   |1|1|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU3 at Prio 0      |     Unres ODU3 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ]]>
</artwork>
</figure>
</t>

<!--5.2.1--><section title="Example of Different TS Granularities" anchor="sec-exampl22">	 
	<t>
	In this example, two interfaces with homogeneous hierarchies but different 
	tributary slot types are considered. The first one supports an <xref target="RFC4328"/> interface
	(TS granularity=2) while the second one supports a G.709-2012 interface with fallback procedure
	disabled (TS granularity=3). Both support the ODU1->ODU2->ODU3 hierarchy and priorities 0 and 3.
	Suppose that in this interface, the ODU3 Signal Type can be both switched or terminated, 
	the ODU2 can only be terminated, and the ODU1 can only be switched. 
	For the advertisement of the capabilities of such interfaces, two different ISCDs
	are used. The format of their SCSIs is as follows:

<figure title="Utilization of Different TS Granularities -- ISCD 1" anchor="fig-examp211">
<preamble>SCSI of ISCD 1 -- TS granularity=2</preamble>
<artwork><![CDATA[		 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU1  |  #stages= 2   |0|1|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU3  |       Padding (all zeros)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU1 at Prio 0      |     Unres ODU1 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |1|0|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  |        Padding (all zeros)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU2 at Prio 0      |     Unres ODU2 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 0   |1|1|  2  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU3 at Prio 0      |     Unres ODU3 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
<figure title="Utilization of Different TS Granularities -- ISCD 2" anchor="fig-examp212">
<preamble>SCSI of ISCD 2 -- TS granularity=3</preamble>
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU1  |  #stages= 2   |0|1|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU3  |       Padding (all zeros)     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU1 at Prio 0      |     Unres ODU1 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |1|0|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  |        Padding (all zeros)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU2 at Prio 0      |     Unres ODU2 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 0   |1|1|  3  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Unres ODU3 at Prio 0      |     Unres ODU3 at Prio 3      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
</t>


<t>
Hierarchies with the same muxing tree but
with different exported TS granularity MUST be considered as non-homogenous hierarchies.
This is the case in which an H-LSP and the client LSP are terminated on the same egress node.
What can happen is that a loose Explicit Route Object (ERO) is used at the hop where the signaled
 LSP is nested into the Hierarchical-LSP (H-LSP) (penultimate hop of the LSP).
</t>


<t>
In the following figure, node C receives a loose ERO from A; the ERO
goes towards node E, and node C must choose between the ODU2 H-LSP on
if1 or the one on if2. 
In this case, the H-LSP on if1 exports a TS=1.25 Gbps, and the H-LSP on if2
exports a TS=2.5 Gbps; because the service LSP being signaled needs a 1.25
Gbps tributary slot, only the H-LSP on if1 can be used to reach node E.
For further details, please see Section 3.2 of <xref target="RFC7096"/>.
<figure title="Example of Service LSP and H-LSP Terminating on the Same Node" align="center" anchor="fig-examp21x">
<artwork><![CDATA[		 
                       ODU0-LSP
      ..........................................................+
      |                                                         |
      |                                     ODU2-H-LSP          |
      |                         +-------------------------------+
      |                         |                               |
   +--+--+      +-----+      +-----+ if1     +-----+         +-----+
   |     | OTU3 |     | OTU3 |     |---------|     |---------|     |
   |  A  +------+  B  +------+  C  | if2     |  D  |         |  E  |
   |     |      |     |      |     |---------|     |---------|     |
   +-----+      +-----+      +-----+         +-----+         +-----+

         ... Service LSP
         --- H-LSP]]>
</artwork>
</figure>
</t>
		</section>
		</section>
	
	<!--5.3--><section title="Example of ODUflex Advertisement" anchor="sec-examp3">	 
	<t>
	In this example, the advertisement of an ODUflex->ODU3 hierarchy is
shown. In the case of ODUflex 
	advertisement, the MAX LSP Bandwidth needs to be advertised, and in some cases, information
	about the Unreserved Bandwidth could also be useful. The amount of Unreserved Bandwidth does not
	give a clear indication of how many ODUflex LSPs can be set up either at the MAX LSP Bandwidth
	or at different rates, as it gives no information about the spatial allocation of the
	free TSs. 
	</t>


<t>
	An indication of the amount of Unreserved Bandwidth could be useful during the 
	path computation process, as shown in the following example. Suppose there are two 
	TE-Links (A and B) with MAX LSP Bandwidth equal to 10 Gbps each. In the
case where 50 Gbps of Unreserved Bandwidth 
	are available on Link A, 10 Gbps on Link B, and 3 ODUflex LSPs of 10
Gbps each have to be restored,
	for sure only one can be restored along Link B, and it is probable, but
not certain, that two of them
	can be restored along Link A.&nbsp; The T, S, and TSG fields are not
relevant to this example (filled with Xs).
	</t><t>
	In the case of ODUflex advertisement, the Type 2 Bandwidth sub-TLV is used.
<figure title="ODUflex Advertisement" align="center" anchor="fig-examp3">
<artwork><![CDATA[		 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
|    Type = 2 (Unres/MAX-var)   |           Length  = 72        |      
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|S. type=ODUflex|  #stages= 1   |X|X|X X X|0 0 0| Priority(8)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU3 |          Padding (all zeros)                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 0              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 1              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 2              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 3              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 4              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 5              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 6              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               Unreserved Bandwidth at priority 7              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 0              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 1              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 2              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 3              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 4              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 5              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 6              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 MAX LSP  Bandwidth at priority 7              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>	
	
	</t>
	</section>
	
	<!--5.4--><section title="Example of Single-Stage Muxing" anchor="sec-examp4">	 
	<t>
	    Suppose there is 1 OTU4 component link supporting single-stage muxing of ODU1, ODU2, ODU3, and ODUflex,
		the supported hierarchy can be summarized in a tree as in the
following figure. For the sake of simplicity,
		we also assume that only priorities 0 and 3 
are supported.  The T, S, and TSG fields are 
		not relevant to this example (filled with Xs).
<figure><artwork><![CDATA[
       ODU1 ODU2  ODU3 ODUflex 
          \   \    /   / 
           \   \  /   /      
            \   \/   /
               ODU4 	]]>
</artwork>
</figure>
The related SCSIs are as follows:
<figure title="Single-Stage Muxing" align="center" anchor="fig-examp4">
<artwork><![CDATA[		 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU4  |  #stages= 0   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU4 at Prio 0 =1     |    Unres ODU4 at Prio 3 =1    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU1  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU4  |            Padding (all zeros)                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU1 at Prio 0 =40    |    Unres ODU1 at Prio 3 =40   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU4  |            Padding (all zeros)                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =10    |    Unres ODU2 at Prio 3 =10   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU4  |            Padding (all zeros)                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU3 at Prio 0 =2     |    Unres ODU3 at Prio 3 =2    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type = 2 (Unres/MAX-var)   |           Length = 24         |      
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|S. type=ODUflex|  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |            Padding (all zeros)                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Unreserved Bandwidth at priority 0 =100 Gbps       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Unreserved Bandwidth at priority 3 =100 Gbps       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              MAX LSP Bandwidth at priority 0 =100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              MAX LSP Bandwidth at priority 3 =100 Gbps        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   ]]>
</artwork>
</figure>
	</t>
	</section>
	
	<!--5.5--><section title="Example of Multi-Stage Muxing -- Unbundled Link" anchor="sec-examp5">	 
	<t>
    Suppose there is 1 OTU4 component link with muxing capabilities as shown in the following figure:
<figure><artwork><![CDATA[
       ODU2 ODU0    ODUflex ODU0
          \ /            \ /
           |              |
         ODU3           ODU2
            \            /
             \          /		
              \        /		
               \      /			  
                 ODU4 	]]>
</artwork>
</figure>
Considering only supported priorities 0 and 3, the advertisement is composed by the following
Bandwidth sub-TLVs (T and S fields are not relevant to this example and filled with Xs):
<figure title="Multi-Stage Muxing -- Unbundled Link" align="center" anchor="fig-examp5">
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU4  |  #stages= 0   |X|X|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU4 at Prio 0 =1     |    Unres ODU4 at Prio 3 =1    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 1   |X|X|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |         Padding (all zeros)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU3 at Prio 0 =2     |    Unres ODU3 at Prio 3 =2    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |X|X|  1  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |         Padding (all zeros)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =10    |    Unres ODU2 at Prio 3 =10   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 2   |X|X|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =8     |    Unres ODU2 at Prio 3 =8    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU0  |  #stages= 2   |X|X|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU0 at Prio 0 =64    |    Unres ODU0 at Prio 3 =64   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU0  |  #stages= 2   |X|X|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU0 at Prio 0 =80    |    Unres ODU0 at Prio 3 =80   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type = 2 (Unres/MAX-var)   |           Length = 24         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|S.type=ODUflex |  #stages= 2   |X|X|  0  |0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Unreserved Bandwidth at priority 0 =100 Gbps       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Unreserved Bandwidth at priority 3 =100 Gbps       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            MAX LSP Bandwidth at priority 0 =10 Gbps           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            MAX LSP Bandwidth at priority 3 =10 Gbps           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
	</t>
	</section>

	<!--5.6--><section title="Example of Multi-Stage Muxing -- Bundled Links" anchor="sec-examp6">	 
		<t>
       In this example, 2 OTU4 component links with the same supported TS granularity and homogeneous
	   muxing hierarchies are considered. The following muxing capabilities trees are supported: 
<figure><artwork><![CDATA[
Component Link#1      Component Link#2     
   ODU2 ODU0             ODU2 ODU0            
      \ /                   \ /                    
       |                     |                  
      ODU3                  ODU3                 
       |                     |                  
      ODU4                  ODU4]]>
</artwork>
</figure>
Considering only supported priorities 0 and 3, the advertisement is as follows
(the T, S, and TSG
fields are not relevant to this example and filled with Xs):
<figure title="Multi-Stage Muxing -- Bundled Links" align="center" anchor="fig-examp6">
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU4  |  #stages= 0   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU4 at Prio 0 =2     |    Unres ODU4 at Prio 3 =2    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |          Padding (all zeros)                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU3 at Prio 0 =4     |    Unres ODU3 at Prio 3 =4    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =16    |    Unres ODU2 at Prio 3 =16   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU0  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU0 at Prio 0 =128   |    Unres ODU0 at Prio 3 =128  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
	</t>
	</section>
		
	
	
<!--5.7--><section title="Example of Component Links with Non-Homogeneous Hierarchies" anchor="sec-examp7">	 
		<t>
       In this example, 2 OTU4 component links with the same supported TS granularity and non-homogeneous
	   muxing hierarchies are considered. The following muxing capabilities trees are supported: 
<figure><artwork><![CDATA[
Component Link#1      Component Link#2     
   ODU2 ODU0             ODU1 ODU0            
      \ /                   \ /                    
       |                     |                  
      ODU3                  ODU2                 
       |                     |                  
      ODU4                  ODU4]]>
</artwork>
</figure>
Considering only supported priorities 0 and 3, the advertisement uses two different ISCDs, one for 
each hierarchy (the T, S, and TSG fields are not relevant to this 
example and filled with Xs). In the following figure, the SCSI of each ISCD is shown:
<figure title="Multi-Stage Muxing -- Non-Homogeneous Hierarchies -- ISCD 1" anchor="fig-examp71">
<preamble>SCSI of ISCD 1 -- Component Link#1</preamble>
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU4  |  #stages= 0   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU4 at Prio 0 =1     |    Unres ODU4 at Prio 3 =1    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU3  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |           Padding (all zeros)                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU3 at Prio 0 =2     |    Unres ODU3 at Prio 3 =2    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =8     |    Unres ODU2 at Prio 3 =8    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU0  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU3  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU0 at Prio 0 =64    |    Unres ODU0 at Prio 3 =64   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
<figure title="Multi-Stage Muxing -- Non-Homogeneous Hierarchies -- ISCD 2" anchor="fig-examp72">
<preamble>SCSI of ISCD 2 -- Component Link#2</preamble>
<artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 8          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU4  |  #stages= 0   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU4 at Prio 0 =1     |    Unres ODU4 at Prio 3 =1    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU2  |  #stages= 1   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Stage#1=ODU4 |           Padding (all zeros)                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU2 at Prio 0 =10    |    Unres ODU2 at Prio 3 =10   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU1  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU1 at Prio 0 =40    |    Unres ODU1 at Prio 3 =40   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Type = 1 (Unres-fix)   |           Length = 12         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Sig type=ODU0  |  #stages= 2   |X|X|X X X|0 0 0|1|0|0|1|0|0|0|0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Stage#1=ODU2  | Stage#2=ODU4  |    Padding (all zeros)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Unres ODU0 at Prio 0 =80    |    Unres ODU0 at Prio 3 =80   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+]]>
</artwork>
</figure>
	</t>
	</section>	
		
</section>

<!--6--><section title="OSPFv2 Scalability" anchor="sec-scal">	   
	<t>
	This document does not introduce OSPF scalability issues with respect to existing
	GMPLS encoding and does not require any modification to flooding frequency.
	Moreover, the design of the encoding has been carried out taking into account
	bandwidth optimization, in particular:
	<list style="symbols">
	<t>Only unreserved and MAX LSP Bandwidth related to supported priorities are advertised.</t>
	<t>For fixed containers, only the number of available containers 
	is advertised instead of the available bandwidth in order to use only 16 bits per container instead of 32 (as
	per former GMPLS encoding).</t>
	</list>
	In order to further reduce the amount of data advertised it is RECOMMENDED to bundle component
	links with homogeneous hierarchies as described in <xref target="RFC4201"/> and illustrated in Section 5.6.
	</t>
</section>

<!--6--><section title="Compatibility" anchor="sec-comp">	   
	<t>
    All implementations of this document MAY also support advertisement as
    defined in <xref target="RFC4203"/>.  
When nodes support both the advertisement method in <xref
target="RFC4203"/> and the one in this document,
   implementations MUST support the configuration of which
   advertisement method is followed. The choice of which is used
   is based on policy and beyond the scope of this document.
   This enables nodes following each method to identify similar
   supporting nodes and compute paths using only the
   appropriate nodes.
	</t>
</section>
	


<!--7--><section title="Security Considerations" anchor="sec-secu">
<t>
   This document extends <xref target="RFC4203"/>. As with <xref target="RFC4203"/>, it specifies
  the contents of Opaque LSAs in OSPFv2.  As
   Opaque LSAs are not used for Shortest Path First (SPF) computation or normal routing, the
   extensions specified here have no direct effect on IP routing.
   Tampering with GMPLS TE LSAs may have an effect on the underlying
   transport (optical and/or Synchronous Optical Network - Synchronous Digital
Hierarchy (SONET-SDH) network. 
   <xref target="RFC3630"/> notes that the security mechanisms described in 
    <xref target="RFC2328"/>
    apply to Opaque LSAs carried in OSPFv2.  An analysis of the security
    of OSPF is provided in <xref target="RFC6863"/> and applies to the extensions to
    OSPF as described in this document.  Any new mechanisms developed to
    protect the transmission of information carried in Opaque LSAs will
    also automatically protect the extensions defined in this document.
   </t><t>
 Please refer to <xref target="RFC5920"/> for details on security threats; defensive techniques; monitoring, detection, and reporting of
   security attacks; and requirements.
</t>
</section>
   
<!--8--><section title="IANA Considerations" anchor="sec-iana">
<!--8.1--><section title="Switching Types" anchor="sec-iana1">
<t>
   IANA has made the following assignment in the
   "Switching Types" section of the "Generalized Multi-Protocol Label Switching
(GMPLS) Signaling Parameters"
   registry located at
&lt;http://www.iana.org/assignments/gmpls-sig-parameters>: 


<figure><artwork><![CDATA[	
Value      Name                          Reference
---------  --------------------------    ----------
110        OTN-TDM capable               [RFC7138]
]]> 
</artwork>
</figure>
The same type of modification has been applied to the IANA-GMPLS-TC-MIB
 at &lt;https://www.iana.org/assignments/ianagmplstc-mib>, where the value:
 </t><t>
 OTN-TDM (110),     -- Time-Division-Multiplex OTN-TDM capable
 </t><t>
has been added to the IANAGmplsSwitchingTypeTC ::= TEXTUAL-CONVENTION syntax list.
 </t>
</section>
<!--8.2--><section title="New Sub-TLVs" anchor="sec-iana2">
<t>
   This document defines 2 new sub-TLVs that are carried in Interface 
   Switching Capability Descriptors <xref target="RFC4203"/> with the Signal Type OTN-TDM.
   Each sub-TLV includes a 16-bit type identifier (the T-field). The same
   T-field values are applicable to the new sub-TLV.
</t>


<t>
  IANA has created and will maintain a new sub-registry, the 
  "Types for sub-TLVs of OTN-TDM SCSI (Switching Capability Specific Information)"
 registry under the "Open Shortest Path First (OSPF) Traffic Engineering TLVs" registry, see 
  &lt;http://www.iana.org/assignments/ospf-traffic-eng-tlvs>, with the sub-TLV types as follows:
<figure><artwork><![CDATA[	
Value       Sub-TLV                       Reference
---------   --------------------------    ----------
0           Reserved                      [RFC7138]
1           Unreserved Bandwidth for      [RFC7138]
            fixed containers                     
2           Unreserved/MAX Bandwidth for  [RFC7138]
            flexible containers  
3-65535	    Unassigned		]]> </artwork>
</figure>
 Types are to be assigned via Standards Action as defined in <xref target="RFC5226"/>.
</t>
</section>
</section>
<!--9--><section title="Contributors" anchor="sec-cont">

   <t>Diego Caviglia<vspace /> 
   Ericsson<vspace />
   Via E. Melen, 77<vspace />
   Genova<vspace />
   Italy<vspace />
   EMail: diego.caviglia@ericsson.com</t>

   <t>Dan Li<vspace />
   Huawei Technologies<vspace />
   Bantian, Longgang District <vspace />
   Shenzhen 518129 <vspace />
   P.R. China<vspace />
   EMail: danli@huawei.com</t>

   <t>Pietro Vittorio Grandi<vspace />
   Alcatel-Lucent<vspace />
   Via Trento, 30 <vspace />
   Vimercate <vspace />
   Italy<vspace />
   EMail: pietro_vittorio.grandi@alcatel-lucent.com</t> 

   <t>Khuzema Pithewan<vspace /> 
   Infinera Corporation<vspace />
   140 Caspian CT.<vspace />
   Sunnyvale, CA <vspace />
   USA<vspace />
   EMail: kpithewan@infinera.com</t> 

   <t>Xiaobing Zi<vspace />
   Huawei Technologies<vspace />
   EMail: zixiaobing@huawei.com</t>

   <t>Francesco Fondelli<vspace />
   Ericsson<vspace />
   EMail: francesco.fondelli@ericsson.com</t>

   <t>Marco Corsi<vspace />
   EMail: corsi.marco@gmail.com</t>

   <t>Eve Varma<vspace />
   Alcatel-Lucent<vspace />
   EMail: eve.varma@alcatel-lucent.com</t>

   <t>Jonathan Sadler<vspace />
   Tellabs<vspace />
   EMail: jonathan.sadler@tellabs.com</t>

   <t>Lyndon Ong<vspace />
   Ciena<vspace />
   EMail: lyong@ciena.com</t>

   <t>Ashok Kunjidhapatham<vspace />
   EMail: akunjidhapatham@infinera.com</t>

   <t>Snigdho Bardalai<vspace />
   EMail: sbardalai@infinera.com</t>

   <t>Steve Balls<vspace />
   EMail: Steve.Balls@metaswitch.com</t>
  
   <t>Jonathan Hardwick<vspace />
   EMail: Jonathan.Hardwick@metaswitch.com</t>

   <t>Xihua Fu<vspace />
   EMail: fu.xihua@zte.com.cn</t>

   <t>Cyril Margaria<vspace />
   EMail: cyril.margaria@nsn.com</t>

   <t>Malcolm Betts<vspace />
   EMail: Malcolm.betts@zte.com.cn</t>

</section>


<!--10--><section title="Acknowledgements" anchor="sec-ack">
<t>
The authors would like to thank Fred Gruman and Lou Berger for their valuable comments and suggestions.
</t>
</section>

</middle>


<back>
<references title="Normative References">
      <?rfc include="reference.RFC.2119"?>
      <?rfc include="reference.RFC.3630"?>
      <?rfc include="reference.RFC.4201"?>	
      <?rfc include="reference.RFC.4203"?>
      <?rfc include="reference.RFC.4328"?>	

<reference anchor='G.709-2012'>

<front>
<title>Interface for the optical transport network</title>

<author>
<organization>ITU-T</organization>
</author>

<date year='2012' month='February' />
</front>

<seriesInfo name='Recommendation' value='G.709/Y.1331' />

</reference>

</references>

<references title="Informative References">
	  <?rfc include="reference.RFC.2328"?>
	  <?rfc include="reference.RFC.5226"?>
	  <?rfc include="reference.RFC.5920"?>	
	  <?rfc include="reference.RFC.6163"?>	 	  
	  <?rfc include="reference.RFC.6566"?>	 
	  <?rfc include="reference.RFC.6863"?>	  


<?rfc include="reference.RFC.7062"?>
	  

<reference anchor='RFC7096'>

<front>
<title>Evaluation of Existing GMPLS Encoding
against G.709v3 Optical Transport Networks (OTNs)
</title>
<author initials='S.' surname='Belotti' fullname='S. Belotti'>
<organization /></author>
<author initials='P.' surname='Grandi' fullname='P. Grandi'>
<organization /></author>
<author initials='D.' surname='Ceccarelli' fullname='D. Ceccarelli' role="editor">
<organization /></author>
<author initials='D.' surname='Caviglia' fullname='D. Caviglia'>
<organization /></author>
<author initials='F.' surname='Zhang' fullname='F. Zhang'>
<organization /></author>

<date year='2014' month='January' />
</front>

<seriesInfo name='RFC' value='7096' />
<format type='TXT' target='http://www.rfc-editor.org/rfc/rfc7096.txt' />
</reference>
	


<reference anchor="RFC7139">

<front>
<title>GMPLS Signaling Extensions
for Control of Evolving G.709 Optical Transport Networks
</title>

<author initials='F' surname='Zhang' fullname='Fatai Zhang'>
    <organization />
</author>

<author initials='G' surname='Zhang' fullname='Guoying Zhang'>
    <organization />
</author>

<author initials='S' surname='Belotti' fullname='Sergio Belotti'>
    <organization />
</author>

<author initials='D' surname='Ceccarelli' fullname='Daniele Ceccarelli'>
    <organization />
</author>

<author initials='K' surname='Pithewan' fullname='Khuzema Pithewan'>
    <organization />
</author>

<date month='March' year='2014' />

</front>

<seriesInfo name='RFC' value='7139' />
<format type='TXT' target='http://www.rfc-editor.org/rfc/rfc7139.txt' />
</reference>


<reference anchor='G.798'>

<front>
<title>Characteristics of optical transport network hierarchy equipment
functional blocks
</title>

<author>
<organization>ITU-T</organization>
</author>
<date year='2012' month='December' />
</front>

<seriesInfo name='Recommendation' value='G.798' />

</reference>


<reference anchor='G.805'>

<front>
<title>Generic functional architecture of transport networks
</title>

<author>
<organization>ITU-T</organization>
</author>
<date year='2000' month='March' />
</front>

<seriesInfo name='Recommendation' value='G.805' />

</reference>

</references>
</back>

</rfc>



