<?xml version="1.0" encoding="US-ASCII"?>

<!-- switched to v1 to get table alignment in Appendix A right -->

<!DOCTYPE rfc SYSTEM "http://xml.resource.org/authoring/rfc2629.dtd" [
<!ENTITY RFC2616 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2616.xml">
<!ENTITY RFC1123 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1123.xml">
<!ENTITY RFC4287 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4287.xml">
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC5829 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5829.xml">
<!ENTITY RFC5988 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5988.xml">
<!ENTITY RFC4151 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4151.xml">
<!ENTITY RFC5785 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5785.xml">
<!ENTITY RFC6415 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6415.xml">
<!ENTITY RFC6690 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6690.xml">
<!ENTITY RFC6903 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6903.xml">
]>

<?xml-stylesheet type='text/xsl' href='http://www.mementoweb.org/guide/rfc/ID/rfc2629.xsl' ?>


<?rfc strict="yes" ipr="trust200902" ?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc rfcedstyle="yes"?>

<rfc submissionType="independent" category="info" number="7089" ipr="trust200902">


  <front>


    <title abbrev="HTTP Memento">HTTP Framework for Time-Based Access to Resource States -- Memento</title>





    <author fullname="Herbert Van de Sompel" initials="H." surname="Van de Sompel">
      <organization>Los Alamos National Laboratory</organization>
      <address>
        <postal>
          <street>PO Box 1663</street>
          <city>Los Alamos</city>
          <region>New Mexico</region>
          <code>87545</code>
          <country>USA</country>
        </postal>
        <phone>+1 505 667 1267</phone>
        <email>hvdsomp@gmail.com</email>
		<uri>http://public.lanl.gov/herbertv/</uri>
      </address>
    </author>

    <author fullname="Michael Nelson" initials="M.L." surname="Nelson">
      <organization>Old Dominion University</organization>
      <address>
        <postal>
          <street></street>
          <city>Norfolk</city>
          <region>Virginia</region>
          <code>23529</code>
          <country>USA</country>
        </postal>
        <phone>+1 757 683 6393</phone>
        <email>mln@cs.odu.edu</email>
		<uri>http://www.cs.odu.edu/~mln/</uri>
      </address>
    </author>

    <author fullname="Robert Sanderson" initials="R.D." surname="Sanderson">
      <organization>Los Alamos National Laboratory</organization>
      <address>
        <postal>
          <street>PO Box 1663</street>
          <city>Los Alamos</city>
          <region>New Mexico</region>
          <code>87545</code>
          <country>USA</country>
        </postal>
        <phone>+1 505 665 5804</phone>
        <email>azaroth42@gmail.com</email>
        <uri>http://public.lanl.gov/rsanderson/</uri>
      </address>
    </author>

    <date month="December" year="2013" />
 

    <area>General</area>

    <workgroup>Internet Engineering Task Force</workgroup>


    <keyword>HTTP</keyword>
    <keyword>content negotiation</keyword>
    <keyword>datetime negotiation</keyword>
    <keyword>resource versions</keyword>
    <keyword>archival resources</keyword>
    <keyword>Memento</keyword>

<!-- [rfced] FYI, we have used xml2rfc v1 (available from 
http://xml.resource.org/old.html) to convert this document to text.  We used v1
to get better spacing in the table in Appendix A. 
-->




<abstract>

<t>
  The HTTP-based Memento framework bridges the present and past
  Web.  It facilitates obtaining representations of prior states of a
  given resource by introducing datetime negotiation and
  TimeMaps. Datetime negotiation is a variation on content negotiation
  that leverages the given resource's URI and a user agent's preferred
  datetime.  TimeMaps are lists that enumerate URIs of resources that
  encapsulate prior states of the given resource.  The framework also
  facilitates recognizing a resource that encapsulates a frozen prior
  state of another resource.
</t>

</abstract>

</front>


<middle>

<section title="Introduction">

<section title="Terminology">

<t>
This specification uses the terms "resource", "request", "response",
"entity-body", "content negotiation", "user agent", and "server" as
described in <xref target="RFC2616"></xref>, and it uses the terms
"representation" and "resource state" as described
in <xref target="W3C.REC-aww-20041215"></xref>.
</t>
  
<t>
  In addition, the following terms specific to the Memento framework
  are introduced:
</t>

<t><list style="symbols">

  <t>
    Original Resource: An Original Resource is a resource that exists
    or used to exist, and for which access to one of its prior states
    may be required.
  </t>
  
  <t>
    Memento: A Memento for an Original Resource is a resource that
    encapsulates a prior state of the Original Resource.  A Memento
    for an Original Resource as it existed at time T is a resource
    that encapsulates the state the Original Resource had at time T.
  </t>
  
  <t>
    TimeGate: A TimeGate for an Original Resource is a resource that
    is capable of datetime negotiation to support access to prior
    states of the Original Resource.
  </t>
  
  <t>
    TimeMap: A TimeMap for an Original Resource is a resource from
    which a list of URIs of Mementos of the Original Resource is
    available.
  </t>
  


</list> </t>

</section>
  
  <section title="Notational Conventions" anchor="notation">
    
    <t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
      "OPTIONAL" in this document are to be interpreted as described
      in <xref target="RFC2119"></xref>.
    </t>
    
    <t>
      When needed for extra clarity, the following conventions are
      used:
    </t>
    
    <t><list style="symbols">
      
      <t>URI-R is used to denote the URI of an Original Resource.</t>  
      
      <t>URI-G is used to denote the URI of a TimeGate.</t>  
      
      <t>URI-M is used to denote the URI of a Memento.</t>  
      
      <t>URI-T is used to denote the URI of a TimeMap.</t>  
      
    </list></t>
    
  </section>

<section title="Purpose">

<t>
The state of an Original Resource may change over time. Dereferencing
its URI at any specific moment yields a response that reflects the
resource's state at that moment: a representation of the resource's
state (e.g., "200 OK" HTTP status code), an indication of its
nonexistence (e.g., "404 Not Found" HTTP status code), a relation to
another resource (e.g., "302 Found" HTTP status code), etc.  However,
responses may also exist that reflect prior states of an Original
Resource: a representation of a prior state of the Original Resource,
an indication that the Original Resource did not exist at some time in
the past, a relation that the Original Resource had to another
resource at some time in the past, etc.  Mementos that provide such
responses exist in Web archives, content management systems, or
revision control systems, among others.  For any given Original
Resource several Mementos may exist, each one reflecting a frozen
prior state of the Original Resource.
</t>

<t>Examples are:</t>

  <t>Mementos for Original Resource http://www.ietf.org/ are as follows:</t>
  
  <t><list style="symbols">
    <t>http://web.archive.org/web/19970107171109/http://www.ietf.org/</t>
    <t>http://webarchive.nationalarchives.gov.uk/20080906200044/http://www.ietf.org/</t>
</list></t>

  <t>Mementos for Original Resource http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol are as follows:</t>
  
  <t><list style="symbols">
    <t>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=366806574</t> 
    <t>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=33912</t>
    <t>http://web.archive.org/web/20071011153017/http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol</t>
</list></t>

<t>Mementos for Original Resource http://www.w3.org/TR/webarch/ are as follows:</t>
  
  <t><list style="symbols">
    <t>http://www.w3.org/TR/2004/PR-webarch-20041105/</t>
    <t>http://www.w3.org/TR/2002/WD-webarch-20020830/</t>
    <t>http://archive.is/20120527002537/http://www.w3.org/TR/webarch/</t>

</list></t>


  <t>
    In the abstract, the Memento framework introduces a mechanism to
    access versions of Web resources that:
  </t>
  
  <t><list style="symbols">
    
    <t>Is fully distributed in the sense that resource versions may
      reside on multiple servers, and that any such server is likely
      only aware of the versions it holds;</t>
    
    <t>Uses the global notion of datetime as a resource version
    indicator and access key;</t>
    
    <t>Leverages the following primitives
      of <xref target="W3C.REC-aww-20041215"></xref>: resource,
      resource state, representation, content negotiation, and
      link.</t>
    
  </list></t>
  
  <t>The core components of Memento's mechanism to access resource
  versions are:</t>

<?rfc text-list-symbols="*o+-"?>     
<t> <list style="numbers">
    <t>The abstract notion of the state of an Original Resource
    (URI-R) as it existed at datetime T.  Note the relationship with
    the ability to identify the state of a resource at datetime T by
    means of a URI as intended by the proposed Dated URI
    scheme <xref target="DATED-URI"></xref>.
    </t>
    
    <t>A "bridge" from the present to the past, consisting of:

    <list style="symbols">
      
      <t>The existence of a TimeGate (URI-G), which is aware of (at
        least part of the) version history of the Original Resource
        (URI-R);</t>
      
      <t>The ability to negotiate in the datetime dimension with that
        TimeGate (URI-G), as a means to access the state that the
        Original Resource (URI-R) had at datetime T.</t>
      
    </list></t>
<?rfc text-list-symbols="o*+-"?> 
    
    <t>A "bridge" from the past to the present, consisting of an
      appropriately typed link from a Memento (URI-M), which
      encapsulates the state the Original Resource (URI-R) had at
      datetime T, to the Original Resource (URI-R).
    </t>
  
  <t>
    The existence of a TimeMap (URI-T) from which a list of all
    Mementos that encapsulate a prior state of the Original Resource
    (URI-R) can be obtained.
  </t>
</list> </t>
  
  <t>
    This document is concerned with specifying an instantiation of
    these abstractions for resources that are identified by HTTP(S)
    URIs.
  </t>
  

</section>
  
</section>
  
  
<section title="HTTP Headers, Link Relation Types" anchor="component-1.1">

  <t>
    The Memento framework is concerned with HEAD and GET interactions
    with Original Resources, TimeGates, Mementos, and TimeMaps that
    are identified by HTTP or HTTPS URIs.  Details are only provided
    for resources identified by HTTP URIs but apply similarly to those
    with HTTPS URIs.
  </t>

<section title="HTTP Headers" anchor="HTTP_Headers">

<t>
The Memento framework operates at the level of HTTP request and
response headers. It introduces two new headers ("Accept-Datetime" and
"Memento-Datetime") and introduces new values for two existing headers
("Vary" and "Link").  Other HTTP headers are present or absent in
Memento response/request cycles as specified
by <xref target="RFC2616"></xref>.
</t>

<section title="Accept-Datetime and Memento-Datetime" anchor="Accept-Memento-Datetime">

<t>
The "Accept-Datetime" request header is transmitted by a user agent to
indicate it wants to access a past state of an Original Resource. To
that end, the "Accept-Datetime" header is conveyed in an HTTP request
issued against a TimeGate for an Original Resource, and its value
indicates the datetime of the desired past state of the Original
Resource.
</t>
  
  <t>
    Example of an "Accept-Datetime" request header:
  </t>
  
  <figure>
    <artwork align="left"><![CDATA[ 
Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT
]]></artwork>
  </figure>

<t>
The "Memento-Datetime" response header is used by a server to indicate
that a response reflects a prior state of an Original Resource. Its
value expresses the datetime of that state. The URI of the Original
Resource for which the response reflects a prior state is provided as
the Target IRI of a link provided in the HTTP "Link" header that has a
Relation Type of "original"
(see <xref target="Link-Header-Relation-Types"></xref>).
</t>

<t>
    The presence of a "Memento-Datetime" header and associated value
    for a given response constitutes a promise that the resource state
    reflected in the response will no longer change
    (see <xref target="SpecialCases-Sticky"></xref>).
</t>
  
  <t>
    Example of a "Memento-Datetime" response header:
  </t>
  
  <figure>
    <artwork align="left"><![CDATA[ 
Memento-Datetime: Wed, 30 May 2007 18:47:52 GMT
]]></artwork>
  </figure>

    <t>Values for the "Accept-Datetime" and "Memento-Datetime" headers
    consist of a MANDATORY datetime expressed according to the
    <xref target="RFC1123"></xref> format, which is formalized by the
    rfc1123-date construction rule of the BNF
    in <xref target="datetime-BNF"></xref>. This BNF is derived from 
      the HTTP-date construction of the BNF for Full Dates 
      provided in <xref target="RFC2616"></xref>. The datetime is
    case sensitive with names for days and months exactly as shown in
    the wkday and month construction rules of the BNF, respectively.
    The datetime MUST be represented in Greenwich Mean Time (GMT).
</t> 
  

  
  <figure align="center" anchor="datetime-BNF" title="BNF for the Datetime Format">
    
    <artwork align="left"><![CDATA[

accept-dt-value = rfc1123-date
rfc1123-date = wkday "," SP date1 SP time SP "GMT"
date1        = 2DIGIT SP month SP 4DIGIT 
                  ; day month year (e.g., 20 Mar 1957)
time         = 2DIGIT ":" 2DIGIT ":" 2DIGIT 
                  ; 00:00:00 - 23:59:59 (e.g., 14:33:22)
wkday        = "Mon" | "Tue" | "Wed" | "Thu" | "Fri" | "Sat" | 
               "Sun" 
month        = "Jan" | "Feb" | "Mar" | "Apr" | "May" | "Jun" | 
               "Jul" | "Aug" | "Sep" | "Oct" | "Nov" | "Dec"

]]></artwork>
    
  </figure>
  
    
</section>

  <section title="Vary">
    
    <t>
      Generally, the "Vary" header is used in HTTP responses to
      indicate the dimensions in which content negotiation is
      possible. In the Memento framework, a TimeGate uses the "Vary"
      header with a value that includes "accept-datetime" to convey
      that datetime negotiation is possible.
    </t>  
    
    <t>
      For example, this use of the "Vary" header indicates that
      datetime is the only dimension in which negotiation is possible:
    </t>
    
    <figure>
      <artwork align="left"><![CDATA[
Vary: accept-datetime
]]></artwork>
    </figure>
    
    <t>
      The use of the "Vary" header in this example shows that both datetime negotiation and media type content negotiation are possible:
    </t>
    
    <figure>
      <artwork align="left"><![CDATA[
Vary: accept-datetime, accept
]]></artwork>
    </figure>
    
  </section>
  
  <section title="Link">
    
    <t>
      The Memento framework defines the "original", "timegate",
      "timemap", and "memento" Relation Types to convey typed links
      among Original Resources, TimeGates, Mementos, and TimeMaps. They
      are defined in
      <xref target="Link-Header-Relation-Types"></xref>, below.  In
      addition, existing Relation Types may be used, for example, to
      support navigating among Mementos.  Examples are "first",
      "last", "prev", "next", "predecessor-version", and
      "successor-version" as detailed
      in <xref target="RFC5988"></xref>
      and <xref target="RFC5829"></xref>.
    </t>
    
  </section>

</section>

<section title="Link Relation Types" anchor="Link-Header-Relation-Types">

<t>
This section introduces the Relation Types used in the Memento
framework.  They are defined in a general way, and their use in HTTP
"Link" headers <xref target="RFC5988"></xref> is described in detail.
The use of these Relation Types in TimeMaps is described in
  <xref target="Pattern6"></xref>.</t>
     
  <section title="Link Relation Type &quot;original&quot;">
    
    <t>
      "original" --  A link with an "original" Relation Type is used to
      point from a TimeGate or a Memento to its associated Original Resource. 
    </t>
    
    <t>
      Use in HTTP "Link" headers: Responses to HTTP HEAD/GET requests
      issued against a TimeGate or a Memento MUST include exactly one
      link with an "original" Relation Type in their HTTP "Link"
      header.
    </t>
  
    
  </section>

<section title="Link Relation Type &quot;timegate&quot;">

<t>
  "timegate" -- A link with a "timegate" Relation Type is used to
  point from the Original Resource, as well as from a Memento
  associated with the Original Resource, to a TimeGate for the
  Original Resource.
</t>
  
<t>
  Use in HTTP "Link" headers: If there is a TimeGate associated with
  an Original Resource or Memento that is preferred for use, then
  responses to HTTP HEAD/GET requests issued against these latter
  resources MUST include a link with a "timegate" Relation Type in
  their HTTP "Link" header.  Since multiple TimeGates can exist for
  any Original Resource, multiple "timegate" links MAY occur, each
  with a distinct Target IRI.
</t>

</section>

<section title="Link Relation Type &quot;timemap&quot;">

<t>
  "timemap" -- A link with a "timemap" Relation Type is used to point
  from a TimeGate or a Memento associated with an Original Resource,
  as well as from the Original Resource itself, to a TimeMap for the
  Original Resource.
</t>
  
  <t>
    Attributes: A link with a "timemap" Relation Type SHOULD use the
    "type" attribute to convey the MIME type of the TimeMap
    serialization. 


The "from" and "until" attributes may be used to
    express the start and end of the temporal interval covered by
    Mementos listed in the TimeMap.  That is, the linked TimeMap will
    not contain Mementos with archival datetimes outside of the
    expressed temporal interval. Attempts SHOULD be made to convey
    this interval as accurately as possible.  The value for the these
    attributes MUST be a datetime expressed according to the
    rfc1123-date construction rule of the BNF
    in <xref target="datetime-BNF"></xref>, and it MUST be represented
    in Greenwich Mean Time (GMT).
  </t>
  
  
  <t>
    Use in HTTP "Link" headers: If there is a TimeMap associated with
    an Original Resource, a TimeGate, or a Memento that is preferred
    for use, then responses to HTTP HEAD/GET requests issued against
    these latter resources MUST include a link with a "timemap"
    Relation Type in their HTTP "Link" header.  Multiple such links,
    each with a distinct Target IRI, MAY be expressed as a means to
    point to different TimeMaps or to different serializations of the
    same TimeMap.  In all cases, use of the "from" and "until"
    attributes is OPTIONAL.
  </t>
  
</section>

<section anchor="memento-rel" title="Link Relation Type &quot;memento&quot;">

<t>
  "memento" -- A link with a "memento" Relation Type is used to point
  from a TimeGate or a Memento for an Original Resource, as well as
  from the Original Resource itself, to a Memento for the Original
  Resource.
</t>
  
  <t>
    Attributes: A link with a "memento" Relation Type MUST include a
    "datetime" attribute with a value that matches the
    "Memento-Datetime" of the Memento that is the target of the link;
    that is, the value of the "Memento-Datetime" header that is
    returned when the URI of the linked Memento is dereferenced.  The
    value for the "datetime" attribute MUST be a datetime expressed
    according to the rfc1123-date construction rule of the BNF
    in <xref target="datetime-BNF"></xref>, and it MUST be represented
    in Greenwich Mean Time (GMT).  This link MAY include a "license"
    attribute to associate a license with the Memento; the value for
    the "license" attribute MUST be a URI.
  </t>
  
  
  <t>Use in HTTP "Link" headers: Responses to HTTP HEAD/GET requests
    issued against an Original Resource, a TimeGate, and a Memento MAY
    include links in their HTTP "Link" headers with a "memento"
    Relation Type. For responses in which a Memento is selected, the
    provision of navigational links that lead to Mementos other than
    the selected one can be beneficial to the user agent. Of special
    importance are links that lead to the temporally first and last
    Memento known to the responding server, as well as links leading
    to Mementos that are temporally adjacent to the selected one.</t>
  
  </section>
  
</section>
  
  
 
</section>
  
  <section title="Overview of the Memento Framework" anchor="overview"> 
    
    <t>The Memento framework defines two complementary approaches to
    support obtaining representations of prior states of an Original
    Resource:</t>
    
    <t><list style="symbols">
      <t>Datetime Negotiation: Datetime negotiation is a variation on
        content negotiation by which a user agent expresses a datetime
        preference pertaining to the representation of an Original
        Resource, instead of, for example, a media type
        preference. Based on the responding server's knowledge of the
        past of the Original Resource, it selects a Memento of the
        Original Resource that best meets the user agent's datetime
        preference.  An overview is provided
        in <xref target="overview-datetime-conneg"></xref>; details
        are in <xref target="component-1.2"></xref>.</t>
      <t>TimeMaps: A TimeMap is a resource from which a list can be
        obtained that provides a comprehensive overview of the past of
        an Original Resource.  A server makes a TimeMap available that
        enumerates all Mementos that the server is aware of, along
        with their archival datetime.  A user agent can obtain the
        TimeMap and select Mementos from it.  An overview is provided
        in <xref target="overview-timemaps"></xref>; details are in
        <xref target="Pattern6"></xref>.</t>
      
    </list></t>
  
  <section title="Datetime Negotiation" anchor="overview-datetime-conneg">
    
    <t><xref target="intro-flow"></xref> provides a schematic overview
      of a successful request/response chain that involves datetime
      negotiation. Dashed lines depict HTTP transactions between user
      agent and server.  The interactions are for a scenario where the
      Original Resource resides on one server, whereas both its
      TimeGate and Mementos reside on another
      (<xref target="Pattern2.1">Pattern 2.1</xref>
      in <xref target="component-1.2"></xref>).  Scenarios also exist
      in which all these resources are on the same server (for
      example, content management systems) or all are on different
      servers (for example, an aggregator of TimeGates).
    </t>
    
    
    <figure align="center" anchor="intro-flow" title="A Datetime Negotiation Request/Response Chain">
      
      <artwork align="left"><![CDATA[
1: UA --- HTTP HEAD/GET; Accept-Datetime: T ----------------> URI-R
2: UA <-- HTTP 200; Link: URI-G ----------------------------- URI-R
3: UA --- HTTP HEAD/GET; Accept-Datetime: T ----------------> URI-G
4: UA <-- HTTP 302; Location: URI-M; Vary; Link: 
      URI-R,URI-T ------------------------------------------> URI-G
5: UA --- HTTP GET URI-M; Accept-Datetime: T ---------------> URI-M
6: UA <-- HTTP 200; Memento-Datetime: T; Link:  
      URI-R,URI-T,URI-G ------------------------------------- URI-M
]]></artwork>
      
    </figure>   
    
    <t><list style="format Step %d:" hangIndent="9">
      
      <t>
        The user agent that wants to access a prior state of
        the Original Resource issues an HTTP HEAD/GET against URI-R
        that has an "Accept-Datetime" HTTP header with a value of the
        datetime of the desired state.
      </t>
      
      <t>
        The response from URI-R includes an HTTP "Link" header
        with a Relation Type of "timegate" pointing at a TimeGate
        (URI-G) for the Original Resource.
      </t>
      
      <t>
        The user agent starts the datetime negotiation process
        with the TimeGate by issuing an HTTP GET request against URI-G
        that has an "Accept-Datetime" HTTP header with a value of the
        datetime of the desired prior state of the Original Resource.
      </t>
      
      <t>
        The response from URI-G includes a "Location" header
        pointing at a Memento (URI-M) for the Original Resource.  In
        addition, the response contains an HTTP "Link" header with a
        Relation Type of "original" pointing at the Original Resource
        (URI-R), and an HTTP "Link" header with a Relation Type of
        "timemap" pointing at a TimeMap (URI-T).
      </t>
      
      <t>
        The user agent issues an HTTP GET request against URI-M.
      </t>
      
      <t>
        The response from URI-M includes a "Memento-Datetime"
        HTTP header with a value of the archival datetime of the
        Memento.  It also contains an HTTP "Link" header with a
        Relation Type of "original" pointing at the Original Resource
        (URI-R), with a Relation Type of "timegate" pointing at a
        TimeGate (URI-G) for the Original Resource, and with a
        Relation Type of "timemap" pointing at a TimeMap (URI-T) for
        the Original Resource.  The state that is expressed by the
        response is the state the Original Resource had at the
        archival datetime expressed in the "Memento-Datetime" header.
      </t>
      
    </list></t>
    
    <t>
      In order to respond to a datetime negotiation request, the
      server uses an internal algorithm to select the Memento that
      best meets the user agent's datetime preference. The exact
      nature of the selection algorithm is at the server's discretion
      but is intended to be consistent, for example, always selecting
      the Memento that is nearest in time relative to the requested
      datetime, always selecting the Memento that is nearest in the
      past relative to the requested datetime, etc.
    </t>
    
    <t>
      Due to the sparseness of Mementos in most systems, the value of
      the "Memento-Datetime" header returned by a server may differ
      (significantly) from the value conveyed by the user agent in
      "Accept-Datetime".
    </t>
    
    <t>
      Although a Memento encapsulates a prior state of an Original
      Resource, the entity-body returned in response to an HTTP GET
      request issued against a Memento may very well not be
      byte-to-byte the same as an entity-body that was previously
      returned by that Original Resource. Various reasons exist why
      there are significant chances these would be different yet do
      convey substantially the same information. These include format
      migrations as part of a digital preservation strategy,
      URI-rewriting as applied by some Web archives, and the addition
      of banners as a means to brand Web archives.
    </t>
    
    <t> When negotiating in the datetime dimension, the regular
      content negotiation dimensions (media type, character encoding,
      language, and compression) remain available.  It is the TimeGate
      server's responsibility to honor (or not) such content
      negotiation, and in doing so it MUST always first select a
      Memento that meets the user agent's datetime preference, and
      then consider honoring regular content negotiation for it. As a
      result of this approach, the returned Memento will not
      necessarily meet the user agent's regular content negotiation
      preferences. Therefore, it is RECOMMENDED that the server
      provides "memento" links in the HTTP "Link" header pointing at
      Mementos that do meet the user agent's regular content
      negotiation requests and that have a value for the
      "Memento-Datetime" header in the temporal vicinity of the user
      agent's preferred datetime value.
    </t>
    
    <t>A user agent that engages in datetime negotiation with a
      resource typically starts by issuing an HTTP HEAD, not GET,
      request with an "Accept-Datetime" header in order to determine
      how to proceed. This strategy is related to the existence of
      various server implementation patterns as will become clear in
      <xref target="component-1.2"></xref>.

      
      

</t>
    
    <t>Details about the HTTP interactions involved in datetime
    negotiation are provided in
      <xref target="component-1.2"></xref>.</t>
     
  </section>
    
    <section title="TimeMaps" anchor="overview-timemaps">
      
      <t><xref target="intro-timemap"></xref> provides a schematic
        overview of a successful request/response chain that shows a
        user agent obtaining a TimeMap.  The pictorial conventions are
        the same as the ones used
        in <xref target="intro-flow"></xref>, as is the scenario. Note
        that, in addition to a TimeGate, an Original Resource and a
        Memento can also provide a link to a TimeMap.
      </t>
      
      
      <figure align="center" anchor="intro-timemap" title="A Request/Response Chain to Obtain a TimeMap">
        
        <artwork align="left"><![CDATA[
1: UA --- HTTP HEAD/GET ------------------------------------> URI-R
2: UA <-- HTTP 200; Link: URI-G ----------------------------- URI-R
3: UA --- HTTP HEAD/GET ------------------------------------> URI-G
4: UA <-- HTTP 302; Location: URI-M; Vary; Link: 
      URI-R,URI-T ------------------------------------------> URI-G
5: UA --- HTTP GET URI-T -----------------------------------> URI-T
6: UA <-- HTTP 200 ------------------------------------------ URI-T
]]></artwork>
        
      </figure>   
      
      <t><list style="format Step %d:" hangIndent="9">
        
        <t>
          The user agent that wants to access a TimeMap for
          the Original Resource issues an HTTP HEAD/GET against
          URI-R. This can be done with or without an "Accept-Datetime"
          HTTP header.
        </t>
        
        <t>
          Irrespective of the use of an "Accept-Datetime" HTTP
          header in Step 1, the response from URI-R includes an HTTP
          "Link" header with a Relation Type of "timegate" pointing at
          a TimeGate (URI-G) for the Original Resource.
        </t>
        
        <t>
          The user agent issues an HTTP GET request against
          URI-G. This can be done with or without an "Accept-Datetime"
          HTTP header.
        </t>
        
        <t>
          Irrespective of the use of an "Accept-Datetime" HTTP
          header in Step 1, the response contains an HTTP "Link"
          header with a Relation Type of "timemap" pointing at a
          TimeMap (URI-T).
        </t>
        
        <t>
          The user agent issues an HTTP GET request against URI-T.
        </t>
        
        <t>
          The response from URI-T has an entity-body that
          lists all Mementos for the Original Resource known to the
          responding server, as well as their archival datetimes.
        </t>
        
      </list></t>
      
      <t>Details about the content and serialization of TimeMaps are
      provided in <xref target="Pattern6"></xref>.</t>
      
      </section>
    
    </section>


  <section title="Datetime Negotiation: HTTP Interactions" anchor="component-1.2">
   
    <t>
      <xref target="intro-flow"></xref> depicts a specific pattern to
      implement the Memento framework.  Multiple patterns exist, and
      they can be grouped as follows:
    </t>
    
    <t><list style="symbols">
      <t><xref target="Pattern1">Pattern 1</xref> - The Original Resource acts as its own TimeGate</t>
      <t><xref target="Pattern2">Pattern 2</xref> - A remote resource acts as a TimeGate for the Original Resource</t>
      <t><xref target="Pattern3">Pattern 3</xref> - The Original Resource is a Fixed Resource</t>
      <t><xref target="Pattern4">Pattern 4</xref> - Mementos without a TimeGate</t>
    </list></t>
    
    <t>Details of the HTTP interactions for common cases for each of
    those patterns are provided in Sections
      <xref target="Pattern1" format="counter"></xref>
      through <xref target="Pattern4" format="counter"></xref>. <xref target="Appendix"></xref>
      summarizes the use of the "Vary", "Memento-Datetime", and "Link"
      headers in responses from Original Resources, TimeGates, and
      Mementos for the various patterns.  Special cases are described
      in <xref target="SpecialCases"></xref>.  Note that in the
      following sections, the HTTP status code of the responses with
      an entity-body is shown as "200 OK", but a series of "206
      Partial Content" responses could be substituted.</t>
    
    
    <t>
      <xref target="Pattern1-Request1"></xref> shows a user agent that
      attempts to datetime negotiate with the Original Resource
      http://a.example.org/ by including an "Accept-Datetime" header
      in its HTTP HEAD request. This initiating request is the same
      for <xref target="Pattern1">Pattern 1</xref>
      through <xref target="Pattern3">Pattern 3</xref>.
    </t>
    
    <figure title="User Agent Attempts Datetime Negotiation with Original Resource" align="center" anchor="Pattern1-Request1">       
      <artwork align="left"><![CDATA[
HEAD / HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 20 Mar 2001 20:35:00 GMT
Connection: close
]]></artwork>         
    </figure>
    
    <section title="Pattern 1 - The Original Resource Acts as Its Own TimeGate" anchor="Pattern1">
      
      <t>In this implementation pattern, the Original Resource acts as
      its own TimeGate, which means that URI-R and URI-G
      coincide. Content management systems and revision control
      systems can support datetime negotiation in this way as they are
      commonly aware of the version history of their own
      resources.</t>
      
      <t>The response to this request when datetime negotiation for
        this resource is supported depends on the negotiation style it
        uses (200-style or 302-style) and on the existence or absence
        of a URI-M for Mementos that is distinct from the URI-R of the
        associated Original Resource.  The various cases are
        summarized in the below table, and the server responses for
        each are detailed in the remainder of this section.
      </t>
      
      <texttable anchor="Pattern1-Table" title="Pattern 1">  
        <ttcol align="center">Pattern</ttcol>    
        <ttcol align="center">Original Resource</ttcol>    
        <ttcol align="center">TimeGate</ttcol>     
        <ttcol align="center">Memento</ttcol>
        <ttcol align="center">Negotiation Style</ttcol>
        <c><xref target="Pattern1.1">Pattern 1.1</xref></c>     
        <c>URI-R</c>     
        <c>URI-R</c>     
        <c>URI-M</c>
        <c>302</c>
        <c><xref target="Pattern1.2">Pattern 1.2</xref></c>     
        <c>URI-R</c>     
        <c>URI-R</c>    
        <c>URI-M</c>
        <c>200</c> 
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>    
        <c>URI-R</c>     
        <c>URI-R</c>    
        <c>URI-R</c>
        <c>200</c> 
      </texttable>  
     


      <section title="Pattern 1.1 - URI-R=URI-G; 302-Style Negotiation; Distinct URI-M" anchor="Pattern1.1">
        
          <t>
            In this case, the response to the user agent's request
          of <xref target="Pattern1-Request1"></xref> has a "302
          Found" HTTP status code, and the "Location" header conveys
          the URI-M of the selected Memento.  The use of Memento
          response headers and links in the response from URI-R=URI-G
          is as follows:</t>
          
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include the "accept-datetime" value.</t>
          <t>The response MUST NOT contain a "Memento-Datetime" header.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
          least a link with the "original" Relation Type that has the
          URI-R of the Original Resource as Target IRI. The provision
          of other links is encouraged and is subject to the
          considerations described
          in <xref target="Link-Header-Relation-Types"></xref>.</t>
          </list></t>
        
        <t>The server's response to the request of <xref target="Pattern1-Request1"></xref> is shown in 
          <xref target="Pattern1.1-Response1"></xref>. Note the
          inclusion of the recommended link to the TimeGate that, in
          this case, has a Target IRI that is the URI-R of the
          Original Resource.</t>
           
        <figure align="center" anchor="Pattern1.1-Response1" title="Response from URI-R=URI-G for Pattern 1.1">
          <artwork align="left"><![CDATA[
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: accept-datetime
Location: 
 http://a.example.org/?version=20010320133610
Link: <http://a.example.org/>; rel="original timegate"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>
        </figure>
        
        <t>In a subsequent request, shown
          in <xref target="Pattern1-Request2"></xref>, the user agent
          can obtain the selected Memento by issuing an HTTP GET
          request against the URI-M that was provided in the
          "Location" header. The inclusion of the "Accept-Datetime"
          header in this request is not needed but will typically
          occur as the user agent is in datetime negotiation mode.</t>
        
        <figure title="User Agent Requests Selected Memento" align="center" anchor="Pattern1-Request2">       
          <artwork align="left"><![CDATA[
GET /?version=20010320133610 HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 20 Mar 2001 20:35:00 GMT
Connection: close
]]></artwork>         
        </figure>
        
        <t>The response has a "200 OK" HTTP status code, and the
          entity-body of the response contains the representation of
          the selected Memento.  The use of Memento response headers
          and links in the response from URI-M is as follows:</t>
        
        <t><list style="symbols">
          <t>A "Vary" header that includes an "accept-datetime" value MUST NOT be provided.</t>
          <t>The response MUST include a "Memento-Datetime"
          header. Its value expresses the archival datetime of the
          Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern1-Request2"></xref> is shown in
          <xref target="Pattern1.1-Response2"></xref>. Note the
          provision of the required "original", and the recommended
          "timegate" and "timemap" links.  The former two point to the
          Original Resource, which acts as its own TimeGate. The
          latter has "from" and "until" attributes to indicate the
          temporal interval covered by Mementos listed in the linked
          TimeMap.</t>
        
        <figure title="Response from URI-M for Pattern 1.1" align="center" anchor="Pattern1.1-Response2">   
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:51 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 20 Mar 2001 13:36:10 GMT
Link: <http://a.example.org/>; rel="original timegate",
 <http://a.example.org/?version=all&style=timemap>
   ; rel="timemap"; type="application/link-format"
   ; from="Tue, 15 Sep 2000 11:28:26 GMT"
   ; until="Wed, 20 Jan 2010 09:34:33 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
        </figure> 
        
      </section>
      
      <section title="Pattern 1.2 - URI-R=URI-G; 200-Style Negotiation; Distinct URI-M" anchor="Pattern1.2">
        
        <t>
          In this case, the response to the user agent's request
          of <xref target="Pattern1-Request1"></xref> has a "200 OK"
          HTTP status code, and the "Content-Location" header conveys
          the URI-M of the selected Memento.  The use of Memento
          response headers and links in the response from URI-R=URI-G
          is as follows:</t>
        
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include
          the "accept-datetime" value.</t>
          <t>The response MUST include a "Memento-Datetime"
            header. Its value expresses the archival datetime of the
            selected Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern1-Request1"></xref> is shown in
          <xref target="Pattern1.2-Response1"></xref>. Note the
        provision of optional "memento" links pointing at the oldest
        and most recent Memento for the Original Resource known to the
        responding server.</t>
        
        <figure align="center" anchor="Pattern1.2-Response1" title="Response from URI-R=URI-G for Pattern 1.2">
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: accept-datetime
Content-Location: 
 http://a.example.org/?version=20010320133610
Memento-Datetime: Tue, 20 Mar 2001 13:36:10 GMT
Link: <http://a.example.org/>; rel="original timegate",
 <http://a.example.org/?version=20000915112826>
 ; rel="memento first"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 <http://a.example.org/?version=20100120093433>
 ; rel="memento last"; datetime="Wed, 20 Jan 2010 09:34:33 GMT",
 <http://a.example.org/?version=all&style=timemap>
 ; rel="timemap"; type="application/link-format"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>
        </figure>
        
        <t>In a subsequent request, which is the same
          as <xref target="Pattern1-Request1"></xref> but with HTTP
          GET instead of HEAD, the user agent can obtain the
          representation of the selected Memento. It will be provided
          as the entity-body of a response that has the same Memento
          headers as in
          <xref target="Pattern1.2-Response1"></xref>.</t> 
        
        
      </section>
      
      <section title="Pattern 1.3 - URI-R=URI-G; 200-Style Negotiation; No Distinct URI-M" anchor="Pattern1.3">
        
        <t>
          In this case, the response to the user agent's request
          of <xref target="Pattern1-Request1"></xref> has a "200 OK"
          HTTP status code, and it does not contain a
          "Content-Location" nor a "Location" header as there is no
          URI-M of the selected Memento to convey.  The use of Memento
          response headers and links in the response from URI-R=URI-G
          is as follows:</t>
        
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include
          the "accept-datetime" value.</t>
          <t>The response MUST include a "Memento-Datetime"
            header. Its value expresses the archival datetime of the
            selected Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern1-Request1"></xref> is shown in
          <xref target="Pattern1.3-Response1"></xref>. The recommended
          "timemap" and "timegate" links are included in addition to
          the mandatory "original" link.</t>
        
        <figure align="center" anchor="Pattern1.3-Response1" title="Response from URI-R=URI-G for Pattern 1.3">
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: accept-datetime
Memento-Datetime: Tue, 20 Mar 2001 13:36:10 GMT
Link: <http://a.example.org/>; rel="original timegate",
 <http://a.example.org/?version=all&style=timemap>
   ; rel="timemap"; type="application/link-format"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>
        </figure>
        
        <t>In a subsequent request, which is the same
          as <xref target="Pattern1-Request1"></xref> but with HTTP
          GET instead of HEAD, the user agent can obtain the
          representation of the selected Memento. It will be provided
          as the entity-body of a response that has the same Memento
          headers as in
          <xref target="Pattern1.3-Response1"></xref>.</t>        
        
      </section>
      
    </section>
    
    <section title="Pattern 2 - A Remote Resource Acts as a TimeGate for the Original Resource" anchor="Pattern2">
      
      <t>In this implementation pattern, the Original Resource does
        not act as its own TimeGate, which means that URI-R and URI-G
        are different. This pattern is typically implemented by
        servers for which the history of their resources is recorded
        in remote systems such as Web archives and transactional
        archives <xref target="Fitch"></xref>.  But servers that
        maintain their own history, such as content management systems
        and version control systems, may also implement this pattern,
        for example, to distribute the load involved in responding to
        requests for current and prior representations of resources
        between different servers.</t>
      
      <t>This pattern is summarized in the below table and is detailed
        in the remainder of this section.  Three cases exist that
        differ regarding the negotiation style that is used by the
        remote TimeGate and regarding the existence of a URI-M for
        Mementos that is distinct from the URI-G of the TimeGate.
      </t>
         
      <texttable anchor="Pattern2-Table" title="Pattern 2">  
        <ttcol align="center">Pattern</ttcol>    
        <ttcol align="center">Original Resource</ttcol>    
        <ttcol align="center">TimeGate</ttcol>     
        <ttcol align="center">Memento</ttcol>
        <ttcol align="center">Negotiation Style</ttcol>
        <c><xref target="Pattern2.1">Pattern 2.1</xref></c>     
        <c>URI-R</c>     
        <c>URI-G</c>     
        <c>URI-M</c>
        <c>302</c>
        <c><xref target="Pattern2.2">Pattern 2.2</xref></c>     
        <c>URI-R</c>     
        <c>URI-G</c>    
        <c>URI-M</c>
        <c>200</c> 
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>    
        <c>URI-R</c>     
        <c>URI-G</c>    
        <c>URI-G</c>
        <c>200</c> 
      </texttable>
      
      <t>The response by the Original Resource to the request shown
        in <xref target="Pattern1-Request1"></xref> is the same for
        all three cases. The use of headers and links in the response
        from URI-R is as follows:
      </t>
      
      <t><list style="symbols">
        <t>A "Vary" header that includes an "accept-datetime" value
        MUST NOT be provided.</t>
        <t>The response MUST NOT contain a "Memento-Datetime" header.</t>
        <t>The "Link" header SHOULD be provided.  It MUST NOT include
          a link with an "original" Relation Type.  If a preferred
          TimeGate is associated with the Original Resource, then it
          MUST include a link with a "timegate" Relation Type that has
          the URI-G of the TimeGate as Target IRI.  If a preferred
          TimeMap is associated with the Original Resource, then it
          SHOULD include a link with a "timemap" Relation Type that
          has the URI-T of the TimeGate as Target IRI.  Multiple
          "timegate" and "timemap" links can be provided to
          accommodate situations in which the server is aware of
          multiple TimeGates or TimeMaps for the Original
          Resource.</t>
      </list></t>
      
      <t><xref target="Pattern2-Response1"></xref> shows such a
      response. Note the absence of an "original" link as the
      responding resource is neither a TimeGate nor a Memento.</t>
      
      <figure title="Response from URI-R&lt;&gt;URI-G for Pattern 2" align="center" anchor="Pattern2-Response1">  
        <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: <http://arxiv.example.net/timegate/http://a.example.org/>
   ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8859-1
]]></artwork>
      </figure>
      
      <t>Once a user agent has obtained the URI-G of a remote TimeGate
        for the Original Resource, it can engage in datetime negotiation
        with that TimeGate. <xref target="Pattern2-Request2"></xref>
        shows the request issued against the TimeGate,
        whereas Sections <xref target="Pattern2.1" format="counter"></xref> through
        <xref target="Pattern2.3" format="counter"></xref> 
        detail the responses for various TimeGate implementation patterns.  
      </t>
      
      <figure title="User Agent Engages in Datetime Negotiation with Remote TimeGate" align="center" anchor="Pattern2-Request2">        
        <artwork align="left"><![CDATA[
HEAD /timegate/http://a.example.org/ HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 20 Mar 2001 20:35:00 GMT
Connection: close
]]></artwork>       
      </figure> 
      
      <section title="Pattern 2.1 - URI-R&lt;&gt;URI-G; 302-Style Negotiation; Distinct URI-M" anchor="Pattern2.1">
        
        <t>
          In case the TimeGate uses a 302 negotiation style, the response to the user agent's request of 
          <xref target="Pattern2-Request2"></xref> has a "302 Found"
          HTTP status code, and the "Location" header conveys the
          URI-M of the selected Memento.  The use of Memento response
          headers and links in the response from URI-G is as
          follows:</t>
        
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include
          the "accept-datetime" value.</t>
          <t>The response MUST NOT contain a "Memento-Datetime" header.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern2-Request2"></xref> is shown in
          <xref target="Pattern2.1-Response1"></xref>. It contains the
        mandatory "original" link that points back to the Original
        Resource associated with this TimeGate, and it shows the
        recommended "timemap" link that includes "from" and "until"
        attributes.</t>
        
        <figure title="Response from URI-G&lt;&gt;URI-R for Pattern 2.1" align="center" anchor="Pattern2.1-Response1">  
          <artwork align="left"><![CDATA[
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:02:14 GMT
Server: Apache
Vary: accept-datetime
Location: 
 http://arxiv.example.net/web/20010321203610/http://a.example.org/
Link: <http://a.example.org/>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org/>
   ; rel="timemap"; type="application/link-format"
   ; from="Tue, 15 Sep 2000 11:28:26 GMT"
   ; until="Wed, 20 Jan 2010 09:34:33 GMT"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>
        </figure>  

        <t>In a subsequent HTTP GET request, shown
          in <xref target="Pattern2.1-Request2"></xref>, the user
          agent can obtain the selected Memento by issuing an HTTP GET
          request against the URI-M that was provided in the
          "Location" header. The inclusion of the "Accept-Datetime"
          header in this request is not needed but will typically
          occur as the user agent is in datetime negotiation mode.</t>
        
        <figure title="User Agent Requests Selected Memento" align="center" anchor="Pattern2.1-Request2">       
          <artwork align="left"><![CDATA[
GET /web/20010321203610/http://a.example.org/ HTTP/1.1
Host: arxiv.example.net/
Accept-Datetime: Tue, 20 Mar 2001 20:35:00 GMT
Connection: close
]]></artwork>         
        </figure>
        
        <t>The response has a "200 OK" HTTP status code.  The use of
          Memento response headers and links in the response from
          URI-M is as follows:</t>
        
        <t><list style="symbols">
          <t>A "Vary" header that includes an "accept-datetime" value
          MUST NOT be provided.</t>
          <t>The response MUST include a "Memento-Datetime"
            header. Its value expresses the archival datetime of the
            Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern2.1-Request2"></xref> is shown in
          <xref target="Pattern2.1-Response2"></xref>. Note the provision of the recommended "timegate" and "timemap" links. 
          </t>
        
        <figure title="Response from URI-M for Pattern 2.1" align="center" anchor="Pattern2.1-Response2">   
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:15 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Wed, 21 Mar 2001 20:36:10 GMT
Link: <http://a.example.org/>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org/>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org/>
   ; rel="timegate"
Content-Length: 25532
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
        </figure> 
        
      </section>
      
      <section title="Pattern 2.2 - URI-R&lt;&gt;URI-G; 200-Style Negotiation; Distinct URI-M" anchor="Pattern2.2">
        
        <t>
          In case the TimeGate uses a 200 negotiation style, and each
          Memento has a distinct URI-M, the response to the user
          agent's request of
          <xref target="Pattern2-Request2"></xref> has a "200 OK" HTTP
          status code, and the "Content-Location" header conveys the
          URI-M of the selected Memento.  The use of Memento response
          headers and links in the response from URI-G is as
          follows:</t>
        
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include
          the "accept-datetime" value.</t>
          <t>The response MUST include a "Memento-Datetime"
            header. Its value expresses the archival datetime of the
            Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request
        of <xref target="Pattern2-Request2"></xref> is shown in
          <xref target="Pattern2.2-Response1"></xref>.</t>
        
        <figure title="Response from URI-G&lt;&gt;URI-R for Pattern 2.2" align="center" anchor="Pattern2.2-Response1">   
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Vary: accept-datetime
Content-Location: 
 http://arxiv.example.net/web/20010321203610/http://a.example.org/
Memento-Datetime: Wed, 21 Mar 2001 20:36:10 GMT
Link: <http://a.example.org/>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org/>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org/>
   ; rel="timegate"
Content-Length: 25532
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
        </figure> 
        
        <t>In a subsequent request, which is the same
          as <xref target="Pattern2-Request2"></xref> but with HTTP
          GET instead of HEAD, the user agent can obtain the
          representation of the selected Memento. It will be provided
          as the entity-body of a response that has the same Memento
          headers as
          <xref target="Pattern2.2-Response1"></xref>.</t> 
        
      </section>
      
      <section title="Pattern 2.3 - URI-R&lt;&gt;URI-G; 200-Style Negotiation; No Distinct URI-M" anchor="Pattern2.3">
        
        <t>
          In case the TimeGate uses a 200 negotiation style, but
          Mementos have no distinct URIs, the response to the user
          agent's request of
          <xref target="Pattern2-Request2"></xref> has a "200 OK" HTTP
          status code, and it does not contain a "Content-Location"
          nor "Location" header as there is no URI-M of the selected
          Memento to convey.  The use of Memento response headers and
          links in the response from URI-G is as follows:</t>
        
        <t><list style="symbols">
          <t>The "Vary" header MUST be provided, and it MUST include
          the "accept-datetime" value.</t>
          <t>The response MUST include a "Memento-Datetime"
            header. Its value expresses the archival datetime of the
            Memento.</t>
          <t>The "Link" header MUST be provided, and it MUST contain at
            least a link with the "original" Relation Type that has
            the URI-R of the Original Resource as Target IRI. The
            provision of other links is encouraged and is subject to
            the considerations described
            in <xref target="Link-Header-Relation-Types"></xref>.</t>
        </list></t>
        
        <t>The server's response to the request of <xref target="Pattern2-Request2"></xref> is shown in 
          <xref target="Pattern2.3-Response1"></xref>.</t>
        
        <figure title="Response from URI-G&lt;&gt;URI-R for Pattern 2.3" align="center" anchor="Pattern2.3-Response1">   
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Vary: accept-datetime
Memento-Datetime: Wed, 21 Mar 2001 20:36:10 GMT
Link: <http://a.example.org/>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org/>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org/>
   ; rel="timegate"
Content-Length: 25532
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
        </figure> 
        
        <t>In a subsequent request, which is the same
          as <xref target="Pattern2-Request2"></xref> but with HTTP
          GET instead of HEAD, the user agent can obtain the
          representation of the selected Memento. It will be provided
          as the entity-body of a response that has the same Memento
          headers as
          <xref target="Pattern2.3-Response1"></xref>.</t> 
        
      </section>
      
    </section>
    
    <section title="Pattern 3 - The Original Resource is a Fixed Resource" anchor="Pattern3">
      
      <t>This pattern does not involve datetime negotiation with a
      TimeGate, but it can be implemented for Original Resources that
      never change state or do not change anymore past a certain point
      in their existence, meaning that URI-R and URI-M coincide either
      from the outset or starting at some point in time. This pattern
      is summarized in the below table.  Examples are tweets or stable
      media resources on news sites.</t>
      
      <texttable anchor="Pattern3-Table" title="Pattern 3">  
        <ttcol align="center">Pattern</ttcol>    
        <ttcol align="center">Original Resource</ttcol>    
        <ttcol align="center">TimeGate</ttcol>     
        <ttcol align="center">Memento</ttcol>
        <ttcol align="center">Negotiation Style</ttcol>
        <c>Pattern 3</c>     
        <c>URI-R</c>     
        <c>-</c>    
        <c>URI-R</c>
        <c>-</c>
      </texttable>
      
      <t>
        Servers that host such resources can support the Memento
        framework by treating the stable resource (FixedResource as
        per <xref target="W3C.gen-ont-20090420"></xref>) as a Memento.
        The use of Memento response headers and links in responses
        from such a stable resource is as follows:
      </t>
      
      <t><list style="symbols">
        <t>A "Vary" header that includes an "accept-datetime" value
        MUST NOT be provided.</t>
        <t>The response MUST include a "Memento-Datetime" header. Its
          value expresses the datetime at which the resource became
          stable. Providing this value includes a promise that the
          resource has not changed since this datetime and will not
          change anymore beyond it.</t>
        <t>The "Link" header MUST be provided and MUST have a link
          with the "original" Relation Type that has the URI-R of the
          stable resource itself as Target IRI.</t>
      </list></t>
      
      <t><xref target="Pattern3-Response1"></xref> shows a response to
        an HTTP HEAD request for the resource with URI-R
        http://a.example.org/ that has been stable since March 20,
        2009.
      </t>
      
      <figure title="Response from URI-R=URI-M for Pattern 3" align="center" anchor="Pattern3-Response1">   
        <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Fri, 20 Mar 2009 11:00:00 GMT
Link: <http://a.example.org/>; rel="original"
Content-Length: 875
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
      </figure> 
         
    </section>
    
    <section title="Pattern 4 - Mementos without a TimeGate" anchor="Pattern4">
      
      <t>
        Cases may occur in which a server hosts Mementos but does not
        expose a TimeGate for them.  This can, for example, be the
        case if the server's Mementos result from taking a snapshot of
        the state of a set of Original Resources from another server
        as it is being retired.  As a result, only a single Memento
        per Original Resource is hosted, making the introduction of a
        TimeGate unnecessary. But it may also be the case for servers
        that host multiple Mementos for an Original Resource but
        consider exposing TimeGates too expensive. In this case, URI-R
        and URI-M are distinct, but a TimeGate is absent. This case is
        summarized in the below table.
      </t>
      
      <texttable anchor="Pattern4-Table" title="Pattern 4">  
        <ttcol align="center">Pattern</ttcol>    
        <ttcol align="center">Original Resource</ttcol>    
        <ttcol align="center">TimeGate</ttcol>     
        <ttcol align="center">Memento</ttcol>
        <ttcol align="center">Negotiation Style</ttcol>
        <c>Pattern 4</c>     
        <c>URI-R</c>     
        <c>-</c>    
        <c>URI-M</c>
        <c>-</c>
      </texttable>
      
      <t>Servers that host such Mementos without TimeGates can still
        support the Memento framework by providing the appropriate
        Memento headers and links. Their use is as follows for a
        response from URI-M:
      </t>
      
      <t><list style="symbols">
        <t>A "Vary" header that includes an "accept-datetime" value
        MUST NOT be provided.</t>
        <t>The response MUST include a "Memento-Datetime" header. Its
        value expresses the archival datetime of the Memento.</t>
        <t>The "Link" header MUST be provided, and it MUST have a link
          with the "original" Relation Type that has the URI-R of the
          associated Original Resource as Target IRI.  The provision
          of other links is encouraged and is subject to the
          considerations described
          in <xref target="Link-Header-Relation-Types"></xref>.</t>
      </list></t>

      <t><xref target="Pattern4-Response1"></xref> shows a response to
        an HTTP HEAD request for the Memento with URI-M
        http://arxiv.example.net/web/20010321203610/http://a.example.org/.
        Note the use of links: three links have the URI-M of the
        Memento as Target IRI and have respective Relation Types
        "memento", "first", and "last". This combination indicates
        that this is the only Memento for the Original Resource with
        Target IRI provided by the "original" link
        (http://a.example.org/) of which the server is aware. Note also
        that such a response does not imply that there is no server
        whatsoever that exposes a TimeGate; it merely means that the
        responding server neither provides nor is aware of the
        location of a TimeGate.
      </t>
      
      
      <figure title="Response from URI-M&lt;&gt;URI-R for Pattern 4" align="center" anchor="Pattern4-Response1">   
        <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Wed, 21 Mar 2001 20:36:10 GMT
Link: <http://a.example.org/>; rel="original",
 <http://arxiv.example.net/web/20010321203610/http://a.example.org/>
   ; rel="first last memento"
   ; datetime="Wed, 21 Mar 2001 20:36:10 GMT"
Content-Length: 25532
Content-Type: text/html;charset=utf-8
Connection: close
]]></artwork>  
      </figure> 

      

      
      </section>
    
    
    
 
    
    <section anchor="SpecialCases" title="Special Cases">
      
      <section anchor="SpecialCases-OR-nolink" title="Original Resource Provides No &quot;timegate&quot; Link">
      
      <t>
        Cases exist in which the response from the Original Resource
        does not contain a "timegate" link, including:</t>
      
      <t><list style="symbols">
        <t>The Original Resource's server does not support the Memento
        framework;</t>
        <t>The Original Resource no longer exists, and the responding
        server is not aware of its prior existence;</t>
        <t>The server that hosted the Original Resource no longer exists.</t>       
      </list></t>
      
      <t>In all these cases, the user agent should attempt to
        determine an appropriate TimeGate for the Original Resource,
        either automatically or interactively supported by the
        user.</t>
      
      </section>
      
      <section title="Server Exists but Original Resource No Longer Does" anchor="SpecialCases-OR">
        
        <t>
          Cases exist in which the server knows that an Original
          Resource used to exist, but no longer provides a current
          representation. If there is a preferred TimeGate for such a
          discontinued Original Resource, then the server MUST include
          a "timegate" link in responses to requests for it.  This may
          allow access to Mementos for the Original Resource even if
          it no longer exists.  A server's response to a request for
          the discontinued resource http://a.example.org/pic is
          illustrated in <xref target="SpecialCases-OR-404"></xref>.
        </t>
        
        <figure align="center" anchor="SpecialCases-OR-404" title="Response from an Original Resource That No Longer Exists">
          <artwork align="left"><![CDATA[
HTTP/1.1 404 Not Found
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: 
 <http://arxiv.example.net/timegate/http://a.example.org/pic> 
  ; rel="timegate"
Content-Length: 255
Content-Type: text/html; charset=iso-8909-1
Connection: close


]]></artwork>
        </figure>
        
      </section>
      
      <section title="Issues with Accept-Datetime" anchor="SpecialCases-AD">
        
        <t>The following special cases may occur regarding the "Accept-Datetime" header when a user agent issues a request 
        against a TimeGate:</t>
        
        <t><list style="symbols">
          <t>If the value of the "Accept-Datetime" is either earlier
            than the datetime of the first Memento or later than the
            datetime of the most recent Memento known to the TimeGate,
            the first or most recent Memento MUST be selected,
            respectively.</t>
          <t>
            If the value of the "Accept-Datetime" does not conform to
            the rfc1123-date construction rule of the BNF
            in <xref target="datetime-BNF"></xref>, the response MUST
            have a "400 Bad Request" HTTP status code.
          </t> 
          <t>
            If a user agent issues a request against a TimeGate and
            fails to include an "Accept-Datetime" request header, the
            most recent Memento SHOULD be selected.
          </t>       
        </list></t>
        
        <t>In all cases, the use of headers and links in responses is
          as described for TimeGates in the respective scenarios.</t>
            
      </section>
      
      

      

      
      <section anchor="SpecialCase-M-3XX" title="Memento of a 3XX Response">
        
        <t>Cases exist in which HTTP responses with 3XX status codes
          are archived.  For example, crawl-based Web archives
          commonly archive responses with HTTP status codes "301 Moved
          Permanently" and "302 Found", whereas Linked Data archives
          hold on to "303 See Other" responses.</t>
        
        <t>If the Memento requested by the user agent is an archived
          version of an HTTP response with a 3XX status code, the
          server's response MUST have the same 3XX HTTP status
          code. The use of other Memento headers is as described for
          Mementos in the respective scenarios.</t>
        
        <t>The user agent's handling of an HTTP response with a 3XX
          status code is not affected by the presence of a
          "Memento-Datetime" header.  The user agent MUST behave in
          the same manner as it does with HTTP responses with a 3XX
          status code that do not have a "Memento-Datetime"
          header.</t>
        
        <t>However, the user agent MUST be aware that the URI that was
          selected from the "Location" header of an HTTP response with
          a 3XX status code might not be that of a Memento but rather
          of an Original Resource. In the latter case, it SHOULD
          proceed by looking for a Memento of the selected Original
          Resource.</t>
        
        <t>For
          example, <xref target="SpecialCase-M-3XX-Response1"></xref>
          shows the response to an HTTP GET request for
          http://a.example.org issued on April 11, 2008. This response
          is archived as a Memento of http://a.example.org that has as
          URI-M
          http://arxiv.example.net/web/20080411000650/http://a.example.org.
          The response to an HTTP GET on this URI-M is shown
          in <xref target="SpecialCase-M-3XX-Response2"></xref>.  It
          is a replay of the original response with "Memento-Datetime"
          and "Link" headers added, to allow a user agent to
          understand the response is a Memento.
          In <xref target="SpecialCase-M-3XX-Response2"></xref>, the
          value of the "Location" header is the same as in the
          original response; it identifies an Original Resource.  The
          user agent proceeds with finding a Memento for this Original
          Resource.  Web archives sometimes overwrite the value that
          was originally provided in the "Location" header in order to
          point at a Memento they hold of the resource to which the
          redirect originally led.  This is shown
          in <xref target="SpecialCase-M-3XX-Response3"></xref>.  In
          this case, the user agent may decide it found an appropriate
          Memento.
        </t>
        
        <figure title="Response Is a Redirect" align="center" anchor="SpecialCase-M-3XX-Response1">       
          <artwork align="left"><![CDATA[
HTTP/1.1 301 Moved Permanently
Date: Fri, 11 Apr 2008 00:06:50 GMT
Server: Apache
Location: http://b.example.org
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>         
        </figure>
        
        <figure title="Response is a Memento of a Redirect; Leads to an Original Resource" 
          align="center" anchor="SpecialCase-M-3XX-Response2">       
          <artwork align="left"><![CDATA[
HTTP/1.1 301 Moved Permanently
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Fri, 11 Apr 2008 00:06:50 GMT
Location: http://b.example.org
Link: <http://a.example.org>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>         
        </figure>
        
        <figure title="Response is a Memento of a Redirect; Leads to a Memento" 
          align="center" anchor="SpecialCase-M-3XX-Response3">       
          <artwork align="left"><![CDATA[
HTTP/1.1 301 Moved Permanently
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Fri, 11 Apr 2008 00:06:50 GMT
Location: 
 http://arxiv.example.net/web/20080411000655/http://b.example.org
Link: <http://a.example.org>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>         
        </figure>
        
      </section>
      
      <section anchor="SpecialCases-M-4XX" title="Memento of Responses with 4XX or 5XX HTTP Status Codes">
        
        <t>Cases exist in which responses with 4XX and 5XX HTTP status
          codes are archived.  If the Memento requested by the user
          agent is an archived version of such an HTTP response, the
          server's response MUST have the same 4XX or 5XX HTTP status
          code. The use of headers and links in responses is as
          described for Mementos in the respective scenarios.</t>
        
        <t>For
          example, <xref target="SpecialCases-M-4XX-Response1"></xref>
          shows the 404 response to an HTTP GET request for
          http://a.example.org issued on April 11, 2008. This response
          is archived as a Memento of http://a.example.org that has
          as URI-M
          http://arxiv.example.net/web/20080411000650/http://a.example.org.
          The response to an HTTP HEAD on this URI-M is shown
          in <xref target="SpecialCases-M-4XX-Response2"></xref>.  It
          is a replay of the original response with "Memento-Datetime"
          and "Link" headers added, to allow a user agent to
          understand the response is a Memento.</t>
        
        <figure title="Response Is a 404" align="center" anchor="SpecialCases-M-4XX-Response1">       
          <artwork align="left"><![CDATA[
HTTP/1.1 404 Not Found
Date: Fri, 11 Apr 2008 00:06:50 GMT
Server: Apache
Content-Length: 255
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>         
        </figure>
        
        <figure title="Response Is a Memento of a 404" 
          align="center" anchor="SpecialCases-M-4XX-Response2">       
          <artwork align="left"><![CDATA[
HTTP/1.1 404 Not Found
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Fri, 11 Apr 2008 00:06:50 GMT
Link: <http://a.example.org>; rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org>
   ; rel="timemap"; type="application/link-format", 
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate"
Content-Length: 255
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>         
        </figure>
        
      </section>    
      
      <section anchor="SpecialCases-Sticky" title="Sticky &quot;Memento-Datetime&quot; and &quot;original&quot; Link for Mementos">
     
          
          <t>A response to an HTTP HEAD/GET request issued against a Memento:</t>
        
        <t><list style="symbols">
          <t>Includes a "Memento-Datetime" header that entails a
            promise that the response is archived, frozen in time. The
            value of the header expresses the archival datetime of the
            Memento.</t>
          <t>Includes a link in the HTTP "Link" header with an
            "original" Relation Type that unambiguously points to the
            Original Resource associated with the Memento. The Target
            IRI of the link is the URI-R of that Original
            Resource.</t>
          </list></t>
        
        <t>Both the "Memento-Datetime" header and the "original" link MUST be "sticky" in the following ways:</t>  
          
          <t><list style="symbols">
          
          <t>The server that originally assigns them MUST retain them
          in all responses to HTTP requests (with or without an
          "Accept-Datetime" request header) that occur against the
          Memento after the time of their original assignment, and the
          server MUST NOT change the value of the "Memento-Datetime"
          header nor the Target IRI of the "original" link.</t>
          <t>Applications that mirror Mementos at a different URI MUST
            retain them and MUST NOT change them unless mirroring
            involves a meaningful state change.  This allows, among
            others, duplicating a Web archive at a new location while
            preserving the value of the "Memento-Datetime" header and
            the link with the "original" Relation Type for the
            archived resources. For example, when mirroring, the
            "Last-Modified" header will be updated to reflect the time
            of mirroring at the new URI, whereas the value for
            "Memento-Datetime" will be maintained.</t>
          
          </list></t>

        </section>
      
      <section title="Intermediate Resources" anchor="SpecialCases-Intermediate">
        <t>
          An intermediate resource is a resource that issues a
          redirect to a TimeGate, to a Memento, or to another
          intermediate resource, and thus plays an active role in the
          Memento infrastructure. Intermediate resources commonly
          exist in Web archives on the path from a TimeGate to an
          appropriate Memento.
        </t>
        
        <t>A response of an intermediate resource has an HTTP status
          code indicative of HTTP redirection (e.g., 302) and uses
          Memento headers and links that allow user agents to recognize that the
          resource plays a role in the Memento framework:



</t>
        
        <t><list style="symbols">
          <t>A "Vary" header that includes an "accept-datetime" value
          MUST NOT be provided.</t>
          <t>The response MUST NOT include a "Memento-Datetime" header.</t>
          <t>The "Link" header MUST be provided, and it MUST have a
            link with the "original" Relation Type that has the URI-R
            of the associated Original Resource as Target IRI.  Links
            with "timegate", "timemap", and "memento" Relation Types
            are OPTIONAL and, if provided, MUST pertain to the
            Original Resource for which the user agent is trying to
            obtain a Memento.</t>
        </list></t>
        
        <t>
          A user agent MUST follow a redirection provided by an
          intermediate resource; multiple such redirections can be
          chained.
        </t>
        
        <t>Consider the case where a user agent follows the "timegate"
          link provided in <xref target="Pattern2-Response1"></xref>
          and engages in datetime negotiation with the assumed
          TimeGate in the manner shown in
          <xref target="Pattern2-Request2"></xref>. But instead of
          receiving a response as shown in
          <xref target="Pattern2.1-Response1"></xref>, it receives the one shown below in <xref target="Pattern5-Response1"></xref>. 
          Such a response is unambiguously recognizable as coming from an intermediate resource. 
        </t>   
        
        <figure title="Redirecting Resource Redirects to a TimeGate" align="center" anchor="Pattern5-Response1">  
          <artwork align="left"><![CDATA[
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Location: 
 http://arxiv.example.net/new-timegate/http://a.example.org/
Link: <http://a.example.org>; rel="original"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
]]></artwork>
        </figure> 
        
      </section>
      
      
      <section title="Resources Excluded from Datetime Negotiation" anchor="SpecialCases-donotnegotiate">
        
        <t>
          When delivering a Memento to a user agent, a Web archive
          commonly enhances that Memento's archived content, for
          example, by including a banner that provides branding and
          highlights the archival status of the Memento. The resources
          that are involved in providing such system-specific
          functionality, many times JavaScript or images, must be used
          in their current state.
        </t>
        
        <t>A server that generally supports datetime negotiation
          should make resources that need to be excluded from datetime
          negotiation recognizable. Doing so allows a user agent to
          refrain from attempting to access a Memento for them. In
          order to achieve this, the server SHOULD include a
          special-purpose link in the HTTP "Link" header when
          responding to an HTTP HEAD/GET request to a resource excluded
          from datetime negotiation. This link has
          "http://mementoweb.org/terms/donotnegotiate" as Target IRI
          and "type", defined in <xref target="RFC6903"></xref>, as
          the value of the "rel" attribute.  Other Memento headers as
          defined in <xref target="HTTP_Headers"/> SHOULD NOT be provided.</t>
        
        <t><xref target="donotnegotiate"></xref> shows the response to an HTTP HEAD request from a 
          resource excluded from datetime negotiation.</t>
        
        <figure title="Response to an HTTP HEAD Request from a Resource Excluded from Datetime Negotiation" align="center" anchor="donotnegotiate">  
          <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Link: <http://mementoweb.org/terms/donotnegotiate>; rel="type"
Content-Length: 238
Content-Type: application/javascript; charset=UTF-8
Connection: close
]]></artwork>
        </figure> 
        
      </section>
      
    </section>
    
    
  </section>
  
  <section title="TimeMaps: Content and Serialization" anchor="Pattern6">
    
    <t>A TimeMap is introduced to support retrieving a comprehensive
      list of all Mementos for a specific Original Resource known to a
      server.  The entity-body of a response to an HTTP GET request
      issued against a TimeMap's URI-T:</t>
    
    <t><list style="symbols">
      <t>MUST list the URI-R of the Original Resource that the TimeMap is about;</t>
      <t>MUST list the URI-M and archival datetime of each Memento for
        the Original Resource known to the server, preferably in a
        single document, or, alternatively in multiple documents that
        can be gathered by following contained links with a "timemap"
        Relation Type;
      </t>   
      <t>SHOULD list the URI-G of one or more TimeGates for the
      Original Resource known to the responding server;</t>
      <t>SHOULD, for self-containment, list the URI-T of the TimeMap itself;</t>
      <t>MUST unambiguously type listed resources as being Original Resource, TimeGate, Memento, or TimeMap.</t>
    </list></t>
    
    <t>
      The entity-body of a response from a TimeMap MAY be serialized
      in various ways, but the link-value format serialization
      described here MUST be supported.  In this serialization, the
      entity-body MUST be formatted in the same way as the value of an
      HTTP "Link" header, and hence MUST comply to the "link-value"
      construction rule of <xref target="Pattern6" />. The Link header field
      of <xref target="RFC5988"></xref>, and the media type of the
      entity-body MUST be "application/link-format" as introduced in
      <xref target="RFC6690"></xref>. Links contained in the entity-body MUST be interpreted as follows:</t>
    
    <t><list style="symbols">
      <t>The Context IRI is set to the anchor parameter, when
      specified;</t>
      <t>The Context IRI of links with the "self" Relation Types is the URI-T of the TimeMap, i.e., the URI of the resource from which the TimeMap was requested;</t>
      <t>The Context IRI of all other links is the URI-R of the Original Resource, 
        which is provided as the Target IRI of the link with an "original" Relation Type.</t>
    </list></t>
    
    
    <t>
      In order to retrieve the link-value serialization of a TimeMap,
      a user agent uses an "Accept" request header with a value set to
      "application/link-format".  This is shown
      in <xref target="Pattern6-Request1"></xref>.
    </t>
    
    <figure align="center" anchor="Pattern6-Request1" title="Request for a TimeMap">  
      <artwork align="left"><![CDATA[
GET /timemap/http://a.example.org/ HTTP/1.1
Host: arxiv.example.net
Accept: application/link-format;q=1.0
Connection: close
]]></artwork> 
    </figure>
    
    <t>If the TimeMap requested by the user agent exists, the server's
      response has a "200 OK" HTTP status code and the list of
      Mementos is provided in the entity-body of the response. Such a
      response is shown in <xref target="Pattern6-Response1"></xref>.
    </t> 
    
    <figure align="center" anchor="Pattern6-Response1" title="Response from a TimeMap">   
      <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Content-Length: 4883
Content-Type: application/link-format
Connection: close

 <http://a.example.org>;rel="original",
 <http://arxiv.example.net/timemap/http://a.example.org>
   ; rel="self";type="application/link-format"
   ; from="Tue, 20 Jun 2000 18:02:59 GMT"
   ; until="Wed, 09 Apr 2008 20:30:51 GMT",
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate",
 <http://arxiv.example.net/web/20000620180259/http://a.example.org>
   ; rel="first memento";datetime="Tue, 20 Jun 2000 18:02:59 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/", 
 <http://arxiv.example.net/web/20091027204954/http://a.example.org>
    ; rel="last memento";datetime="Tue, 27 Oct 2009 20:49:54 GMT"
    ; license="http://creativecommons.org/publicdomain/zero/1.0/",
 <http://arxiv.example.net/web/20000621011731/http://a.example.org>
   ; rel="memento";datetime="Wed, 21 Jun 2000 01:17:31 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/",
 <http://arxiv.example.net/web/20000621044156/http://a.example.org>
   ; rel="memento";datetime="Wed, 21 Jun 2000 04:41:56 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/",
 ...
]]></artwork>   
    </figure>  
    
    <section title="Special Cases" anchor="TimeMaps-SpecialCases">
    
    <section title="Index and Paging TimeMaps" anchor="Pattern6-IP">
    
    <t>Cases exist in which a TimeMap points at one or more other TimeMaps:</t>
    
    <t><list style="symbols">
      <t>Index TimeMap - A TimeMap can merely point at other TimeMaps
        and not list any Mementos itself.  This can happen when
        Mementos are spread across several archives that share a
        front-end.  An example is shown
        in <xref target="TimeMap-index"></xref>.</t>
      <t>Paging TimeMap - The number of available Mementos can require
        introducing multiple TimeMaps that can be paged. An example is
        shown in <xref target="TimeMap-paging"></xref>.  Note that a
        Paging TimeMap contains links to other TimeMaps but actually
        also lists Mementos.</t>
    </list></t>
    
    <t>In both cases, including the "from" and "until" attributes for
      "timemap" links is RECOMMENDED as a means to express the
      temporal span of Mementos listed in each TimeMap. Note that
      TimeMaps obtained by following a "timemap" link can contain
      links to further TimeMaps.</t>
    
    <figure align="center" anchor="TimeMap-index" title="Index TimeMap">   
      <artwork align="left"><![CDATA[
<http://a.example.org>;rel="original",
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate",
 <http://arxiv.example.net/timemap/http://a.example.org>
   ; rel="self";type="application/link-format",
 <http://arxiv1.example.net/timemap/http://a.example.org>
   ; rel="timemap";type="application/link-format"
   ; from="Wed, 21 Jun 2000 04:41:56 GMT"
   ; until="Wed, 09 Apr 2008 20:30:51 GMT",
 <http://arxiv2.example.net/timemap/http://a.example.org>
   ; rel="timemap";type="application/link-format"
   ; from="Thu, 10 Apr 2008 20:30:51 GMT"
   ; until="Tue, 27 Oct 2009 20:49:54 GMT",
 <http://arxiv3.example.net/timemap/http://a.example.org>
   ; rel="timemap";type="application/link-format"
   ; from="Thu, 29 Oct 2009 20:30:51 GMT"
]]></artwork>   
    </figure>
    
    <figure align="center" anchor="TimeMap-paging" title="Paging TimeMap">   
      <artwork align="left"><![CDATA[
<http://a.example.org>;rel="original",
 <http://arxiv.example.net/timegate/http://a.example.org>
   ; rel="timegate",
 <http://arxiv.example.net/timemap/1/http://a.example.org>
   ; rel="self";type="application/link-format"
   ; from="Tue, 20 Jun 2000 18:02:59 GMT"
   ; until="Wed, 09 Apr 2008 20:30:51 GMT",
 <http://arxiv.example.net/timemap/2/http://a.example.org>
   ; rel="timemap";type="application/link-format"
   ; from="Thu, 10 Apr 2008 20:30:51 GMT"
   ; until="Tue, 27 Oct 2009 20:49:54 GMT",
 <http://arxiv.example.net/timemap/3/http://a.example.org>
   ; rel="timemap";type="application/link-format"
   ; from="Thu, 29 Oct 2009 20:30:51 GMT"
   ; until="Fri, 31 Aug 2012 12:22:34 GMT"
 <http://arxiv.example.net/web/20000620180259/http://a.example.org>
   ; rel="memento";datetime="Tue, 20 Jun 2000 18:02:59 GMT", 
 <http://arxiv.example.net/web/20000621011731/http://a.example.org>
   ; rel="memento";datetime="Wed, 21 Jun 2000 01:17:31 GMT",
 <http://arxiv.example.net/web/20000621044156/http://a.example.org>
   ; rel="memento";datetime="Wed, 21 Jun 2000 04:41:56 GMT",
 ...
]]></artwork>   
    </figure>
    
    </section>
    
    <section anchor="Special-TM" title="Mementos for TimeMaps">
      
      <t>A TimeMap itself can act as an Original Resource for which a
        TimeGate and Mementos may exist. Hence, the response from a
        TimeMap could include a "timegate" link to a TimeGate via
        which prior TimeMap versions are available. And, in cases
        where URI-T=URI-R=URI-G (a TimeMap is an Original Resource
        that acts as its own TimeGate), an "original" link pointing at
        the TimeMap URI-T would be included.</t>
      
      <t>Therefore, caution is required in cases where a TimeMap for
        an Original Resource wants to explicitly express in a "Link"
        header for which Original Resource it is a TimeMap. It can do
        so by including a "timemap" link that has the URI-R of the
        Original Resource as Context IRI and the URI-T of the TimeMap
        as Target IRI. </t>
      
      <t>
        <xref target="SpecialCases-TM-Response1"></xref> shows the
        response to an HTTP HEAD request against a TimeMap that has
        http://arxiv.example.net/timemap/http://a.example.org as
        URI-T.  This TimeMap provides information about Mementos for
        the Original Resource that has http://a.example.org as URI-R.
        The response includes an "original" link pointing to the
        Original Resource that this TimeMap is about. Note the use of
        the "anchor" attribute in this link to convey the URI-R of
        that Original Resource.
      </t>
      
      <figure align="center" anchor="SpecialCases-TM-Response1" title="TimeMap Links to the Original Resource It Is about">   
        <artwork align="left"><![CDATA[
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Link: <http://arxiv.example.net/timemap/http://a.example.org> 
          ; anchor="http://a.example.org"; rel="timemap"
          ; type="application/link-format"
Content-Length: 0
Content-Type: application/link-format; charset=UTF-8
Connection: close
]]></artwork>   
      </figure>  
      
    </section>     
      
      </section>
    
  </section>
  
  <section anchor="IANA" title="IANA Considerations">
    
    <section anchor="headers" title="HTTP Headers">
    
    <t>
      IANA has registered the "Accept-Datetime" and
      "Memento-Datetime" HTTP headers (defined in
      <xref target="Accept-Memento-Datetime"></xref>) in the "Permanent
      Message Header Field Names" registry:
    </t>

<?rfc subcompact="yes" ?>      
      <t><list style="symbols">
        <t>Header field name: Accept-Datetime</t>
        <t>Applicable protocol: "http" (RFC 2616)</t>
        <t>Status: informational</t>
        <t>Author/Change controller: Herbert Van de Sompel, Los Alamos National
Laboratory, hvdsomp@gmail.com</t>
        <t>Specification document(s): this document</t>
      </list></t>
<?rfc subcompact="no" ?>      

<?rfc subcompact="yes" ?>      
      <t><list style="symbols">
        <t>Header field name: Memento-Datetime</t>
        <t>Applicable protocol: "http" (RFC 2616)</t>
        <t>Status: informational</t>
        <t>Author/Change controller: Herbert Van de Sompel, Los Alamos National Laboratory, hvdsomp@gmail.com</t>
        <t>Specification document(s): this document</t>
<?rfc subcompact="no" ?>
      </list></t>
    
    </section>
    
    <section anchor="links" title="Link Relation Types">
    
    <t>
      IANA has registered the Relation Types &quot;original&quot;,
      &quot;timegate&quot;, &quot;timemap&quot;, and &quot;memento&quot;
      (defined in <xref target="Link-Header-Relation-Types"></xref>) in the
      "Link Relation Types" registry:
    </t>
      
      <t><list style="symbols">
<?rfc subcompact="yes" ?>
        <t>Relation Name: original</t>
        <t>Description: The Target IRI points to an Original Resource.</t>
        <t>Reference: this document</t>
        <t>Notes: An Original Resource is a resource that exists or
        used to exist, and for which access to one of its prior states
        may be required.</t>
      </list></t>
<?rfc subcompact="no" ?>
<?rfc subcompact="yes" ?>      
      <t><list style="symbols">
        <t>Relation Name: timegate</t>
        <t>Description: The Target IRI points to a TimeGate
        for an Original Resource.</t>
        <t>Reference: this document</t>
        <t>Notes: A TimeGate for an Original Resource is a resource that is
        capable of datetime negotiation to support access to prior states of
        the Original Resource.</t>
      </list></t>
<?rfc subcompact="no" ?>      

<?rfc subcompact="yes" ?>
      <t><list style="symbols">
        <t>Relation Name: timemap</t>
        <t>Description: The Target IRI points to a TimeMap for an
        Original Resource.</t>
        <t>Reference: this document</t>
        <t>Notes: A TimeMap for an Original Resource is a resource from which
        a list of URIs of Mementos of the Original Resource is available.</t>
      </list></t>
<?rfc subcompact="no" ?>
<?rfc subcompact="yes" ?>
      <t><list style="symbols">
        <t>Relation Name: memento</t>
        <t>Description: The Target IRI points to a Memento,
        a fixed resource that will not change state anymore.</t>
        <t>Reference: this document</t>
        <t>Notes:  A Memento for an Original Resource is a
        resource that encapsulates a prior state of the Original Resource.</t>
<?rfc subcompact="no" ?>
      </list></t>
      
    </section>
    
  </section>


    <section anchor="Security" title="Security Considerations">

      <t>Provision of a "timegate" HTTP "Link" header in responses to requests
        for an Original Resource that is protected (e.g., 401 or 403 HTTP
        response codes) is OPTIONAL. The inclusion of this Link when
        requesting authentication is at the server's discretion; cases may
        exist in which a server protects the current state of a resource,
        but supports open access to prior states and thus chooses to
        supply this HTTP "Link" header.



  Conversely, the server may
        choose to not advertise the TimeGate URIs (e.g., they exist in an
        intranet archive) for unauthenticated requests.</t>
      
      <t>The veracity of archives and the relationships between
        Original Resources and Mementos is beyond the scope of this
        document.  Even in the absence of malice, it is possible for
        separate archives to have different Mementos for the same
        Original Resource at the same datetime if the state of the
        Original Resource was dependent on the requesting archive's
        user agent IP address, specific HTTP request headers, and
        possibly other factors.</t>
        
        <t>Further authentication, encryption, and other security-related issues are
        otherwise orthogonal to Memento.</t>
      
    </section>

  <section anchor="Acknowledgements" title="Acknowledgements">
    
    <t>The Memento effort is funded by the Library of Congress. 
      Many thanks to Kris Carpenter Negulescu, Michael Hausenblas, Erik Hetzner, Larry Masinter, Gordon Mohr, David Rosenthal, Ed Summers, 
      James Anderson, Tim Starling, Martin Klein, and Mark Nottingham for feedback.
      Many thanks to Samuel Adams, Scott Ainsworth, Lyudmilla Balakireva, Frank McCown, Harihar Shankar, 
      Brad Tofel, Andrew Jackson, Ahmed Alsum, Mat Kelly, and Ilya Kreymer for implementations that 
      informed the specification.</t>
    
  </section>

</middle>


  <back>

    <references title="Normative References">

&RFC5988;
&RFC6690;
&RFC2616;
&RFC2119;
&RFC5829;
&RFC6903;




    </references>

    <references title="Informative References">

&RFC1123;

<!-- draft-masinter-dated-uri; Expired -->
<reference anchor='DATED-URI'>
<front>
<title>The 'tdb' and 'duri' URI schemes, based on dated URIs</title>

<author initials='L' surname='Masinter' fullname='Larry Masinter'>
    <organization />
</author>

<date month='January' day='21' year='2012' />

<abstract><t>This document defines two URI schemes.  The first, 'duri' (standing for "dated URI"), identifies a resource as of a particular time. This allows explicit reference to the "time of retrieval", similar to the way in which bibliographic references containing URIs are often written.  The second scheme, 'tdb' ( standing for "Thing Described By"), provides a way of minting URIs for anything that can be described, by the means of identifying a description as of a particular time. These schemes were posited as "thought experiments", and therefore this document is designated as Experimental.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />

</reference>


      <reference anchor="W3C.gen-ont-20090420"
        target="http://www.w3.org/2006/gen/ont">
        <front>
          <title>Architecture of the World Wide Web</title>
          <author initials="T" surname="Berners-Lee" fullname="Tim Berners-Lee">
            <organization/>
          </author>
          <date day="20" month="April" year="2009" />
        </front>
      </reference>

      <reference anchor="W3C.REC-aww-20041215"
        target="http://www.w3.org/TR/webarch/">
        <front>
          <title>Architecture of the World Wide Web</title>
          <author initials="I" surname="Jacobs" fullname="Ian Jacobs">
            <organization/>
            </author>
            <author initials="N" surname="Walsh" fullname="Norman Walsh">
              <organization/>
          </author>
          <date day="15" month="December" year="2004" />
        </front>
      </reference>
      
      
      <reference anchor="Fitch"
        target="http://ausweb.scu.edu.au/aw03/papers/fitch/paper.html">
        <front>
          <title>Web site archiving - an approach to recording every materially different response produced by a website</title>
          <author initials="K" surname="Fitch" fullname="Kent Fitch">
            <organization/>
          </author>
          <date day="5" month="July" year="2003" />
        </front>
      </reference>

    </references>

    <section anchor="Appendix" title="Use of Headers and Relation Types per Pattern">

<!-- [rfced] During post-xml2rfc processing, we will remove the vertical space 
between "Link" and "rel="original"" in the "Response Header"
column. 

HVDS: OK
      
      --> 

<?rfc compact="no"?>
      <texttable anchor="Headers-Table" title="Memento Headers">  
        <ttcol align="center">Response Header</ttcol> 
        <ttcol align="center">Pattern</ttcol> 
        <ttcol align="center">Original Resource</ttcol>    
        <ttcol align="center">TimeGate</ttcol>     
        <ttcol align="center">Memento</ttcol>
        
        <c>Vary: accept-datetime</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>1</c>
        <c>1</c>
        <c>0</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>1</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>0</c>
        <c>1</c>
        <c>0</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>0</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>1</c>
        <c>NA</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>0</c>
        <c>NA</c>
        <c>1</c>
        
        <c>Memento-Datetime</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>0</c>
        <c>0</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>1</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>0</c>
        <c>0</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>0</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>1</c>
        <c>NA</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>0</c>
        <c>NA</c>
        <c>1</c>

        <c>Link</c>
        <c></c>
        <c></c>
        <c></c>
        <c></c>

        <c>rel="original"</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>0</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>1</c>
        <c>1</c>
        <c>1</c>
        <c></c>

        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>0</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>0</c>
        <c>1</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>1</c>
        <c>NA</c>
        <c>1</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>0</c>
        <c>NA</c>
        <c>1</c>
        
        <c>rel="timegate"</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>&gt;=0</c>
        <c>0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>NA</c>
        <c>NA</c>
        <c>NA</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>NA</c>
        <c>NA</c>
        <c>NA</c>
        
        <c>rel="timemap"</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>&gt;=0</c>
        <c>NA</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>&gt;=0</c>
        <c>NA</c>
        <c>&gt;=0</c>
        
        <c>rel="memento"</c>
        <c><xref target="Pattern1.1">Pattern 1.1</xref>; <xref target="Pattern1.2">Pattern 1.2</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern1.3">Pattern 1.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.1">Pattern 2.1</xref>; <xref target="Pattern2.2">Pattern 2.2</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern2.3">Pattern 2.3</xref></c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern3">Pattern 3</xref></c>
        <c>&gt;=0</c>
        <c>NA</c>
        <c>&gt;=0</c>
        <c></c>
        <c><xref target="Pattern4">Pattern 4</xref></c>
        <c>&gt;=0</c>
        <c>NA</c>
        <c>&gt;=0</c>
        
      </texttable>
<?rfc compact="yes"?>      

</section>

  </back>

</rfc>
