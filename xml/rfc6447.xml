<?xml version="1.0" encoding="US-ASCII" ?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?rfc rfcedstyle="yes"?>
<?rfc subcompact="no"?>
<?rfc toc="yes"?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes" ?>
<?rfc iprnotified="no" ?>
<?rfc strict="yes" ?>

<rfc number="6447" category="std" ipr="trust200902" submissionType="IETF">
  <front>
    <title abbrev="Location Filters">Filtering Location Notifications in the Session Initiation
      Protocol (SIP)</title>
    <author initials="R." surname="Mahy" fullname="Rohan Mahy">
      <organization>Individual</organization>
      <address>
        <postal>
          <street/>
          <city/>
          <region/>
          <country/>
        </postal>
      	<email>rohan@ekabal.com</email>
      </address>
    </author>
    <author fullname="Brian Rosen" initials="B.R" surname="Rosen">
      <organization>NeuStar</organization>
      <address>
        <postal>
          <street>470 Conrad Dr.</street>
          <city>Mars</city>
          <region>PA</region>
          <code>16046</code>
          <country>US</country>
        </postal>
        <phone>+1 724 382 1051</phone>
        <email>br@brianrosen.net</email>
      </address>
    </author>
    <author initials="H." surname="Tschofenig" fullname="Hannes Tschofenig">
      <organization>Nokia Siemens Networks</organization>
      <address>
        <postal>
          <street>Linnoitustie 6</street>
          <city>Espoo</city>
          <code>02600</code>
          <country>Finland</country>
        </postal>
        <phone>+358 (50) 4871445</phone>
        <email>Hannes.Tschofenig@gmx.net</email>
        <uri>http://www.tschofenig.priv.at</uri>
      </address>
    </author>
    <date month="November" year="2011"/>
    <area>RAI</area>
    <workgroup>GEOPRIV</workgroup>
    <keyword>geopriv</keyword>
    <keyword>location</keyword>
    <abstract>
      <t>This document describes filters that limit asynchronous location notifications to
        compelling events. These filters are designed as an extension to RFC 4661, an XML-based format for event
        notification filtering, and based on RFC 3856, the SIP presence event package. The resulting
        location information is conveyed in existing location formats wrapped in the Presence
        Information Data Format Location Object (PIDF-LO).</t>
    </abstract>
  </front>
  <middle>

    <!-- ******************************************************************************* -->

    <section anchor="introduction" title="Introduction">
      <t> Conveying location information encapsulated with a <xref target="RFC4119">Presence
        Information Data Format Location Object (PIDF-LO)</xref>
        document within SIP is described in <xref target="SIP-LOC"/>.
        An alternative signaling approach to location conveyance, which uses asynchronous communication, is available with
        the SIP event notification mechanisms (see RFC 3265 <xref target="RFC3265"/>). This approach conveys location information
        in PIDF-LO format using the presence event package <xref target="RFC3856"/>. This document
        focuses on the event notification paradigm. </t>
      <t>  
        Determining when to send event notifications with location information is technically more challenging
        than deciding when to send other categories of notifications, since location may be measured as a continuous gradient. Unlike notifications using
        discrete-valued quantities, it is difficult to know when a change in location is sufficiently large to
        warrant a notification. Event notifications <xref target="RFC3265"/> can be used with
        filters (see RFC 4661 <xref target="RFC4661"/>) that allow the number of notifications to
        be reduced. The mechanism described in this document defines an extension to RFC 4661 <xref
          target="RFC4661"/>, which limits location notification to events that are of relevance to
        the subscriber. These filters persist until they are replaced with a newer filter or until the subscription itself is terminated.</t>
      <t> The frequency of notifications necessary for various geographic location applications
        varies dramatically. The subscriber should be able to get asynchronous notifications with
        appropriate frequency and granularity, without being flooded with a large number of
        notifications that are not important to the application.</t>
      <t> This document defines new event filters and describes others using existing mechanisms
        that may be relevant to a subscriber in the context of location filtering. Based on the functionality defined in this document, notifications can be provided in the following cases: <list
          style="numbers">
          <t>the Target moves more than a specified distance since the last notification (see <xref
              target="movement"/>).</t>
          <t>the Target exceeds a specified speed (see <xref target="speed"/>).</t>
          <t>the Target enters or exits a 2-dimensional region, described by a circle or a polygon (see <xref
              target="enter"/>).</t>
          <t>one or more of the values of the specified civic location have changed for the location
            of the Target (see <xref target="value"/>). For example, the value of the
            civic address '&lt;A1&gt;' element has changed from 'California' to 'Nevada'.</t>
          <t>the type of location information requested (see <xref target="type"/>) changes, for example, from civic to geodetic location or vice versa.</t>
          <t>a certain amount of time passes (see <xref target="rate"/>).</t>
        </list></t>
    </section>

    <!-- ******************************************************************************* -->

    <section title="Terminology">
      <t> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
        NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
        described in <xref target="RFC2119">RFC 2119</xref>.</t>
      <t>This document reuses terminology from <xref target="RFC6280"/>.</t>
    </section>

    <!-- ******************************************************************************* -->

    <section title="Filter Definitions">
      <t>This specification builds on a number of other specifications, as noted in <xref
          target="introduction"/>. In order to reduce the number of options (and thereby decrease
        the chance of interoperability problems), the functionality described in the following 
        sub-sections of <xref target="RFC4661"/> MUST be implemented: the &lt;ns-bindings&gt; 
        element (see Section 3.3 of <xref target="RFC4661"/>); the &lt;filter&gt; element 
        (Section 3.4 of <xref target="RFC4661"/>); and the &lt;trigger&gt; element (Section 
        3.6 of <xref target="RFC4661"/>), except for the &lt;added&gt; and &lt;removed&gt; 
        sub-elements. </t>

      <section anchor="movement" title="Movement">
        <t> The &lt;moved&gt; element MUST contain a value in meters indicating the minimum
          distance that the resource must have moved from the location of the resource since the
          last notification was sent in order to trigger this event. 
          The distance MUST be measured
          in meters absolutely from the point of the last notification, and must include vertical movement. The &lt;moved&gt;
          element MUST NOT appear more than once as a child element of the &lt;filter&gt;
          element. </t>
        <t>
          <figure anchor="movement-example" title="Movement Filter Example">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set 
    xmlns="urn:ietf:params:xml:ns:simple-filter"
    xmlns:lf="urn:ietf:params:xml:ns:location-filter">
    <filter id="123" uri="sip:presentity@example.com">
        <trigger>
            <lf:moved>300</lf:moved>
        </trigger>
    </filter>
</filter-set>
    ]]></artwork>
          </figure>
        </t>
      </section>

      <section anchor="speed" title="Speed Changes">
        <t>Speed changes can be filtered by combining functionality from RFC 4661 with the PIDF-LO extensions for spatial orientation, speed, heading, and acceleration defined in
            <xref target="RFC5962"/>.
          The value of the 
          &lt;speed&gt; element from <xref target="RFC5962"/> MUST be
          defined in meters per second. Note that the 
          condition could be met by a change in any axis, including altitude.
        </t>
        <t><xref target="speed-example"/> shows an example for a trigger that fires when the speed
          of the Target changes by 3 meters per second.</t>
        <t>
          <figure anchor="speed-example" title="Speed Change Example">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set xmlns="urn:ietf:params:xml:ns:simple-filter">
    <ns-bindings>
        <ns-binding prefix="dyn" 
            urn="urn:ietf:params:xml:schema:pidf:dynamic"/>        
    </ns-bindings>
    <filter id="123" uri="sip:presentity@example.com">
        <trigger>
            <changed by="3">
              //dyn:speed
            </changed>
        </trigger>
    </filter>
</filter-set>
]]></artwork>
          </figure>
        </t>
        <t>An implementation MUST support &lt;ns-bindings&gt; to replace the namespace prefix. The XPath expression MUST start with a '//' followed by a single element. No other form of XPath expression 
		is supported. The
          &lt;changed&gt; element comes with a few attributes but only the 'by' attribute
          MUST be implemented by this specification.</t>
      </section>

      <section anchor="value" title="Element Value Changes">
        <t>Changes in values, for example related to civic location information, is provided by the
          base functionality offered with RFC 4661 utilizing the &lt;changed&gt; element.</t>


        <t>The following example illustrates a filter that triggers when the Target's location
          changes from 'FR' (France) to some other country.</t>
        <t>
          <figure anchor="value-change2" title="Element Value Change Example (Country Change)">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set xmlns="urn:ietf:params:xml:ns:simple-filter">
    <ns-bindings>
        <ns-binding prefix="ca" 
            urn="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"/>
    </ns-bindings>
    <filter id="123" uri="sip:presentity@example.com">
        <trigger>
            <changed from="FR">//ca:country</changed>
        </trigger>
    </filter>
</filter-set>
]]></artwork>
          </figure>
        </t>

        <t>
        At times when it is desirable to know if any one element of a list of CAtypes changes,
        then they have to be put into separate &lt;changes&gt; filters to ensure the subscriber is
          notified when any of the element values change. <xref target="value-change-individual"/>
shows such an example that illustrates the difference.</t>
        
        <t>
          <figure anchor="value-change-individual" title="Element Value Change Example">
            <preamble>(A change in value of ANY of the five tokens triggers an event.)</preamble>            
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set xmlns="urn:ietf:params:xml:ns:simple-filter">
    <ns-bindings>
        <ns-binding prefix="ca" 
            urn="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"/>
    </ns-bindings>
    <filter id="123" uri="sip:presentity@example.com">
           <trigger>
               <changed>//ca:country</changed>
           </trigger>
           <trigger>
               <changed>//ca:A1</changed>
           </trigger>
           <trigger>
               <changed>//ca:A2</changed>
           </trigger>
           <trigger>
               <changed>//ca:A3</changed>
           </trigger>
           <trigger>
               <changed>//ca:PC</changed>
           </trigger>
    </filter>
</filter-set>
]]></artwork>
          </figure>
        </t>


        <t>Finally, <xref target="value-change"/> shows an example where a notification is sent when the
          civic address tokens A3 and PC change (BOTH elements must change in order to let the
          &lt;trigger&gt; element evaluate to TRUE).        </t>
        
        <t>
          <figure anchor="value-change" title="Element Value Change Example">
            <preamble>(Only a change in BOTH tokens triggers an event.)</preamble>
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set xmlns="urn:ietf:params:xml:ns:simple-filter">
    <ns-bindings>
        <ns-binding prefix="ca" 
            urn="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"/>
    </ns-bindings>
    <filter id="123" uri="sip:presentity@example.com">
        <trigger>		
            <changed>//ca:A3</changed>
            <changed>//ca:PC</changed>
        </trigger>
    </filter>
</filter-set>
]]></artwork>
          </figure>
        </t>
        <t>Note: The civic address tokens country, A1, A2, ..., A6 are hierachical. It is likely that a change in one civic address token therefore leads to changes of tokens lower in the hierarchy, e.g., a change in A3 ('city or town') may cause a change in A4, A5, and A6.</t>
		
		<t>An implementation MUST support &lt;ns-bindings&gt; to replace the namespace prefix. The XPath expression MUST start with a '//' followed by a single element. 
		No other form of XPath expression is supported. No other variant is supported. The
          &lt;changed&gt; element comes with a few attributes and the 'by', 'to', and 'from'
          attribute MUST be implemented to support this specification.</t>
      </section>
      <section anchor="enter" title="Entering or Exiting a Region">
        <t> The &lt;enterOrExit&gt; condition is satisfied when the Target enters or exits a
          2-dimensional region described by a polygon (as defined in Section 5.2.2 of <xref
          target="RFC5491"/>) or a circle (as defined in Section 5.2.3 of <xref target="RFC5491"
          />). The &lt;enterOrExit&gt; element MUST contain either a polygon or a circle as a child
          element. The &lt;enterOrExit&gt; element MUST NOT have more than one polygon
          and/or circle. </t>
        <t> If the Target was previously outside the region, the notifier sends a notification when
          the Target's location is within the region with at least 50% confidence. Similarly, when a
          Target starts within the region, a notification is sent when the Target's location moves
          outside the region with at least 50% confidence.</t>
        <t>Note that having 50% confidence that the Target is inside the area does not correspond 
        to 50% outside.  The confidence that the location is within the region, plus the confidence
        that the location is outside the region is limited to the confidence of the location.  The
        total confidence depends on the confidence in the location, which is always less than 100% 
        (95% is recommended in <xref target="RFC5491"/>).  The benefit of this is that notifications
        are naturally limited: small movements (relative to the uncertainty of the location) at the 
        borders of the region do not trigger notifications. </t>
        <t><xref target="containment-circle"/> shows filter examples whereby a notification is sent
          when the Target enters or exits an area described by a circle, and <xref
            target="containment-polygon"/> describes an area using a polygon.</t>
        <t>
          <figure anchor="containment-circle"
            title="&lt;enterOrExit&gt; Circle Filter Example">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set 
    xmlns="urn:ietf:params:xml:ns:simple-filter"
    xmlns:lf="urn:ietf:params:xml:ns:location-filter" 
    xmlns:gml="http://www.opengis.net/gml"
    xmlns:gs="http://www.opengis.net/pidflo/1.0">

    <filter id="123" uri="sip:presentity@example.com">
        <trigger>
            <lf:enterOrExit>
                <gs:Circle 
                    srsName="urn:ogc:def:crs:EPSG::4326">
                    <gml:pos>42.5463 -73.2512</gml:pos>
                    <gs:radius 
                        uom="urn:ogc:def:uom:EPSG::9001"> 
                        850.24 
                    </gs:radius>
                </gs:Circle>
            </lf:enterOrExit>
        </trigger>
    </filter>
</filter-set>
              
            ]]></artwork>
          </figure>
<!-- [rfced] The following URL returns a "Not Found" error message.  Please let 
us know if any updates are required:

http://www.opengis.net/pidflo/1.0
-->
        </t>
        <t>
          <figure anchor="containment-polygon"
            title="&lt;enterOrExit&gt; Polygon Filter Example">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set 
    xmlns="urn:ietf:params:xml:ns:simple-filter"
    xmlns:lf="urn:ietf:params:xml:ns:location-filter" 
    xmlns:gml="http://www.opengis.net/gml">
    
    <filter id="123" uri="sip:presentity@example.com">
        <trigger>
            <lf:enterOrExit>
                <gml:Polygon srsName="urn:ogc:def:crs:EPSG::4326">
                    <gml:exterior>
                        <gml:LinearRing>
                            <gml:pos>43.311 -73.422</gml:pos>
                            <!--A-->
                            <gml:pos>43.111 -73.322</gml:pos>
                            <!--F-->
                            <gml:pos>43.111 -73.222</gml:pos>
                            <!--E-->
                            <gml:pos>43.311 -73.122</gml:pos>
                            <!--D-->
                            <gml:pos>43.411 -73.222</gml:pos>
                            <!--C-->
                            <gml:pos>43.411 -73.322</gml:pos>
                            <!--B-->
                            <gml:pos>43.311 -73.422</gml:pos>
                            <!--A-->
                        </gml:LinearRing>
                    </gml:exterior>
                </gml:Polygon>
            </lf:enterOrExit>
        </trigger>
    </filter>
</filter-set>
            ]]></artwork>
          </figure>
        </t>
      </section>

      <section anchor="type" title="Location Type">
        <t> The &lt;locationType&gt; element MAY be included as a child element of the
          &lt;what&gt; element. It contains a list of location information types that
          are requested by the subscriber. The following list describes the possible values: </t>
        <t>
          <list style="hanging">
            <t hangText="any:">The Notifier SHOULD attempt to provide location
information in all forms available to
              it.

<!-- [rfced] In the following, we have replaced LI with "location information", 
as this was the only instance in which LI appeared in this document.  Please
verify that this expansion is correct.  

Original:
   any:  The Notifier SHOULD attempt to provide LI in all forms
      available to it.
      
Authors: Thank you. That is the correct expansion.
-->
</t>
            <t hangText="geodetic:">The Notifier SHOULD return a location by value in the form of a
              geodetic location. </t>
            <t hangText="civic:">The Notifier SHOULD return a location by value in the form of a
              civic address. </t>
          </list>
        </t>
        <t> The Notifier SHOULD return the requested location type or types. The location types the
          Notifier returns also depends on the setting of the optional 'exact' attribute. If the
          'exact' attribute is set to "true", then the Notifier MUST return either the requested
          location type or no location information. The 'exact' attribute does not apply (is
          ignored) for a request for a location type of "any". </t>
        <t> In the case of a request for specific locationType(s) and the 'exact' attribute is
          "false", the Notifier MAY provide additional location types, or it MAY provide alternative
          types if the request cannot be satisfied for a requested location type.</t>
        <t>If the &lt;locationType&gt; element is absent, a value of "any" MUST be assumed
          as the default. </t>
        <t> The Notifier SHOULD provide civic and geodetic location information in the response in the same order in which they
          were included in the "locationType" element in the request, if both were explicitly requested. 
          Indeed, the primary advantage
          of including specific location types in a request when the 'exact' attribute is set to
          "false" is to ensure that one receives the available locations in a specific order. For
          example, a subscription for "civic" (with the 'exact' attribute set to "false") could
          yield any of the following location types in the response: </t>
        <t>
          <list style="symbols">
            <t>civic</t>
            <t>civic, geodetic</t>
            <t>geodetic (only if civic is not available)</t>
          </list>
        </t>
        <t> The default value of "false" for the 'exact' attribute allows the Notifier the option of
          returning something beyond what is specified, such as a set of location URIs when only a
          civic location was requested.</t>
        <t>An example is shown in <xref target="locationType"/> that utilizes the
          &lt;locationType&gt; element with the 'exact' attribute. </t>
        <t>
          <figure anchor="locationType" title="&lt;locationType&gt; Filter Example">
            <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<filter-set 
    xmlns="urn:ietf:params:xml:ns:simple-filter"
    xmlns:lf="urn:ietf:params:xml:ns:location-filter">
    <filter id="123" uri="sip:presentity@example.com">
        <what>
            <lf:locationType exact="true">
              geodetic
            </lf:locationType>
        </what>
    </filter>
</filter-set>
            ]]></artwork>
          </figure>
        </t>
      </section>

      <section anchor="rate" title="Rate Control">
        <t>
          <xref target="RFC6446"/> extends the SIP events framework by defining
   three Event header field parameters that allow a subscriber to set a
   minimum, a maximum, and an adaptive minimum of event notifications
   generated by the notifier.  This allows a subscriber to have overall
   control over the stream of notifications, for example to avoid being
   flooded.  Two of the parameters, namely "min-rate" (which specifies a
   minimum notification rate per second) and "max-rate" (which specifies
   a maximum notification rate per second) are used by this document.
   Only the implementation of these two attributes is required from the
   attributes defined in <xref target="RFC6446"/>.  Whenever the time since the most
   recent notification exceeds the interval corresponding to 
1 / "min-rate",
    the current state would be sent in its entirety, just like
   after a subscription refresh.
</t>
        <t>
   A notifier is required to send a NOTIFY request immediately after
   creation of a subscription.  If state is not available at that time,
   then the NOTIFY request may be sent with no content.  A separate
   NOTIFY containing location is subsequently generated so that the
   rate of notification since the last NOTIFY falls
   between "min-rate" and "max-rate".  An important use case for
   location-based applications focuses on the behavior of the initial
   NOTIFY message(s) and the information it returns, for example in case
   of emergency call routing.  When an initial NOTIFY is transmitted, it
   might not include complete state.
</t>
        <t>
          <figure anchor="rate-fig" title="SUBSCRIBE/NOTIFY with Rate Control">
            <artwork><![CDATA[           
   Subscriber          Notifier
       |---SUBSCRIBE(1)--->|  Create subscription (w/large value
       |<-------200--------|    for min-rate and max-rate)
       |<-----NOTIFY(2)----|  Return initial notify with no state
       |--------200------->|
       |        ...        |
       |<-----NOTIFY(3)----|  Return full state (between min-rate
       |--------200------->|    and max-rate)
       |---SUBSCRIBE(4)--->|  Update subscription (to update
       |<-------200--------|    min-rate and max-rate)
	]]></artwork>
          </figure>
        </t>
        <t>
          <xref target="rate-fig"/> shows a SUBSCRIBE/NOTIFY exchange.  The
initial SUBSCRIBE
   message (1) has filters attached and contains a "min-rate" rate
   control parameter.  In certain situations, it is important to obtain
   some amount of location information within a relatively short and
   pre-defined period of time, even if the obtained location information
   contains a high amount of uncertainty and location information with
   less uncertainty could be available at a later point in time.  An example is emergency
   call routing where an emergency services routing proxy may need to
   obtain location information suitable for routing rather quickly and
   subsequently a Public Safety Answering Point requests location
   information for dispatch.
</t>
        <t>
   To obtain location information in a timely fashion using the
   SUBSCRIBE/NOTIFY mechanism, it is RECOMMENDED that the initial
   SUBSCRIBE contain a "min-rate" rate control parameter (with a large
   value, corresponding to a very short delay before the next notification)
   that is updated in a later message to a more sensible value.
   This provides equivalent functionality to the 'responseTime'
   attribute in Section 6.1 of <xref target="RFC5985"/>.  
   The "min-rate" for this first
   request is therefore much larger (much more rapid) than the updated "min-rate" value. 
   Depending on the value
   in the "min-rate" parameter, the Notifier may immediately send the initial NOTIFY message
   (see message 2) without a body if no location information is available at this point
   in time.  The desired location information may then arrive in the
   subsequent NOTIFY message (see message 3).
   Updating the "min-rate" for the subscription can be performed in the 200 response (see
   message 3) to the NOTIFY that contains location state, or in a subsequent SUBSCRIBE 
   request (as in message 4).  
</t>
      </section>

    </section>

    <!-- ******************************************************************************* -->

    <section anchor="schema" title="XML Schema">
      <t>
        <figure anchor="schema-fig" title="XML Schema">
          <artwork><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema 
    targetNamespace="urn:ietf:params:xml:ns:location-filter"
    xmlns:filter="urn:ietf:params:xml:ns:location-filter"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" 
    xmlns:gml="http://www.opengis.net/gml">
 
    <xs:element name="enterOrExit" type="gml:GeometryPropertyType"/>
            
    <xs:element name="moved" type="filter:movedType"/>  
    
    <xs:complexType name="movedType">
       <xs:simpleContent>
          <xs:extension base="xs:double">
            <xs:anyAttribute namespace="##any" processContents="lax"/>
          </xs:extension>   
       </xs:simpleContent>
    </xs:complexType>
    
    <xs:element name="locationType" type="filter:locationTypeType"/>
    
    <xs:simpleType name="locationTypeBase">
        <xs:union>
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="any"/>
                </xs:restriction>
            </xs:simpleType>
            <xs:simpleType>
                <xs:restriction base="filter:locationTypeList">
                    <xs:minLength value="1"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:union>
    </xs:simpleType>
    
    <xs:simpleType name="locationTypeList">
        <xs:list>
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="civic"/>
                    <xs:enumeration value="geodetic"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:list>
    </xs:simpleType>
            
    <xs:complexType name="locationTypeType">
          <xs:simpleContent>
              <xs:extension base="filter:locationTypeBase">
                  <xs:attribute name="exact" type="xs:boolean"
                      use="optional" default="false"/>
              </xs:extension>
          </xs:simpleContent>
      </xs:complexType>        
</xs:schema>
            ]]></artwork>
        </figure>
      </t>

    </section>

    <!-- ******************************************************************************* -->

    <section title="Security Considerations">

      <t>This document specifies one element, namely filters, utilized in larger systems. As such, this
        document builds on a number of specifications for the security of the complete solution,
        namely </t>
      <t>
        <list style="symbols">
          <t> the SIP event notification mechanism, described in RFC 3265 <xref target="RFC3265"/>,
            defining the SUBSCRIBE/NOTIFY messages. </t>
          <t>the presence event package, described in RFC 3856 <xref target="RFC3856"/>, which is a
            concrete instantiation of the general event notification framework.</t>
          <t>the filter framework, described in RFC 4661 <xref target="RFC4661"/>, to offer the
            ability to reduce the amount of notifications being sent. </t>
        </list>
      </t>
      <t>Finally, this document indirectly (via the SIP presence event package) relies on PIDF-LO,
        described in RFC 4119 <xref target="RFC4119"/>, as the XML container that carries location
        information.</t>
      <t>Each of the documents listed above comes with a Security Considerations section but the
        security and privacy aspects are best covered by the SIP presence event package; see Section
        9 of <xref target="RFC3856"/>, and with the GEOPRIV architectural description found in <xref
          target="RFC6280"/>.</t>

      <t>The functionality offered by authorization policies to limit access to location information
        is provided by other protocols, such as Common Policy <xref target="RFC4745"/>, Geolocation
        Policy <xref target="GEO-POLICY"/>, or more recent work
around HTTP-Enabled Location Delivery (HELD) context
          <xref target="HELD"/>. Although <xref
          target="GEO-POLICY"/> defines a standardized format for geolocation
        authorization policies, it does not define specific policies for controlling filters.</t>
      <t> The functionality described in this document extends the filter framework with location-specific filters. Local policies might be associated with the usage of certain filter
        constructs and with the amount of notifications that specific filter settings might cause.
        Uploading filters have a significant effect on the ways in which the request is handled at a
        server. As a result, it is especially important that messages containing this extension be
        authenticated and authorized. RFC 4661 <xref target="RFC4661"/> discusses this security
        threat and proposes authentication and authorization solutions applicable to this
        specification. </t>
    </section>

    <!-- ******************************************************************************* -->

    <section title="IANA Considerations">

      <section title="URN Sub-Namespace Registration for
urn:ietf:params:xml:ns:location-filter">
        <t> This section registers a new XML namespace, as per the guidelines in <xref
            target="RFC3688"/>. </t>
        <t>
          <list style="hanging">
            <t hangText="URI:"> urn:ietf:params:xml:ns:location-filter</t>
            <t hangText="Registrant Contact:"> IETF, GEOPRIV working group,
              &lt;geopriv@ietf.org&gt;, as delegated by the IESG
              &lt;iesg@ietf.org&gt;. </t>
            <t hangText="XML:">
              <figure>
                <artwork>
                  <![CDATA[
BEGIN
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
          "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
     content="text/html;charset=iso-8859-1"/>
  <title>Location Filter Namespace</title>
</head>
<body>
  <h1>Namespace for PIDF-LO Location Filters</h1>
  <h2>urn:ietf:params:xml:ns:location-filter</h2>
  <p>See <a href="http://www.rfc-editor.org/rfc/rfc6447.txt">
         RFC 6447</a>.</p>
</body>
</html>
END
]]>
                </artwork>
              </figure>
            </t>
          </list>
        </t>
      </section>


      <section title="Schema Registration for location-filter">
        <t>This specification registers a schema, as per the guidelines in <xref target="RFC3688"/>.</t>
        <t>
          <list style="hanging">
            <t>URI: urn:ietf:params:xml:schema:location-filter</t>
            <t>Registrant Contact: IETF, GEOPRIV Working Group (geopriv@ietf.org), as delegated by
              the IESG (iesg@ietf.org).</t>
            <t>XML: The XML can be found as the sole content of <xref target="schema"/>.</t>
          </list>
        </t>
      </section>

    </section>

    <!-- ******************************************************************************* -->

    <section title="Contributors">
      <t>We would like to thank Martin Thomson and James Polk for their contributions to this
        document. </t>
    </section>

    <!-- ******************************************************************************* -->

    <section title="Acknowledgments">
      <t> Thanks to Richard Barnes, Alissa Cooper, Randall Gellens, Carl Reed,
Ben Campbell, Adam Roach, Allan Thomson, and James
        Winterbottom for their comments.</t>
      
      <t>Furthermore, we would like to thank Alexey Melnikov for his IESG review comments.</t>
    </section>

    <!-- ******************************************************************************* -->

  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="reference.RFC.2119" ?>
      <?rfc include="reference.RFC.4119" ?>
      <?rfc include="reference.RFC.4661" ?>
      <?rfc include="reference.RFC.3265" ?>
      <?rfc include="reference.RFC.3856" ?>
      <?rfc include="reference.RFC.5491" ?>

<!-- reference.I-D.ietf-geopriv-arch" -->
      <?rfc include="reference.RFC.6280" ?>

<!-- reference.I-D.ietf-sipcore-event-rate-control" -->

<reference anchor='RFC6446'>
<front>
<title>Session Initiation Protocol (SIP) Event Notification Extension for Notification Rate Control</title>

<author initials='A' surname='Niemi' fullname='Aki Niemi'>
    <organization />
</author>

<author initials='K' surname='Kiss' fullname='Krisztian Kiss'>
    <organization />
</author>

<author initials='S' surname='Loreto' fullname='Salvatore Loreto'>
    <organization />
</author>

<date month='November' year='2011' />

<abstract><t>This document specifies mechanisms for adjusting the rate of Session Initiation Protocol (SIP) event notifications.  These mechanisms can be applied in subscriptions to all SIP event packages.  This document updates RFC 3265.</t></abstract>

</front>

<seriesInfo name='RFC' value='6446' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-sipcore-event-rate-control-09.txt' />
</reference>



<!-- reference.I-D.singh-geopriv-pidf-lo-dynamic -->
      <?rfc include="reference.RFC.5962" ?>

      <reference anchor="GML" target="http://www.opengis.org/techno/implementation.htm">
<!-- [rfced] The following URL gets redirected.

   http://www.opengis.org/techno/implementation.htm

redirects to

   http://www.opengeospatial.org/

Should the URL be updated?
-->

        <front>
          <title>Open Geography Markup Language (GML) Implementation Specification</title>
          <author>
            <organization> OpenGIS </organization>
          </author>
          <date month="January" year="2003"/>
        </front>
        <seriesInfo name="OpenGIS" value="OGC 02-023r4"/>
      </reference>
    </references>

<!-- [rfced] The following reference appears in the document, but there is not 
a corresponding textual citation.  Please let us know where a citation should 
be inluded; otherwise, the reference will be deleted. 

   [GML]         OpenGIS, "Open Geography Markup Language (GML)
                 Implementation Specification", OpenGIS OGC 02-023r4,
                 January 2003,
                 <http://www.opengis.org/techno/implementation.htm>.
-->


    <references title="Informative References">
      <?rfc include="reference.RFC.3688" ?>
      <?rfc include="reference.RFC.4745" ?>

<!-- reference.I-D.ietf-geopriv-policy -->

<reference anchor='GEO-POLICY'>
<front>
<title>Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information</title>

<author initials='H' surname='Schulzrinne' fullname='Henning Schulzrinne'>
    <organization />
</author>

<author initials='H' surname='Tschofenig' fullname='Hannes Tschofenig'>
    <organization />
</author>

<author initials='J' surname='Cuellar' fullname='Jorge Cuellar'>
    <organization />
</author>

<author initials='J' surname='Polk' fullname='James Polk'>
    <organization />
</author>

<author initials='J' surname='Morris' fullname='John Morris'>
    <organization />
</author>

<author initials='M' surname='Thomson' fullname='Martin Thomson'>
    <organization />
</author>

<date month='October' day='14' year='2011' />

<abstract><t>This document defines an authorization policy language for controlling access to location information.  It extends the Common Policy authorization framework to provide location-specific access control.  More specifically, this document defines condition elements specific to location information in order to restrict access based on the current location of the Target.  Furthermore, this document defines two algorithms for reducing the granularity of returned location information.  The first algorithm is defined for usage with civic location information while the other one applies to geodetic location information.  Both algorithms come with limitations, i.e. they provide location obfuscation under certain conditions and may therefore not be appropriate for all application domains.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-geopriv-policy-25.txt' />
</reference>


<!-- reference.I-D.ietf-sipcore-location-conveyance" -->

<reference anchor='SIP-LOC'>
<front>
<title>Location Conveyance for the Session Initiation Protocol</title>

<author initials='J' surname='Polk' fullname='James Polk'>
    <organization />
</author>

<author initials='B' surname='Rosen' fullname='Brian Rosen'>
    <organization />
</author>

<author initials='J' surname='Peterson' fullname='Jon Peterson'>
    <organization />
</author>

<date month='September' day='4' year='2011' />

<abstract><t>This document defines an extension to the Session Initiation Protocol (SIP) to convey geographic location information from one SIP entity to another SIP entity.  The SIP extension covers end-to-end conveyance as well as location-based routing, where SIP intermediaries make routing decisions based upon the location of the Location Target.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-sipcore-location-conveyance-09.txt' />
</reference>


<!-- reference.I-D.winterbottom-geopriv-held-context -->

<reference anchor='HELD'>
<front>
<title>Location URI Contexts in HTTP-Enabled Location Delivery (HELD)</title>

<author initials='J' surname='Winterbottom' fullname='James Winterbottom'>
    <organization />
</author>

<author initials='H' surname='Tschofenig' fullname='Hannes Tschofenig'>
    <organization />
</author>

<author initials='M' surname='Thomson' fullname='Martin Thomson'>
    <organization />
</author>

<date month='October' day='21' year='2009' />

<abstract><t>This document describes a protocol extension for the HTTP-Enabled Location Delivery (HELD) protocol.  It allows a Target to manage their location information on a Location Information Server (LIS) through the application of constraints invoked by accessing a location URI.  Constraints are described that allow control over how long the URI is valid for and the access policy used when a location URI is accessed.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-held-context-05.txt' />
</reference>


<!-- reference.I-D.ietf-geopriv-http-location-delivery" -->
      <?rfc include="reference.RFC.5985" ?>

    </references>
  </back>
</rfc>