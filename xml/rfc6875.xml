<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc5632 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5632.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="no"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<?rfc rfcedstyle="yes" ?>

<rfc number="6875" category="info" submissionType="IRTF"
    ipr="trust200902" consensus="no">

<!-- ***** FRONT MATTER ***** -->

<front>

  <title abbrev="P2P Experiments in Japan">
The P2P Network Experiment Council's
Activities and Experiments
with Application-Layer Traffic Optimization (ALTO)
in Japan
  </title>

  <author fullname="Satoshi Kamei" initials="S.K." surname="Kamei">
    <organization abbrev="NTT Communications">NTT Communications Corporation</organization>
    <address>
      <postal>
        <street>Granpark Tower 16F, 3-4-1 Shibaura</street>
        <city>Minato-ku</city>
        <region>Tokyo</region>
        <code>108-8118</code>
        <country>Japan</country>
      </postal>
      <phone>+81-50-3812-4697</phone>
      <email>skame@nttv6.jp</email>
    </address>
  </author>

  <author fullname="Tsuyoshi Momose" initials="T.M." surname="Momose">
     <organization abbrev="Cisco Systems">Cisco Systems G.K.</organization>
     <address>
       <postal>
         <street>9-7-1 Akasaka</street>
         <city>Minato-ku</city>
         <region>Tokyo</region>
         <code>107-6227</code>
         <country>Japan</country>
       </postal>
       <phone>+81-3-6738-5154</phone>
       <email>tmomose@cisco.com</email>
     </address>
  </author>

  <author fullname="Takeshi Inoue" initials="T.I." surname="Inoue">
    <organization abbrev="NTT Communications">NTT Communications Corporation</organization>
    <address>
      <postal>
        <street>Kuredo Hakushima Building 3F, 14-15 Higashihakushimacho</street>
        <city>Chuo-ku, Hiroshima-City</city>
        <region>Hiroshima</region>
        <code>730-0004</code>
        <country>Japan</country>
      </postal>
      <phone>+81-82-563-5030</phone>
      <email>inoue@jp.ntt.net</email>
    </address>
  </author>


  <author fullname="Tomohiro Nishitani" initials="T.N." surname="Nishitani">
    <organization abbrev="NTT Communications">NTT Communications Corporation</organization>
    <address>
      <postal>
        <street>1-1-6, Uchisaiwaicho</street>
        <city>Chiyodaku</city>
        <region>Tokyo</region>
        <code>100-8019</code>
        <country>Japan</country>
      </postal>
      <phone>+81-50-3812-4742</phone>
      <email>tomohiro.nishitani@ntt.com</email>
    </address>
  </author>

  <date month="February" year="2013" />

  <!-- Meta-data Declarations -->
  <area>IRTF</area>
  <workgroup>Peer-to-Peer</workgroup>

  <keyword>overlay network, content delivery network, peer-to-peer, traffic engineering, experiments in Japan</keyword>

  <abstract>

    <t>
  This document describes experiments that clarify how an approach 
  similar to Application-Layer Traffic Optimization (ALTO) was 
  effective in reducing network traffic.  These experiments were 
  performed in Japan by the P2P Network Experiment Council 
  in an attempt to harmonize peer-to-peer (P2P) technology with network 
  infrastructure.  Based on what was learned from these experiments, 
  this document provides some suggestions that might be useful for 
  the ALTO architecture and especially for application-independent 
  ALTO-like server operation.
    </t>
  </abstract>
</front>



<middle>
  <section title="Introduction">
    <t>
      An overlay network, which is used by P2P and other applications, offers
the advantage of allowing flexible provisioning of services while hiding the
lower-layer network.



      The disadvantage is that inefficient routing without considering
the lower-layer network may cause increasing the network load.


      Several proposals have been made to build an overlay network that takes into account the information about the lower-layer network <xref target="INFOCOMM2009"/> <xref target="IEEEJOURNAL2004" />.
      Since the management of the Internet is highly distributed, it is
difficult to implement such proposals, and thus to optimize a network, without the cooperation of network providers.
    </t>
    <t>
      Recently, the controversy between the overlay network and the
      network providers about network resource wastefulness has been rekindled.
      Under these circumstances, some researchers have studied overlay-network
control technology that takes into account the network topology information obtained from network providers.
    </t>

    <t>
  One research effort regarding this issue were experiments planned
  and performed by the P2P Network Experiment Council in Japan.  This
  document reports on these experiments and the issues they
  addressed.
    </t>
    <t>
  These experiments were performed from 2007 to 2008, because P2P
  traffic decreased after Japanese copyright law was revised.  While
  more recently, the dominant traffic in Japan, the United States,
  and elsewhere has been HTTP-based flash streaming, a large amount
  of traffic in Asia (outside Japan) is still P2P traffic, like
  P2P streaming <xref target="sandvine"/>, and P2P technology is very useful in such a
  real-time streaming area.
    </t>

    <t>
      Our experience in this experiment might be useful for ALTO
      architecture, especially for application-independent and multi-application ALTO-like server operations.  We suggest that
      a generic measurement mechanism is important because each
      application has different mechanism, which makes it difficult to
      compare their effectiveness.
    </t>
    <t>
     This document is a product of the P2P Research Group (RG). 
     The views in this document were considered controversial by the P2P RG, but the RG reached a consensus that the document should still be published.
    </t>
  </section>

  <section title="Background in Japan">
    <!--2.1-->
    <section title="P2P Traffic">
      <t>
        As of 2008, the world's most popular P2P file-sharing
        application, BitTorrent, was not widely deployed in Japan.
        Instead, other file-sharing P2P applications specific to Japan,
        such
        as <xref target="winny">Winny</xref>
        and <xref target="share">Share</xref>, still account for 40% of the Internet
        traffic in Japan, even though many those P2P users were
        arrested for sharing illegal files with these P2P applications.
      </t>
      <t>
        Each P2P file-sharing application has a unique protocol and
        none have a large market share, therefore making it hard to
        control them effectively.
      </t>
    </section>
    <!--2.2-->
    <section title="Impact on Network Infrastructure">
      <t>
        One advantage of using P2P technology for content
        delivery is that peers exchange content directly among
        themselves without server bottleneck.  This reduces the load on servers.  Also, P2P
        applications can reduce upstream traffic from an origin
        content server. This reduces server cost dramatically.
      </t>
      <t>
  	 It is also known that server cost could be reduced with P2P
        technology.  However, the story is quite different for
        network providers.
	 From the viewpoint of network providers, the
        traffic that content servers generate has shifted to the edge
        network and the amount of traffic has not necessarily been
        reduced by using P2P technology for reducing server cost.
	 Another problem for network providers is that 
        extremely inefficient routing may be selected because overlay network systems are configured
        without any regard to the structure of the lower-layer
        network or network geometry.
      </t>
      <t>
        In some cases, the total amount of traffic on the Internet used to be limited by the capacity of servers.
	 For those cases, P2P technology can improve the scalability of servers; however, it may exhaust network resources.
	 Moreover, using P2P applications remarkably increases the volume of traffic per user.
      </t>
      <t>
        Faced with an increase in the load on network infrastructure,
        network providers are compelled to take actions to overcome
        the sudden increase in facilities' costs. Representative
        actions include placing content in Internet Exchanges (IXs) or data centers,
        introducing bandwidth control, and raising access
        fees <xref target="mic" />.
      </t>
      <t>
        As mentioned above, the dominant traffic currently in Japan,
        the US, and elsewhere, is HTTP-based flash streaming.
        However, a large amount of traffic in Asia (outside Japan) is P2P traffic, like
        P2P Streaming <xref target="sandvine" />,
        and P2P technology is very useful in such real-time streaming.
        The
        increase in traffic arising from such a shift may be a great
        threat to the network.
      </t>
    </section>

    <!-- 2.3 -->
    <section title="Overview of the P2P Network Experiment Council">
      <t>
        In order to reduce Internet traffic and encourage legitimate
        use of P2P technologies, in 2006 the Japanese government 
        established a new council called the P2P Network Experiment Council,
        in conjunction with commercial P2P application vendors and ISPs.
      </t>

      <t>
        The council developed regulations that
        include guidelines such as giving advance notice to
        heavy users before
        restricting their bandwidth. In accordance with
        the regulations, some ISPs introduced solutions that reduce
        traffic caused by P2P file-sharing applications.
      </t>
      <t>
        In addition, the council, along with ISPs, carriers, contents providers, and P2P system vendors, looked for new ways
        to control traffic by commercial P2P applications.
        In this work, the council performed experiments that introduced
        an ALTO-like system and observed how the traffic was reduced 
        when it was redirected to proper peers on the real Internet in Japan.
      </t>

      <t>
In our experiment, the council deployed  hint servers, which are
described in <xref target="hintserver"/>.
Hint servers run a protocol that offers network distances to peers,
and these distances are disclosed to P2P application vendors.
</t>

<t>
Using hint servers, P2P application vendors can introduce ALTO concepts easily into their P2P distribution systems.
Because the protocol used by hint servers, as defined by the council, is independent of specific P2P application vendors like BitTorrent.
The protocol needs to gather network information from ISPs so it can provide network distance to peers. However, many ISPs dislike disclosing such information to others.
Therefore, hint servers are designed to offer little information about
an ISP's network architecture to P2P application vendors.
</t>

<t>
To monitor the traffic of peers, the council also deployed a dummy
node, which is described in <xref target="dummynode"/>.
      </t>

      <t>
        The remainder of this memo provides an overview of the experiments.
      </t>
    </section>
  </section>


  <section title="Objectives of the P2P Network Experiment Council">
    <t>
      The Japanese Ministry of Internal Affairs and Communications, which has jurisdiction over information and
      communication systems in Japan, held meetings of an advisory
      panel on network neutrality in 2006 and 2007 in order to study
      issues related to next-generation networks, such as how to
      ensure fairness in the use of networks and how to define
      fairness in the cost burden. The panel took an interest in P2P
      technology as a solution to the impending traffic saturation in
      the backbone network resulting from the rapid expansion of
      broadband access in Japan, and it formed a "Working Group on the P2P Network", which carried out an intensive study of P2P networks.
      </t>
      <t>
      The working group reported that it would be necessary to undertake the following four activities, which are intended to encourage the government to adopt relevant policies <xref target="MICreport"></xref>:
      </t>
      <t>
      <list style="symbols">
      <t>Formulate guidelines on P2P file-delivery applications to be self-imposed by the industry.</t>
      <t>Promote feasibility tests of P2P networks.</t>
      <t>Study the current state of traffic control and promote the sharing of information.</t>
      <t>Hold working group meetings about traffic control.</t>
      </list></t>
      <t>
      The first two proposals led to the establishment of the P2P
      Network Experiment Council, supported by the Japanese Ministry of Internal
      Affairs and Communications <xref target="P2PNEC" /> <xref target="P2PNECen" />.
      The Council, with membership from P2P delivery providers,
      content holders, and network providers, began a variety of
      delivery experiments, which were expected to strengthen
      cooperative control between different layers. In contrast to
      P4P (Proactive Network Provider Participation for P2P), which takes a relatively top-down approach of adopting an architecture based on a proposal from a university, the Council is characterized by its bottom-up approach.
      The aim of establishing the Council was described as follows
      (translated from <xref target="p2pfmmc"/>).

<list style="empty">
      <t>
     The rapid growth of broadband access enables content delivery
     systems to deliver high-quality and high-volume videos securely and
     efficiently.  Although P2P technology is an effective technology
     for this requirement, it still has some issues to be coped with.
     Therefore, the "P2P Network Experiment Council" was established
     with the support of the Japanese Ministry of Internal Affairs and
     Communications, with its secretariat set up within the Foundation
     for MultiMedia Communications (FMMC), in order to formulate
     guidelines for providers and conduct feasibility tests so that
     users can receive video delivery services safely.
      </t>
      </list></t>

      <t>
      The activities of the P2P Network Experiment Council can be
      classified into two categories. The first is formulating guidelines for promoting the commercial
      use of P2P technology. These guidelines will enable users to
      use P2P technology safely and will give providers clear rules they must observe.
      The second is feasibility testing of P2P
      technology. <xref target="details"/> describes experiments
      conducted in 2007 and 2008.
      </t>
      </section>

  <section title="Details of the Experiment" anchor="details">
    <t>
      The Council 
      investigated data offered by the members of the Council and learned that the server cost could be
      reduced by using P2P technology for content delivery.  For
      example, the data from the vendors showed the following:
      <list>
        <t>
          Traffic was reduced by 90% with UGLive by Utagoe, Inc. <xref
          target="utagoe" />.
        </t>

        <t>
            The cost of delivering to tens of thousands of subscribers
            was reduced by 80% with BBbroadcast with TV Bank
            Corp. <xref target="TVBank" />
        </t>
      </list>
    </t>
    <t>
      On the other hand, these reduced server costs may have affected the
      network load.  One of the goals of our experiments was to
      visualize the impact and propose an architecture to reduce
      network load caused by these new technologies.
    </t>
    <t>
      In order to visualize the reduction of network cost, we modeled
      P2P applications and a multi-ISP environment. This model was
      also needed for visualizing the effectiveness of the ALTO-like
      approach.
    </t>


    <!--3.1-->
    <section title="Dummy Node" anchor="dummynode">
      <t>
        As mentioned above, while the effect of using P2P
        technology to reduce the traffic and the load on servers is
        well known; however, traffic behavior in the inter-ISP area is not known.
        In Japan, the
        ISPs and IXes cooperated to create a backbone traffic report <xref target="impact_user_traffic" />.
        However, the measurements gathered for that report required capturing packets on
        subscribers' lines in order to determine the end users' activities.

        It is not realistic to measure the behavior of P2P
        applications at user terminals connected to the Internet
        because that would require a large-scale arrangement for
        measurement, such as using deep packet inspection (DPI) on
        aggregated lines.
      </t>
      <t>
        To solve these problems, we put several nodes called 'dummy nodes' in the ISP's networks.
	 The dummy nodes emulate an end user's PC running P2P applications.
	 Every P2P node provided by participating vendors in the experiment was configured so it always contacted the hint server.
      </t>
      <t>
        By introducing dummy nodes and measuring the traffic on them, we were able to observe and evaluate how
        much the P2P applications affected the networks.  Since this method can't measure
        every subscriber's traffic, the accuracy is less than
        other methods.  However, using dummy nodes makes it possible to adapt to
        situations in which many different P2P applications coexist on a
        network.  We decided that using dummy nodes was suitable for these experiments.

      </t>
      <t>
        A dummy node consisted of an Intel PC server running Linux (CentOS),
VMWare, and Windows XP on VMWare.  With this configuration, all
packets can be captured without any impact on the behavior of the network, nodes, or
applications.
        Also, this configuration enabled us to use different P2P applications for Windows and evaluate them generally.

      </t>
      <t>
        To see behaviors of the node, incoming and outgoing packets are captured on Linux because every packet is transmitted through it.
        To see flow information in these experiments, we captured the source and destination
        addresses, port number, amount of traffic, and start and end times.

      </t>
      <t>
	 We placed 60 dummy nodes on access networks of 40 different
        ISPs. They were placed as close as possible to the subscriber
        in each network.
      </t>


<figure anchor="dummy_node" title="Dummy node">
<artwork>
+----------------------+
|+--------------------+|
||+------------------+||
||| P2P Application  |||
|||    Windows XP    |||
|||        +--+      |||
||+--------|N |------+||
||  VMware |e |       ||
|+---------|t |-------+|
|   Linux  |IF| capture|
+----------|  |--------+
          +--+
</artwork>
</figure>

    </section>
  </section>

  <!--4.2-->
  <section title="Hint Servers" anchor="hintserver">


    <t>
      Since fiber to the home (FTTH) has rapidly spread
      all over Japan, bottlenecks in IP networks have been shifting from access
      networks to backbone networks and equipment, such as bandwidth
      between ISPs and capacity in IXs.  Under these circumstances,
      the Council proposed less restrictive and more flexible cooperation between ISPs
      than existent <xref target="p4p">P4P experiments</xref>.
      The proposed method consists of the following elements: (1) P2P
      clients, (2) P2P control servers, and (3) a hint server
      (specifically, a peer selection hint server). P2P clients and
      control servers are existing systems, but
      whether the P2P control servers exist is application dependent. The hint server is a server
      that provides a hint for peer selection and plays a
      role equivalent to that of the ALTO server.  Note that this
      proposal was based on results of experiments using dummy
      nodes. The results showed that it was possible to reduce
      unnecessary traffic that flows across the boundaries of
      geographical districts or ISPs by providing information
      about the physical network to P2P applications.
    </t>
    <t>

	When a peer joins the network, it registers its location information
(IP address) and supplementary information (line speed, etc.)
with the hint server.


	The hint server calculates the network distance between peers (P2P clients) based on network topology information obtained from the ISP and generates a priority table for peer selection.
	The hint server returns the table to the peer.
    </t>
    <t>
      If all information is public, the above procedure can
      produce results that are nearly optimal. However, some
      information held by ISPs is often confidential. Also, in some cases, the volume of
      calculation required to process all information can be
      excessive. To avoid these problems, the plan is to conduct
      experiments with a limited set of functions, analyze the
      results, and gradually expand the scope of optimization.
    </t>
    <t>
      A control mechanism that makes use of all possible information
      is difficult not only technically but also because it requires
      coordination among providers. In light of these difficulties,
      the council has been limiting the implementation and
      experiments to the technical scope.
    </t>


    <t>
    <xref target="Peer_selection_hint_server" /> shows an outline of the hint server.
    </t>
    <figure align="center" anchor="Peer_selection_hint_server"
	     title="Hint server for peer selection">


      <artwork align="center">
        <![CDATA[
+---------+   GetLocation    +-------------GeoIP DB Server---------+
|         |  +-----------+   |   +----------+      +-----------+   |
|         |--|IP Address |-->|   | GeoIP DB |      |BGP daemon |   |
|         |  +-----------+   |   +----------+      +-----------+   |
|         |                  | +-------------+  +----------------+ |
|         |  +-----------+   | |  District   |  |    Routing     | |
|         |--|AS Code:   |---| | Information |  |Information(BGP)| |
|         |  |Regional   |   | |             |  |                | |
|P2P Peers|  |Information|   | |   Range of  |  |AS Code(origin) | |
|   or    |  +-----------+   | | IP Addresses|  |                | |
| Control |                  | +-------------+  +----------------+ |
| Server  |                  +-------------------------------------+
|         |                                  |      ^
|         |  PeerSelection                   v      |
|         |  +-----------+   +--------------------------------------+
|         |--|IP Address |-->| +--Priority Node Selection System--+ |
|         |  |    List   |   | |                                  | |
|         |  +-----------+   | |     Peer Candidate Ranking       | |
|         |  +-----------+   | |                                  | |
|         |--|  Ranking  |-->| +----------------------------------+ |
|         |  +-----------+   +--------------------------------------+
+---------+
]]></artwork>

    </figure>
    <t>
      The network information used by the hint server is not
      information solicited from individual ISPs but is the
      Autonomous System (AS) number
      and district information, which are more or less public
      already. Routing tables are not generated. Instead, peers within
      the same ISP or the same district are selected with higher
      priority in order to confine traffic to within the same ISP or
      the same district.
    </t>


    <t>
      When the hint server receives an IP address, it returns its
      attribute information, in order to confine the traffic to
      within the nearer ISP or district.
      A peer can select
      another based on the returned information. This operation is
      called GetLocation. However, in preparation for the time when
      it becomes necessary to hide topology information, an interface
      is provided through which a priority order is returned in
      response to an input of a list of candidate peers. This
      operation is called PeerSelection.
    </t>
    <t>
      Although the target node is selected based on the criterion
      that it is within the same ISP or the same district, this type
      of selection is not very effective if the number of
      participating peers is small. <xref target="AS_and_prefecture_distributions"/> shows the percentage of peers
      within the same AS or the same prefecture calculated from the
      distribution of ASes and prefectures in the IP address space
      from one-day data on a Winny network.
    </t>
    <texttable anchor="AS_and_prefecture_distributions" title="AS and prefecture distributions">
      <ttcol align="left">Conditions</ttcol>
      <ttcol align="center">Percentage</ttcol>
      <c>AS matches</c>
      <c>6.70%</c>

      <c>Prefecture matches</c>
      <c>12.76%</c>

      <c>Both match</c>
      <c>2.09%</c>
      <c>Neither match</c>
      <c>78.45%</c>
    </texttable>
    <t>
      Because, in addition to the above, the presence or absence of
      content affects the results, controlling peer selection
      within the same district may be inadequate. Therefore, it is
      necessary to introduce the weight of a continuous quantity that
      reflects the physical distance or the AS path length as an
      indicator of the proximity of the areas involved.
    </t>
    <t>
      In consideration of this, the following two measures are used
      to evaluate the proximity of peers in a hint server.
    </t>
    <t><list style="symbols"><t>
      AS path length (distance between ISPs)
    </t></list></t>
    <t><list style="empty"><t> AS path length is calculated from BGP
      full routes.  Since a full routing table retrieved at an ISP
      can show only a best path, it may not get an accurate length if
      the AS hop count of both ISPs is too large.  To avoid this, we use
      BGP information received from different ISPs and combine
      them.  Based on this concept, we used BGP routing information
      offered by three ISPs operated by big telecommunication couriers
      and made a topology tree. Then, we were able to calculate the
      shortest path between two given ASes.

    </t></list></t>
    <t><list style="symbols"><t>
      Geographical distance
    </t></list></t>
    <t><list style="empty"><t>
      Distances between peers are measured using the physical
distance between the capitals of the prefectures to which the peers
      belong.  Distances between prefectural capitals are sorted into
      ascending order, and then into bands, with weights 1 to 15
      assigned to them so that each band contains roughly the same
      number of "capital pairs". If either of the peer's locations is
      indefinite, the distance is equal to 15; if they are in the
      same prefecture, the distance is equal to 0.
    </t></list></t>
    <t><list style="empty"><t>
      Evaluation of distances between peers showed that the
      distribution of distances was almost uniform when distances
      between peers are normalized. This result suggests that using
      normalized distances expands the area where the control by a
      hint server is effective.


      The geographical distance is used only when the AS path length
      is the same between some candidates.
    </t></list></t>
    <t>An example of the request and the response</t>
    <figure><artwork><![CDATA[
o Request

   POST /PeerSelection HTTP/1.1
   Host: ServerName
   User-Agent: ClientName
   Content-Type: text/plain; charset=utf-8

   v=Version number
   [application=Application identifier]
   ip=IP address of physical interface
   port=Port number of physical interface
   [nat={no|upnp|unknown}]
   [nat_ip=Global IP address using UPnP]
   [nat_port= Global port number using UPnP]
   [trans_id=transaction ID]
   [pt=Flag of port type]
   [ub=upload bandwidth]
   [db=download bandwidth]

]]></artwork></figure>


    <figure><artwork><![CDATA[
o Response

  HTTP/1.1 200 OK
  Date: Timestamp
  Content-Type: text/plain; charset=utf-8
  Cache-control: max-age=max age
  Connection: close

  v=Version number
  ttl=ttl
  server=hint server name
  ...
  trans_id=transaction ID
  pt=Flag of port type
  client_ip=Peer IP address observed from server
  client_port=Peer port number observed from server
  numpeers=number of responding peers
  n=[src address] dst address / cost / option
]]></artwork></figure>

  </section>

  <section title="High-Level Trial Results">
    <!--5.1-->
    <section title="Peer Selection with P2P">
      <t>
        <xref target="Percentage of communication within the same ISP"/> shows the result of the analysis of communication in a node of an ISP in Tokyo, as an example of measurement results.
      </t>
      <t>
        In these two experiments, we evaluated different P2P
        applications. In the first experiment, the P2P topology was
        generated by a tree algorithm; in the second experiment, it
        was generated by a mesh algorithm. Both 
        resulted in similar performance.
      </t>
<?rfc compact="no"?>

      <texttable anchor="Percentage of communication within the same ISP" title="Percentage of communication within the same ISP">
        <ttcol align="left">Conditions</ttcol>
        <ttcol align="center">Experiment 1</ttcol>
        <ttcol align="center">Experiment 2</ttcol>
        <c>Peers selected within the same ISP</c>
        <c>22%</c>
        <c>29%</c>

        <c>Peers selected within the same district</c>
        <c>19%</c>
        <c>23%</c>

        <c>Peers selected within the same district and the same ISP</c>
        <c>5%</c>
        <c>7%</c>
      </texttable>

<?rfc compact="yes"?>
      <t>
        <xref target="Percentage of communication within the same ISP"/>
shows that the probability of communication with peers in the same ISP
	 is proportional to the population size and the share of the
	 ISP in each district. The data show that peers were selected
	 at random. 


        Note that the vendor of a P2P application used in these
	 experiments demonstrated that the mechanism for selecting a peer using network information can be implemented.  However, peer selection is normally based on past information because users often cannot actually perceive the effect of using network information.
      </t>
    </section>
    <!--5.2-->
    <section title="Peer Selection with the Hint Server">
      <t>

	The main objective of these experiments was to verify the operation of the hint server and P2P applications.
	The distances between a dummy node and a peer were obtained from data on the dummy nodes.
	An examination of the distances between a dummy node and a
       peer revealed that the mean value of distance after the hint
       server was introduced was reduced by 10% and that the 95th percentile was reduced by 5%.
	The results show that introducing a hint server can reduce the
	network loads that result from P2P applications.
      </t>
    </section>
  </section>

  <section title="Considerations">
    <t>
      We clarified the following during our experiments.

      <list style="numbers">
        <t>
	   Dispersed dummy nodes can determine the behavior of peers and
          traffic between inter-ISP networks and can determine the peer that
          each peer selects.

          Therefore, this result proves the importance of the 
          peer-selection control mechanism that is proposed by ALTO.

        </t>
        <t>
          Using our peer-selection control mechanism, called hint
          servers, can result in significant differences.
          Hint servers can lead each peer to select a closer peer.

        </t>
        <t>
          The 10% reduction of network cost is not satisfactory for ISPs, but the controllability of P2P
          applications is the most important point. When ISPs apply this
          mechanism to their real networks, they will set
          a very large cost for the most expensive network link.
        </t>

      </list>
    </t>

    <t>
      In the experimental results for peer-selection control, the
      selection is smaller in intra-ISP traffic than in other
      experiments <xref target="RFC5632" />.

      We think this is because there are fewer peers in each area of
      traffic control.  When there are many peers in one ISP, it is
      easy to select peers in the same ISP.  However, when there are
      fewer peers in one ISP, it is difficult to select peers in the
      same ISP.  In our experiments, most of the ISPs had many peers
      in their networks, i.e., there were a small number of ISPs that
      had few peers in their networks.
    </t>
    <t>
      Moreover, we didn't force P2P vendors to limit their
      implementation policy; therefore, we observed differences in
      how each implementation weighs the information from the hint servers.
      Specifically, in P2P applications when a tree topology is used,
      the hint-server mechanism is very effective; on the other
      hand, when a mesh topology is used, it less effective.

    </t>
    <section title="Next Steps">
      <t>
          In recent research, we've changed to an ALTO-based communication
          protocol on hint servers because the requirements of ALTO are
          documented in RFC 6708 <xref target="RFC6708"/> and the ALTO protocol is a work in
          progress <xref target="protocol-alto"/>.

	 In our implementation, protocol identifiers (PIDs) and the
        cost value are mapped to ISP subnets and to ISP distance, respectively.
        We also implement services for compatibility required by ALTO
        such as Map Services and Endpoint Cost Service.

        The Endpoint Cost Service (defined in <xref target="protocol-alto"/>)
        is mainly used because of backward compatibility with our experiments.

      </t>
      <t>
        We are also studying a hierarchical structure of hint servers, in order to
        control traffic at a coarse level (in inter-ISP areas) and at a
        finer level (in intra-ISP areas).

        It is also effective for limiting the areas where information is disclosed.
      </t>
    </section>

    <section title="Feedback to the ALTO WG">
      <t>
        This section describes what the authors learned from these
        experiments that might be useful to the ALTO WG.
      </t>
      <!--7.1-->
      <section title="Hierarchical Architecture for ALTO Servers">
        <t>
          In our experiments, we present the possibility of traffic
          control among multiple ISPs and multiple P2P applications
          using an ALTO mechanism.
                  We found several problems when ISPs try to adopt the mechanism.
          One is the granularity of network information from Council members.
          Among inter-ISP areas, it is relatively easy to handle
          information for public purposes by using BGP full routes.
               On the other hand, among the intra-ISP areas, it may be
          difficult to disclose the private information of each ISP.
          Kiesel <xref target="kiesel-alto-h12" />  proposes some
          modifications for the ALTO protocol
          in order to hide ISP information.

          We propose hierarchical structures.
          From the viewpoint of cooperation between ISPs, fine-grained information is not necessarily required. Moreover, it is difficult to exchange the fine-grained information between ISPs.
	   Considering this situation, we used only
          coarse-grained information to control backbone traffic in
          these experiments; however, in the future, there may be a demand for controlling traffic within an ISP using fine-grained information.
	   Therefore, we decided to introduce hierarchical structures
          into ALTO in order to cope with both situations.
          Actually, adopting a hierarchical
          control mechanism that includes the
          following two steps will be useful.
        </t>
        <t>
          <list style="symbols">
            <t>
              First, use coarse-grained information about whole the network to select ISPs.
            </t>
          </list>
        </t>
        <t>
          <list style="symbols">
            <t>
              Second, use fine-grained information within the ISP to select a peer.
            </t>
        </list>
        </t>


      </section>
      <section title="Measurement Mechanism">

        <t>
          In these experiments, there were two difficulties as follows.
        </t>
        <t>
          <list style="symbols">
            <t>
              Evaluating the effect of introducing a hint server was
              difficult because the P2P applications had their own measurement mechanisms.
            </t>

            <t>
              How to treat the priority order of peers suggested by a hint server could not be predetermined for P2P applications.
            </t>
          </list>
        </t>
        <t>
          From these experiences, the authors consider that
          clarifying the requirements about measurement mechanisms
          for P2P applications is necessary in ALTO.
        </t>


      </section>
    </section>
  </section>
  <section anchor="Security" title="Security Considerations">
    <t>This document does not propose any kind of protocol, practice,
    or standard.</t>
  </section>

  <section anchor="Acknowledgments" title="Acknowledgments">
    <t>
      The P2P Network Experiment Council was established thanks to
      strong support by the Japanese Ministry of Internal Affairs
      and Communications.
      These experiments were performed with cooperation among the P2P
      Network Experiment Council members.  DREAMBOAT Co., Ltd.,
      Bitmedia, Inc., Utagoe, Inc., and Toyama IX have especially
      supported the analyses of the experiments.
      The authors appreciate Tohru Asami, Hiroshi Esaki, and Tatsuya Yamashita for their constructive comments.
    </t>
    <t>
      The authors would also like to thank Martin Stiemerling, Stefano
      Previdi, and Vijay K. Gurbani for their comments on this document.
    </t>
  </section>
</middle>

<!--  *****BACK MATTER ***** -->

<back>

<references title="Informative References">

    <reference anchor="INFOCOMM2009">
      <front>
        <title>On the Quality of Triangle Inequality Violation Aware Routing Overlay Architecture</title>
  <author surname="Kawahara" initials="R">
    <organization/> 
  </author>
  <author surname="Lua" initials="E. K.">
    <organization/> 
  </author>
  <author surname="Uchida" initials="M">
    <organization/> 
  </author>
  <author surname="Kamei" initials="S">
    <organization/> 
  </author>
  <author surname="Yoshino" initials="H">
    <organization/> 
  </author>
        <date/>
      </front>
      <seriesInfo name="INFOCOM 2009," value="pages 2761-2765" />
    </reference>

    <reference anchor="IEEEJOURNAL2004">
      <front>
        <title>QRON: QoS-aware routing in overlay networks</title>
  <author surname="Li" initials="Z">
    <organization/> 
  </author>
  <author surname="Mohapatra" initials="P">
    <organization/> 
  </author>
        <date month="January" year="2004" />
      </front>
      <seriesInfo name="IEEE Journal on Selected Areas in Communications," value="Vol. 22, No. 1" />
    </reference>

    <reference anchor="winny" target="http://en.wikipedia.org/w/index.php?title=Winny&oldid=500744660">
      <front>
        <title>Winny</title>
        <author>
          <organization>Wikipedia</organization>
        </author>
   <date month="July" day="5" year="2012" />
      </front>
    </reference>

    <reference anchor="share" target="http://en.wikipedia.org/w/index.php?title=Share_(P2P)&oldid=532999898">
      <front>
        <title>Share (P2P)</title>
        <author>
          <organization>Wikipedia</organization>
        </author>
        <date month="January" day="14" year="2013"/>
      </front>
    </reference>

    <reference anchor="TVBank" target="http://www.tv-bank.com/jp/20081031.html">
      <front>
        <title>Live Delivery Using 'BB Broadcast' Achieved a 96% Saving in Traffic!</title>
        <author>
          <organization>TV Bank Corp.</organization>
        </author>
        <date month="October" year="2008" />
      </front>
   <seriesInfo name="(in" value="Japanese)"/>
    </reference>



    <reference anchor="utagoe" target="http://www.ietf.org/proceedings/76/slides/SAMRG-6.pdf">
      <front>
        <title>A Review of ALM Software in Practical Use</title>
        <author surname="Shudo" initials="K">
          <organization/>
        </author>
        <date month="November" year="2009" />
      </front>
      <seriesInfo name="IRTF SAMRG (Scalable Adaptive Multicast Research
                        Group) meeting," value="Proceedings of IETF 76" />
    </reference>


        <reference anchor="MICreport" target="http://www.soumu.go.jp/menu_news/s-news/2007/070629_11.html">
        <front>
        <title>Disclosure of the Report 'Working Group on P2P Networks'</title>
        <author>
        <organization>Ministry of Internal Affairs and Communications</organization>
        </author>
        <date year="2007"/>
        </front>
   <seriesInfo name="(in" value="Japanese)"/>
        </reference>

        <reference anchor="P2PNEC" target="http://www.fmmc.or.jp/P2P/about.htm">
        <front>
        <title>The P2P Network Experiment Council</title>
        <author>
        <organization>The Foundation for MultiMedia Communications</organization>
        </author>
        <date year="2007" />
        </front>
   <seriesInfo name="(in" value="Japanese)"/>
        </reference>

        <reference anchor="P2PNECen"
                   target="http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/Releases/Telecommunications/news080201_1.html">
        <front>
        <title>P2P Network Experiment Council Symposium to Be Held</title>
        <author>
        <organization>Ministry of Internal Affairs and Communications</organization>
        </author>
        <date year="2008" month="February" />
        </front>
        </reference>

        <reference anchor="p2pfmmc"
                   target="http://www.fmmc.or.jp/p2p_web/aim.html">
        <front>
        <title>The Aim of P2P Network Experiment Council</title>
        <author>
        <organization>The Foundation for MultiMedia Communications</organization>
        </author>
        <date year="2007" />
        </front>
   <seriesInfo name="(in" value="Japanese)"/>
        </reference>


    <reference anchor="p4p" target="http://www.cs.yale.edu/homes/yry/projects/p4p/p4p-sigcomm08.pdf">
       <front>
        <title>P4P: Provider Portal for Applications</title>

         <author fullname="Haiyong Xie" initials="H." surname="Xie">
           <organization/>
         </author>
         <author fullname="Richard Yang" initials="R."
                 surname="Yang">
           <organization/>
         </author>
         <author fullname="Arvind Krishnamurthy" initials="A."
                 surname="Krishnamurthy">
           <organization/>
         </author>
         <author initials="Y.G."
                 surname="Liu">
           <organization/>
         </author>
         <author initials="A."
                 surname="Silberscatz">
           <organization/>
         </author>
         <date year="2008"/>
       </front>
      <seriesInfo name="SIGCOMM '08," value="pages 351-362" />
     </reference>


    <reference anchor="mic" target="http://unpan1.un.org/intradoc/groups/public/documents/apcity/unpan040329.pdf">
      <front>
        <title>Broadband Competition Policy in Japan</title>
        <author surname="Taniwaki" initials="Y">
          <organization>Ministry of Internal Affairs and Communications</organization>
        </author>
        <date month="March" year="2008" />
      </front>
    </reference>

    <reference anchor="impact_user_traffic">
      <front>
        <title>The Impact and Implications of the Growth in Residential User-to-User Traffic</title>
        <author surname="Cho" initials="K" fullname="Kenjiro Cho"></author>
        <author surname="Fukuda" initials="K" fullname="Kensuke Fukuda"></author>
        <author surname="Esaki" initials="H" fullname="Hiroshi Esaki"></author>
        <author surname="Kato" initials="A" fullname="Akira Kato"></author>

        <date month="September" year="2006" />
      </front>
      <seriesInfo name="SIGCOMM '06," value="pages 207-218" />
    </reference>

    <reference anchor="sandvine" target="http://www.sandvine.com/news/global_broadband_trends.asp">
      <front>
        <title>Global Internet Phenomena Report: 2H 2012</title>
        <author>
           <organization>Sandvine, Inc.</organization>
        </author>
        <date month="September" year="2012" />
      </front>
    </reference>

<reference anchor="RFC6708">

<front>
<title>
Application-Layer Traffic Optimization (ALTO) Requirements
</title>
<author initials="S." surname="Kiesel" fullname="S. Kiesel">
<organization/>
</author>
<author initials="S." surname="Previdi" fullname="S. Previdi">
<organization/>
</author>
<author initials="M." surname="Stiemerling" fullname="M. Stiemerling">
<organization/>
</author>
<author initials="R." surname="Woundy" fullname="R. Woundy">
<organization/>
</author>
<author initials="Y." surname="Yang" fullname="Y. Yang">
<organization/>
</author>
<date year="2012" month="September"/>
</front>
<seriesInfo name="RFC" value="6708"/>

</reference>

<!-- draft-kiesel-alto-h12-02 is EXPIRED -->
<reference anchor='kiesel-alto-h12'>
<front>
<title>ALTO H12</title>

<author initials='S' surname='Kiesel' fullname='Sebastian Kiesel'>
   <organization />
</author>

<author initials='M' surname='Stiemerling' fullname='Martin Stiemerling'>
   <organization />
</author>

<date month='March' day='8' year='2010' />

<abstract><t>Many Internet applications are used to access resources, such as pieces of information or server processes, which are av
ailable in several equivalent replicas on different hosts.  This includes, but is not limited to, peer-to-peer file sharing applicati
ons.  The goal of Application-Layer Traffic Optimization (ALTO) is to provide guidance to applications, which have to select one or s
everal hosts from a set of candidates, that are able to provide a desired resource.  This memo proposes the Simple ALTO (H12) protoco
l.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />

</reference>


<!-- draft-ietf-alto-protocol in AD Evaluation -->
<reference anchor='protocol-alto'>
<front>
<title>ALTO Protocol</title>

<author initials='R' surname='Alimi' fullname='Richard Alimi' role='editor'>
   <organization />
</author>

<author initials='R' surname='Penno' fullname='Reinaldo Penno' role='editor'>
   <organization />
</author>

<author initials='Y' surname='Yang' fullname='Yang Yang' role='editor'>
   <organization />
</author>

<date month='September' day='7' year='2012' />

<abstract><t>Networking applications today already have access to a great amount of Inter-Provider network topology information.  For
example, views of the Internet routing table are easily available at looking glass servers and entirely practical to be downloaded b
y clients.  What is missing is knowledge of the underlying network topology from the ISP or Content Provider (henceforth referred as 
Provider) point of view. In other words, what a Provider prefers in terms of traffic optimization -- and a way to distribute it.  The
ALTO Service provides network information (e.g., basic network location structure, preferences of network paths) with the goal of mo
difying network resource consumption patterns while maintaining or improving application performance.  The basic information of ALTO 
is based on abstract maps of a network.  These maps provide a simplified view, yet enough information about a network for application
s to effectively utilize them.  Additional services are built on top the maps.  This document describes a protocol implementing the A
LTO Service. Although the ALTO service would primarily be provided by the network operator (e.g., an ISP), content providers and thir
d parties could also operate this service.  Applications that could use this service are those that have a choice in connection endpo
ints.  Examples of such applications are peer-to-peer (P2P) and content delivery networks.</t></abstract>

</front>

<seriesInfo name='Work in' value='Progress' />

</reference>

&rfc5632;

  </references>
</back>
</rfc>
