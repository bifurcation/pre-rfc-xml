<?xml version="1.0" encoding="US-ASCII"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>
<!DOCTYPE rfc SYSTEM 'rfc2629.dtd'>

<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc toc="yes"?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>

<rfc number="8525" submissionType="IETF" consensus="yes" ipr="trust200902"
     obsoletes="7895" category="std"
>
    <front>
    <title abbrev="YANG Library">YANG Library</title>

    <author initials="A" surname="Bierman" fullname='Andy Bierman' >
      <organization>YumaWorks</organization>
      <address>
        <email>andy@yumaworks.com</email>
      </address>
    </author>
    <author initials="M" surname="Bjorklund" fullname='Martin Bjorklund' >
      <organization>Tail-f Systems</organization>
      <address>
        <email>mbj@tail-f.com</email>
      </address>
    </author>
    <author initials="J" surname="Schoenwaelder" fullname='Juergen Schoenwaelder' >
      <organization>Jacobs University</organization>
      <address>
        <email>j.schoenwaelder@jacobs-university.de</email>
      </address>
    </author>
    <author initials="K" surname="Watsen" fullname='Kent Watsen' >
      <organization>Watsen Networks</organization>
      <address>
        <email>kent+ietf@watsen.net</email>
      </address>
    </author>
    <author initials="R" surname="Wilton" fullname='Robert Wilton' >
      <organization>Cisco Systems</organization>
      <address>
        <email>rwilton@cisco.com</email>
      </address>
    </author>

	<date month="March" year="2019" />

    <abstract>
	<t>
This document describes a YANG library that provides information about
the YANG modules, datastores, and datastore schemas used by a network
management server. Simple caching mechanisms are provided to allow
clients to minimize retrieval of this information. This version of the
YANG library supports the Network Management Datastore Architecture (NMDA) by
listing all datastores supported by a network management server and
the schema that is used by each of these datastores.
	</t>
	<t>
This document obsoletes RFC 7895.
	</t>
</abstract>
</front>
<middle>
<section title="Introduction" anchor="introduction">
    <t>
There is a need for a standard mechanism to expose which YANG modules
<xref target="RFC7950"/>, datastores <xref target="RFC8342"/>, and datastore schemas
<xref target="RFC8342"/> are in use by a network
management server.
    </t>
    <t>
This document defines the YANG module &quot;ietf&nbhy;yang&nbhy;library&quot; that
provides this information. This version of the YANG library is
compatible with the Network Management Datastore Architecture (NMDA)
<xref target="RFC8342"/>. The previous version of the YANG
library, defined in <xref target="RFC7895"/>, is not compatible with the NMDA since
it assumes that all datastores have exactly the same schema.  This is
not necessarily true in the NMDA since dynamic configuration datastores
may have their own datastore schema.  Furthermore, the operational
state datastore may support non-configurable YANG modules in addition
to the YANG modules supported by conventional configuration
datastores.
    </t>
    <t>
The old YANG library definitions have been retained (for
backwards-compatibility reasons), but the definitions have been marked as
deprecated. For backwards compatibility, an NMDA-supporting server
SHOULD populate the deprecated &quot;/modules&nbhy;state&quot; tree in a
backwards-compatible manner.  The new &quot;/yang&nbhy;library&quot; tree will be
ignored by legacy clients but will provide all the data needed for
NMDA-aware clients (which will ignore the &quot;/modules&nbhy;state&quot;
tree).  

   The recommended approach to populate "/modules-state" is to report
   the YANG modules with "config true" data nodes that are
   configurable via conventional configuration datastores and the
   YANG modules with "config false" data nodes that are returned via a 
Network Configuration Protocol (NETCONF) &lt;get&gt;
operation or equivalent.
    </t>
    <t>
The YANG library information can be different on every server, and it
can change at runtime or across a server reboot. If a server
implements multiple network management protocols to access the
server&apos;s datastores, then each such protocol may have its own
conceptual instantiation of the YANG library.
    </t>
    <t>
If a large number of YANG modules are utilized by a server, then the
YANG library contents can be relatively large.  Since the YANG library
contents change very infrequently, it is important that clients be
able to cache the YANG library contents and easily identify whether
their cache is out of date.
    </t>
<section title="Terminology" anchor="terminology">

        <t>
    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
    NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
    "MAY", and "OPTIONAL" in this document are to be interpreted as
    described in BCP&nbsp;14 <xref target="RFC2119"/> <xref target="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
        </t>

    <t>
The following terms are defined in <xref target="RFC7950"/>:
    </t>
<t>
 <list style="symbols">
 <t>
module
 </t>
 <t>
submodule
 </t>
 <t>
data node
 </t>
 </list>
</t>

    <t>
This document uses the phrase &quot;implement a module&quot; as defined in
Section 5.6.5 of <xref target="RFC7950"/>.
    </t>

    <t>
The following terms are defined in <xref target="RFC8342"/>:
    </t>
<t>
 <list style="symbols">
 <t>
datastore
 </t>
 <t>
datastore schema
 </t>
 <t>
configuration
 </t>
 <t>
conventional configuration datastore
 </t>
 <t>
operational state
 </t>
 <t>
operational state datastore
 </t>
 <t>
dynamic configuration datastore
 </t>
 <t>
client
 </t>
<t>
server 
</t>
 </list>
</t>
    <t>
The following terms are used within this document:
    </t>
<t>
 <list style="symbols">
 <t>
YANG library: A collection of YANG modules, submodules, datastores,
and datastore schemas used by a server.
 </t>
 <t>
YANG library content identifier: A server-generated identifier of
the contents of the YANG library.
 </t>
 </list>
</t>
    <t>
Tree diagrams in this document use the notation defined in
<xref target="RFC8340"/>.
    </t>
</section>
</section>
<section title="Objectives" anchor="objectives">
    <t>
The following information is needed by a client application (for each
YANG module in the library) to fully utilize the YANG data modeling
language:
    </t>
<t>
 <list style="symbols">
 <t>
name: The name of the YANG module.
 </t>
 <t>
revision: If defined in the YANG module or submodule, the revision
is derived from the most recent revision statement within the module
or submodule.
 </t>

 <t>
submodule list: The name and (if defined) revision of each submodule
used by the module must be identified.
 </t>


<t>
feature list: The name of each YANG feature supported by the
server must be identified.
 </t>

 <t>
deviation list: The name of each YANG module with deviation
statements affecting a given YANG module must be identified.
 </t>
 </list>
</t>
    <t>
In addition, the following information is needed by a client
application for each datastore supported by a server:
    </t>
<t>
 <list style="symbols">
 <t>
identity: The YANG identity for the datastore.
 </t>
 <t>
schema: The schema (i.e., the set of modules) implemented by the
datastore.
 </t>
 </list>
</t>
    <t>
  In order to select one out of several possible designs for the YANG
  library data model, the following criteria were used:
    </t>
<t>
 <list style="numbers">
 <t>
The information must be efficient for a client to consume.
Since the size of the YANG library can be quite large, it should
be possible for clients to cache the YANG library information.
 </t>
 <t>
A dynamic configuration datastore must be able to implement a module
or feature that is not implemented in the conventional configuration
datastores.
 </t>
 <t>
It must be possible to not implement a module or feature in
&lt;operational&gt;, even if it is implemented in some other datastore.
This is required for transition purposes; a server that wants to
implement &lt;operational&gt; should not have to implement all modules at
once.
 </t>
 <t>
A given module can only be implemented in one revision in all
datastores.  If a module is implemented in more than one
datastore, the same revision is implemented in all these
datastores.
 </t>
 <t>
Multiple revisions can be used for import, if import-by revision
is used.
 </t>
 <t>
It must be possible to use the YANG library by schema mount
<xref target="RFC8528"/>.
 </t>
 </list>
</t>
</section>


<section title="YANG Library Data Model" anchor="yang-library-data-model">
    <t>
The &quot;ietf&nbhy;yang&nbhy;library&quot; YANG module provides information about the
modules, submodules, datastores, and datastore schemas supported by a
server. All data nodes in the &quot;ietf&nbhy;yang&nbhy;library&quot; module are
&quot;config false&quot; and
thus only accessible in the operational state datastore.
    </t>
<figure anchor="model"><artwork><![CDATA[
+-----------+
| datastore |
+-----------+
     |
     | has a
     V
+-----------+            +--------+                +------------+
| datastore |  union of  | module |  consists of   | modules +  |
|  schema   |----------->|  set   |--------------->| submodules |
+-----------+            +--------+                +------------+
]]></artwork></figure>

    <t>
The conceptual model of the YANG library is depicted in
Figure 1. Following the NMDA, every datastore has an associated datastore
schema. A datastore schema is a union of module sets, and every module
set is a collection of modules and submodules, including the modules
and submodules used for imports. Note that multiple datastores may
refer to the same datastore schema. Furthermore, it is possible for
individual datastore schemas to share module sets. A common use case is the
operational state datastore schema, which is a superset of the schema
used by conventional configuration datastores.
    </t>
    <t>
Below is the YANG tree diagram for the &quot;ietf&nbhy;yang&nbhy;library&quot; module,
excluding the deprecated &quot;/modules&nbhy;state&quot; tree:
    </t>
	<figure>
    <artwork><![CDATA[
module: ietf-yang-library
  +--ro yang-library
     +--ro module-set* [name]
     |  +--ro name                  string
     |  +--ro module* [name]
     |  |  +--ro name         yang:yang-identifier
     |  |  +--ro revision?    revision-identifier
     |  |  +--ro namespace    inet:uri
     |  |  +--ro location*    inet:uri
     |  |  +--ro submodule* [name]
     |  |  |  +--ro name        yang:yang-identifier
     |  |  |  +--ro revision?   revision-identifier
     |  |  |  +--ro location*   inet:uri
     |  |  +--ro feature*     yang:yang-identifier
     |  |  +--ro deviation*   -> ../../module/name
     |  +--ro import-only-module* [name revision]
     |     +--ro name         yang:yang-identifier
     |     +--ro revision     union
     |     +--ro namespace    inet:uri
     |     +--ro location*    inet:uri
     |     +--ro submodule* [name]
     |        +--ro name        yang:yang-identifier
     |        +--ro revision?   revision-identifier
     |        +--ro location*   inet:uri
     +--ro schema* [name]
     |  +--ro name          string
     |  +--ro module-set*   -> ../../module-set/name
     +--ro datastore* [name]
     |  +--ro name      ds:datastore-ref
     |  +--ro schema    -> ../../schema/name
     +--ro content-id    string

  notifications:
    +---n yang-library-update
       +--ro content-id    -> /yang-library/content-id
    ]]></artwork>
</figure>
    <t>
The &quot;/yang&nbhy;library&quot; container holds the entire YANG library. The
container has the following child nodes:
    </t>
<t>
 <list style="symbols">
 <t>
The &quot;/yang&nbhy;library/module&nbhy;set&quot; contains entries representing module
sets. The list &quot;/yang&nbhy;library/module&nbhy;set/module&quot; enumerates the
modules that belong to the module set. A module is listed together
with its submodules (if any), a set of features, and any deviation
modules. The list &quot;/yang&nbhy;library/module&nbhy;set/import&nbhy;only&nbhy;module&quot;
lists all modules (and their submodules) used only for imports.  The
assignment of a module to a module set is at the server&apos;s
discretion.  This revision of the YANG library attaches no semantics
as to which module set a module is listed in.
 </t>
 <t>
The &quot;/yang&nbhy;library/schema&quot; list contains an entry for each datastore
schema supported by the server. All conventional configuration
datastores use the same &quot;schema&quot; list entry. A dynamic configuration
datastore may use a different datastore schema from the conventional
configuration datastores and hence may require a separate &quot;schema&quot;
entry. A &quot;schema&quot; entry has a leaf-list of references to entries in
the &quot;module&nbhy;set&quot; list.  The schema consists of the union of all
modules in all referenced module sets.
 </t>
 <t>
The &quot;/yang&nbhy;library/datastore&quot; list contains one entry for each
datastore supported by the server, and it identifies the datastore
schema associated with a datastore via a reference to an entry in
the &quot;schema&quot; list. Each supported conventional configuration
datastore has a separate entry, pointing to the same &quot;schema&quot; list
element.
 </t>
 <t>
The &quot;/yang&nbhy;library/content&nbhy;id&quot; leaf contains the YANG library
content identifier, which is an implementation-specific identifier
representing the current information in the YANG library on a
specific server.  The value of this leaf MUST change whenever the
information in the YANG library changes.  There is no requirement
that the same information always result in the same &quot;content&nbhy;id&quot;
value.  This leaf allows a client to fetch all schema information
once, cache it, and only refetch it if the value of this leaf has
been changed.  If the value of this leaf changes, the server also
generates a &quot;yang&nbhy;library&nbhy;update&quot; notification.
 </t>
 </list>
</t>
    <t>
Note that for a NETCONF server implementing the NETCONF extensions to
support the NMDA <xref target="RFC8526"/>, a change of the YANG
library content identifier results in a new value for the
:yang-library:1.1 capability defined in
<xref target="RFC8526"/>.  Thus, if such a server implements
NETCONF notifications <xref target="RFC5277"/> and the 
&quot;netconf&nbhy;capability&nbhy;change&quot; notification <xref target="RFC6470"/>, a
&quot;netconf&nbhy;capability&nbhy;change&quot;
notification is generated whenever the YANG library content identifier
changes.
    </t>
</section>



<section title="YANG Library YANG Module" anchor="library-module">
    <t>
The &quot;ietf&nbhy;yang&nbhy;library&quot; YANG module imports definitions from
the &quot;ietf&nbhy;yang&nbhy;types&quot; and
&quot;ietf&nbhy;inet&nbhy;types&quot; modules defined in <xref target="RFC6991"/> and
from the
&quot;ietf&nbhy;datastores&quot; module defined in <xref target="RFC8342"/>.
  While
  the YANG module is defined using YANG version 1.1, the YANG library
  supports YANG modules written in any version of YANG.
    </t>


<t>&lt;CODE BEGINS> file "ietf-yang-library@2019-01-04.yang"</t>
<figure>
    <artwork><![CDATA[
module ietf-yang-library {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-yang-library";
  prefix yanglib;

  import ietf-yang-types {
    prefix yang;
    reference 
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-inet-types {
    prefix inet;
    reference 
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-datastores {
    prefix ds;
    reference
      "RFC 8342: Network Management Datastore Architecture
                 (NMDA)";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";
  contact
    "WG Web:   <https://datatracker.ietf.org/wg/netconf/>
     WG List:  <mailto:netconf@ietf.org>

     Author:   Andy Bierman
               <mailto:andy@yumaworks.com>

     Author:   Martin Bjorklund
               <mailto:mbj@tail-f.com>

     Author:   Juergen Schoenwaelder
               <mailto:j.schoenwaelder@jacobs-university.de>

     Author:   Kent Watsen
               <mailto:kent+ietf@watsen.net>

     Author:   Robert Wilton
               <mailto:rwilton@cisco.com>";
  description
    "This module provides information about the YANG modules,
     datastores, and datastore schemas used by a network
     management server.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL 
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED', 
     'MAY', and 'OPTIONAL' in this document are to be interpreted as 
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when, 
     they appear in all capitals, as shown here.  

     Copyright (c) 2019 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC 8525; see
     the RFC itself for full legal notices.";

  revision 2019-01-04 {
    description
      "Added support for multiple datastores according to the
       Network Management Datastore Architecture (NMDA).";
    reference 
      "RFC 8525: YANG Library";
  }
  revision 2016-04-09 {
    description
      "Initial revision.";
    reference 
      "RFC 7895: YANG Module Library";
  }

  /*
   * Typedefs
   */

  typedef revision-identifier {
    type string {
      pattern '\d{4}-\d{2}-\d{2}';
    }
    description
      "Represents a specific date in YYYY-MM-DD format.";
  }

  /*
   * Groupings
   */

  grouping module-identification-leafs {
    description
      "Parameters for identifying YANG modules and submodules.";
    leaf name {
      type yang:yang-identifier;
      mandatory true;
      description
        "The YANG module or submodule name.";
    }
    leaf revision {
      type revision-identifier;
      description
        "The YANG module or submodule revision date.  If no revision
         statement is present in the YANG module or submodule, this
         leaf is not instantiated.";
    }
  }

  grouping location-leaf-list {
    description
      "Common leaf-list parameter for the locations of modules and
       submodules.";
    leaf-list location {
      type inet:uri;
      description
        "Contains a URL that represents the YANG schema
         resource for this module or submodule.

         This leaf will only be present if there is a URL
         available for retrieval of the schema for this entry.";
    }
  }

  grouping module-implementation-parameters {
    description
      "Parameters for describing the implementation of a module.";
    leaf-list feature {
      type yang:yang-identifier;
      description
        "List of all YANG feature names from this module that are
         supported by the server, regardless whether they are defined
         in the module or any included submodule.";
    }
    leaf-list deviation {
      type leafref {
        path "../../module/name";
      }
      description
        "List of all YANG deviation modules used by this server to
         modify the conformance of the module associated with this
         entry.  Note that the same module can be used for deviations
         for multiple modules, so the same entry MAY appear within
         multiple 'module' entries.

         This reference MUST NOT (directly or indirectly)
         refer to the module being deviated.

         Robust clients may want to make sure that they handle a
         situation where a module deviates itself (directly or
         indirectly) gracefully.";
    }
  }

  grouping module-set-parameters {
    description
      "A set of parameters that describe a module set.";
    leaf name {
      type string;
      description
        "An arbitrary name of the module set.";
    }
    list module {
      key "name";
      description
        "An entry in this list represents a module implemented by the
         server, as per Section 5.6.5 of RFC 7950, with a particular
         set of supported features and deviations.";
      reference 
        "RFC 7950: The YANG 1.1 Data Modeling Language";
      uses module-identification-leafs;
      leaf namespace {
        type inet:uri;
        mandatory true;
        description
          "The XML namespace identifier for this module.";
      }
      uses location-leaf-list;
      list submodule {
        key "name";
        description
          "Each entry represents one submodule within the
           parent module.";
        uses module-identification-leafs;
        uses location-leaf-list;
      }
      uses module-implementation-parameters;
    }
    list import-only-module {
      key "name revision";
      description
        "An entry in this list indicates that the server imports
         reusable definitions from the specified revision of the
         module but does not implement any protocol-accessible
         objects from this revision.

         Multiple entries for the same module name MAY exist.  This
         can occur if multiple modules import the same module but
         specify different revision dates in the import statements.";
      leaf name {
        type yang:yang-identifier;
        description
          "The YANG module name.";
      }
      leaf revision {
        type union {
          type revision-identifier;
          type string {
            length "0";
          }
        }
        description
          "The YANG module revision date.
           A zero-length string is used if no revision statement
           is present in the YANG module.";
      }
      leaf namespace {
        type inet:uri;
        mandatory true;
        description
          "The XML namespace identifier for this module.";
      }
      uses location-leaf-list;
      list submodule {
        key "name";
        description
          "Each entry represents one submodule within the
           parent module.";
        uses module-identification-leafs;
        uses location-leaf-list;
      }
    }
  }

  grouping yang-library-parameters {
    description
      "The YANG library data structure is represented as a grouping
       so it can be reused in configuration or another monitoring
       data structure.";
    list module-set {
      key "name";
      description
        "A set of modules that may be used by one or more schemas.

         A module set does not have to be referentially complete,
         i.e., it may define modules that contain import statements
         for other modules not included in the module set.";
      uses module-set-parameters;
    }
    list schema {
      key "name";
      description
        "A datastore schema that may be used by one or more
         datastores.

         The schema must be valid and referentially complete, i.e.,
         it must contain modules to satisfy all used import
         statements for all modules specified in the schema.";
      leaf name {
        type string;
        description
          "An arbitrary name of the schema.";
      }
      leaf-list module-set {
        type leafref {
          path "../../module-set/name";
        }
        description
          "A set of module-sets that are included in this schema.
           If a non-import-only module appears in multiple module
           sets, then the module revision and the associated features
           and deviations must be identical.";
      }
    }
    list datastore {
      key "name";
      description
        "A datastore supported by this server.

         Each datastore indicates which schema it supports.

         The server MUST instantiate one entry in this list per
         specific datastore it supports.

         Each datastore entry with the same datastore schema SHOULD
         reference the same schema.";
      leaf name {
        type ds:datastore-ref;
        description
          "The identity of the datastore.";
      }
      leaf schema {
        type leafref {
          path "../../schema/name";
        }
        mandatory true;
        description
          "A reference to the schema supported by this datastore.
           All non-import-only modules of the schema are implemented
           with their associated features and deviations.";
      }
    }
  }

  /*
   * Top-level container
   */

  container yang-library {
    config false;
    description
      "Container holding the entire YANG library of this server.";
    uses yang-library-parameters;
    leaf content-id {
      type string;
      mandatory true;
      description
        "A server-generated identifier of the contents of the
         '/yang-library' tree.  The server MUST change the value of
         this leaf if the information represented by the
         '/yang-library' tree, except '/yang-library/content-id', has
         changed.";
    }
  }

  /*
   * Notifications
   */

  notification yang-library-update {
    description
      "Generated when any YANG library information on the
       server has changed.";
    leaf content-id {
      type leafref {
        path "/yanglib:yang-library/yanglib:content-id";
      }
      mandatory true;
      description
        "Contains the YANG library content identifier for the updated
         YANG library at the time the notification is generated.";
    }
  }

  /*
   * Legacy groupings
   */

  grouping module-list {
    status deprecated;
    description
      "The module data structure is represented as a grouping
       so it can be reused in configuration or another monitoring
       data structure.";

    grouping common-leafs {
      status deprecated;
      description
        "Common parameters for YANG modules and submodules.";
      leaf name {
        type yang:yang-identifier;
        status deprecated;
        description
          "The YANG module or submodule name.";
      }
      leaf revision {
        type union {
          type revision-identifier;
          type string {
            length "0";
          }
        }
        status deprecated;
        description
          "The YANG module or submodule revision date.
           A zero-length string is used if no revision statement
           is present in the YANG module or submodule.";
      }
    }

    grouping schema-leaf {
      status deprecated;
      description
        "Common schema leaf parameter for modules and submodules.";
      leaf schema {
        type inet:uri;
        description
          "Contains a URL that represents the YANG schema
           resource for this module or submodule.

           This leaf will only be present if there is a URL
           available for retrieval of the schema for this entry.";
      }
    }
    list module {
      key "name revision";
      status deprecated;
      description
        "Each entry represents one revision of one module
         currently supported by the server.";
      uses common-leafs {
        status deprecated;
      }
      uses schema-leaf {
        status deprecated;
      }
      leaf namespace {
        type inet:uri;
        mandatory true;
        status deprecated;
        description
          "The XML namespace identifier for this module.";
      }
      leaf-list feature {
        type yang:yang-identifier;
        status deprecated;
        description
          "List of YANG feature names from this module that are
           supported by the server, regardless of whether they are
           defined in the module or any included submodule.";
      }
      list deviation {
        key "name revision";
        status deprecated;
        description
          "List of YANG deviation module names and revisions
           used by this server to modify the conformance of
           the module associated with this entry.  Note that
           the same module can be used for deviations for
           multiple modules, so the same entry MAY appear
           within multiple 'module' entries.

           The deviation module MUST be present in the 'module'
           list, with the same name and revision values.
           The 'conformance-type' value will be 'implement' for
           the deviation module.";
        uses common-leafs {
          status deprecated;
        }
      }
      leaf conformance-type {
        type enumeration {
          enum implement {
            description
              "Indicates that the server implements one or more
               protocol-accessible objects defined in the YANG module
               identified in this entry.  This includes deviation
               statements defined in the module.

               For YANG version 1.1 modules, there is at most one
               'module' entry with conformance type 'implement' for a
               particular module name, since YANG 1.1 requires that
               at most one revision of a module is implemented.

               For YANG version 1 modules, there SHOULD NOT be more
               than one 'module' entry for a particular module 
               name.";
          }
          enum import {
            description
              "Indicates that the server imports reusable definitions
               from the specified revision of the module but does
               not implement any protocol-accessible objects from
               this revision.

               Multiple 'module' entries for the same module name MAY
               exist.  This can occur if multiple modules import the
               same module but specify different revision dates in
               the import statements.";
          }
        }
        mandatory true;
        status deprecated;
        description
          "Indicates the type of conformance the server is claiming
           for the YANG module identified by this entry.";
      }
      list submodule {
        key "name revision";
        status deprecated;
        description
          "Each entry represents one submodule within the
           parent module.";
        uses common-leafs {
          status deprecated;
        }
        uses schema-leaf {
          status deprecated;
        }
      }
    }
  }

  /*
   * Legacy operational state data nodes
   */

  container modules-state {
    config false;
    status deprecated;
    description
      "Contains YANG module monitoring information.";
    leaf module-set-id {
      type string;
      mandatory true;
      status deprecated;
      description
        "Contains a server-specific identifier representing
         the current set of modules and submodules.  The
         server MUST change the value of this leaf if the
         information represented by the 'module' list instances
         has changed.";
    }
    uses module-list {
      status deprecated;
    }
  }

  /*
   * Legacy notifications
   */

  notification yang-library-change {
    status deprecated;
    description
      "Generated when the set of modules and submodules supported
       by the server has changed.";
    leaf module-set-id {
      type leafref {
        path "/yanglib:modules-state/yanglib:module-set-id";
      }
      mandatory true;
      status deprecated;
      description
        "Contains the module-set-id value representing the
         set of modules and submodules supported at the server
         at the time the notification is generated.";
    }
  }
}

    ]]></artwork>
</figure>
<t>&lt;CODE ENDS></t>
</section>
<section title="IANA Considerations" anchor="iana">
    <t>
RFC 7895 previously registered one URI in the "IETF XML Registry"
<xref target="RFC3688"/>.  This document takes over this registration entry made by
RFC 7895 and changes the Registrant Contact to the IESG according to Section 4
of <xref target="RFC3688"/>.
    </t>
	<figure>
 <artwork><![CDATA[
  URI: urn:ietf:params:xml:ns:yang:ietf-yang-library

  Registrant Contact: The IESG.

  XML: N/A, the requested URI is an XML namespace.
]]></artwork>
	</figure>
    <t>
This document registers a YANG module in the &quot;YANG Module
Names&quot; registry <xref target="RFC6020"/>:
    </t>
	<figure>
    <artwork><![CDATA[
  name:         ietf-yang-library
  namespace:    urn:ietf:params:xml:ns:yang:ietf-yang-library
  prefix:       yanglib
  reference:    RFC 8525
    ]]></artwork>
	</figure>

</section>

<section title="Security Considerations" anchor="security-considerations">

<!-- Begin DNE -->
    <t>
The YANG module specified in this document defines a schema for data that is
designed to be accessed via network management protocols such as NETCONF 
<xref target="RFC6241"/> or RESTCONF <xref target="RFC8040"/>. 
The lowest NETCONF layer is the secure transport layer, and the
mandatory-to-implement secure transport is Secure Shell (SSH) <xref
target="RFC6242"/>. The lowest RESTCONF layer is HTTPS, and the
mandatory-to-implement secure transport is TLS <xref target="RFC8446"/>.
    </t>

    <t>
The Network Configuration Access Control Model (NACM) 
<xref target="RFC8341"/> 
provides the means to restrict access for particular NETCONF or RESTCONF users
to a preconfigured subset of all available NETCONF or RESTCONF protocol
operations and content. 
    </t>

    <t>
Some of the readable data nodes in this YANG module may be considered
sensitive or vulnerable in some network environments. It is thus important to
control read access (e.g., via get, get-config, or notification) to these data
nodes. These are the subtrees and data nodes and their
sensitivity/vulnerability: 
    </t>

<!-- End DNE -->

    <t>
The &quot;/yang&nbhy;library&quot; subtree of the YANG library may help an attacker
identify the server capabilities and server implementations with known
bugs since the set of YANG modules supported by a server may reveal
the kind of device and the manufacturer of the device.  Although some
of this information may be available to all NETCONF users via the
NETCONF &lt;hello&gt; message (or similar messages in other management
protocols), this YANG module potentially exposes additional details
that could be of some assistance to an attacker. Server
vulnerabilities may be specific to particular modules, module
revisions, module features, or even module deviations. For example, if
a particular operation on a particular data node is known to cause a
server to crash or significantly degrade device performance, then the
"module" list information will help an attacker identify server
implementations with such a defect, in order to launch a
denial-of-service attack on the device.
    </t>
</section>
</middle>
<back>


<references title="Normative References">

<?rfc include="reference.RFC.2119"?>
<?rfc include="reference.RFC.3688"?>
<?rfc include="reference.RFC.6020"?>
<?rfc include="reference.RFC.6241"?>
<?rfc include="reference.RFC.6242"?>
<?rfc include="reference.RFC.6991"?>
<?rfc include="reference.RFC.7950"?>
<?rfc include="reference.RFC.8040"?>
<?rfc include="reference.RFC.8174"?>
<?rfc include="reference.RFC.8341"?>
<?rfc include="reference.RFC.8342"?>
<?rfc include="reference.RFC.8446"?>

</references>

<references title="Informative References">


<?rfc include="reference.RFC.5277"?>
<?rfc include="reference.RFC.6470"?>
<?rfc include="reference.RFC.7895"?>
<?rfc include="reference.RFC.8340"?>
<?rfc include="reference.RFC.8343"?>
<?rfc include="reference.RFC.8344"?>
<?rfc include="reference.RFC.8345"?>
<?rfc include="reference.RFC.8348"?>
<?rfc include="reference.RFC.8349"?>

<!-- ietf-netconf-nmda-netconf -->

<reference anchor="RFC8526" target="https://www.rfc-editor.org/info/rfc8526">
<front>
<title>NETCONF Extensions to Support the Network Management Datastore Architecture</title>
<author initials='M' surname='Bjorklund' fullname='M. Bjorklund'>
  <organization/>
</author>

<author initials='J' surname='Schoenwaelder' fullname='J. Schoenwaelder'>
  <organization/>
</author>

<author initials='P' surname='Shafer' fullname='P. Shafer'>
  <organization/>
</author>

<author initials='K' surname='Watsen' fullname='K. Watsen'>
  <organization/>
</author>

<author initials='R' surname='Wilton' fullname='R. Wilton'>
  <organization/>
</author>

<date month='March' year='2019'/>
</front>
<seriesInfo name="RFC" value="8526"/>
<seriesInfo name="DOI" value="10.17487/RFC8526"/>
</reference>



<!-- ietf-netmod-schema-mount -->

<reference anchor="RFC8528" target="https://www.rfc-editor.org/info/rfc8528">
<front>
<title>YANG Schema Mount</title>

<author initials='M' surname='Bjorklund' fullname='M. Bjorklund'>
  <organization/>
</author>

<author initials='L' surname='Lhotka' fullname='L. Lhotka'>
  <organization/>
</author>

<date month='March' year='2019'/>
</front>
<seriesInfo name="RFC" value="8528"/>
<seriesInfo name="DOI" value="10.17487/RFC8528"/>
</reference>


</references>

<section title="Summary of Changes from RFC 7895" anchor="summary-of-changes-from-rfc-7895">
    <t>
This document changes <xref target="RFC7895"/> in the following ways:
    </t>
<t>
 <list style="symbols">
 <t>
Renamed document title from &quot;YANG Module Library&quot; to &quot;YANG Library&quot;.
 </t>
 <t>
Added a new top-level &quot;/yang&nbhy;library&quot; container to hold the entire
YANG library providing information about module sets, schemas, and
datastores.
 </t>
 <t>
Refactored the &quot;/modules&nbhy;state&quot; container into a new
&quot;/yang&nbhy;library/module&nbhy;set&quot; list.
 </t>
 <t>
Added a new &quot;/yang&nbhy;library/schema&quot; list and a new
&quot;/yang&nbhy;library/datastore&quot; list.
 </t>
 <t>
Added a set of new groupings as replacements for the deprecated
groupings.
 </t>
 <t>
Added a &quot;yang&nbhy;library&nbhy;update&quot; notification as a replacement for the
deprecated &quot;yang&nbhy;library&nbhy;change&quot; notification.
 </t>
 <t>
Deprecated the &quot;/modules&nbhy;state&quot; tree.
 </t>
 <t>
Deprecated the &quot;/module&nbhy;list&quot; grouping.
 </t>
 <t>
Deprecated the &quot;/yang&nbhy;library&nbhy;change&quot; notification.
 </t>
 </list>
</t>
</section>
<section title="Example YANG Library Instance for a Basic Server" anchor="example-yang-library-instance-for-a-basic-server">
    <t>
The following example shows the YANG library of a basic server
implementing the &quot;ietf&nbhy;interfaces&quot; <xref target="RFC8343"/> and
&quot;ietf&nbhy;ip&quot; <xref target="RFC8344"/> modules in the &lt;running&gt;,
&lt;startup&gt;, and &lt;operational&gt; datastores and the &quot;ietf&nbhy;hardware&quot;
<xref target="RFC8348"/> module in the &lt;operational&gt; datastore.
    </t>


    <t>
Newline characters in leaf values are added for formatting reasons.
    </t>

	<figure>
    <artwork><![CDATA[
<yang-library
    xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-library"
    xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores">

  <module-set>
    <name>config-modules</name>
    <module>
      <name>ietf-interfaces</name>
      <revision>2018-02-20</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-interfaces
      </namespace>
    </module>
    <module>
      <name>ietf-ip</name>
      <revision>2018-02-22</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-ip
      </namespace>
    </module>
    <import-only-module>
      <name>ietf-yang-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-yang-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>ietf-inet-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-inet-types
      </namespace>
    </import-only-module>
  </module-set>

  <module-set>
    <name>state-modules</name>
    <module>
      <name>ietf-hardware</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-hardware
      </namespace>
    </module>
    <import-only-module>
      <name>ietf-inet-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-inet-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>ietf-yang-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-yang-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>iana-hardware</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:iana-hardware
      </namespace>
    </import-only-module>
  </module-set>

  <schema>
    <name>config-schema</name>
    <module-set>config-modules</module-set>
  </schema>
  <schema>
    <name>state-schema</name>
    <module-set>config-modules</module-set>
    <module-set>state-modules</module-set>
  </schema>

  <datastore>
    <name>ds:startup</name>
    <schema>config-schema</schema>
  </datastore>
  <datastore>
    <name>ds:running</name>
    <schema>config-schema</schema>
  </datastore>
  <datastore>
    <name>ds:operational</name>
    <schema>state-schema</schema>
  </datastore>

  <content-id>75a43df9bd56b92aacc156a2958fbe12312fb285</content-id>
</yang-library>
    ]]></artwork>
</figure>
</section>


<section title="Example YANG Library Instance for an Advanced Server" anchor="example-yang-library-instance-for-an-advanced-server">
    <t>
The following example extends the example in <xref target="example-yang-library-instance-for-a-basic-server"/> 
by using modules from <xref target="RFC8345"/> and <xref
target="RFC8349"/> to illustrate
a slightly more advanced server that:
    </t>
<t>
 <list style="symbols">
 <t>
Has a module with features only enabled in &lt;operational&gt;; the
&quot;ietf-routing&quot; module is supported in &lt;running&gt;, &lt;startup&gt;, and
&lt;operational&gt;, but the &quot;multiple&nbhy;ribs&quot; and &quot;router&nbhy;id&quot; features are
only enabled in &lt;operational&gt;.  Hence, the &quot;router&nbhy;id&quot; leaf may be
read but not configured.
 </t>
 <t>
Supports a dynamic configuration datastore
&quot;example&nbhy;ds&nbhy;ephemeral&quot;, with only the &quot;ietf&nbhy;network&quot; and
&quot;ietf&nbhy;network&nbhy;topology&quot; modules configurable via a notional dynamic
configuration protocol.
 </t>
 <t>
Shows an example of datastore-specific deviations.  The 
&quot;example&nbhy;vendor&nbhy;hardware&nbhy;deviations&quot; module is included in
the schema for &lt;operational&gt; to remove data nodes that cannot be
supported by the server.
 </t>
 <t>
Shows how module-sets can be used to organize related modules together.
 </t>
 </list>
</t>

    <t>
Newline characters in leaf values are added for formatting reasons.
    </t>


	<figure>
    <artwork><![CDATA[
<yang-library
    xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-library"
    xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"
    xmlns:ex-ds-eph="urn:example:ds-ephemeral">

  <module-set>
    <name>config-state-modules</name>
    <module>
      <name>ietf-interfaces</name>
      <revision>2018-02-20</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-interfaces
      </namespace>
    </module>
    <module>
      <name>ietf-ip</name>
      <revision>2018-02-22</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-ip
      </namespace>
    </module>
    <module>
      <name>ietf-routing</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-routing
      </namespace>
    </module>
    <import-only-module>
      <name>ietf-yang-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-yang-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>ietf-inet-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-inet-types
      </namespace>
    </import-only-module>
  </module-set>

  <module-set>
    <name>config-only-modules</name>
    <module>
      <name>ietf-routing</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-routing
      </namespace>
    </module>
  </module-set>

  <module-set>
    <name>dynamic-config-state-modules</name>
    <module>
      <name>ietf-network</name>
      <revision>2018-02-26</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-network
      </namespace>
    </module>
    <module>
      <name>ietf-network-topology</name>
      <revision>2018-02-26</revision> 
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-network-topology
      </namespace>
    </module>
    <import-only-module>
      <name>ietf-inet-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-inet-types
      </namespace>
    </import-only-module>
  </module-set>

  <module-set>
    <name>state-only-modules</name>
    <module>
      <name>ietf-hardware</name>
      <revision>2018-03-13</revision> 
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-hardware
      </namespace>
      <deviation>example-vendor-hardware-deviations</deviation>
    </module>
    <module>
      <name>ietf-routing</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-routing
      </namespace>
      <feature>multiple-ribs</feature>
      <feature>router-id</feature>
    </module>
    <module>
      <name>example-vendor-hardware-deviations</name>
      <revision>2018-01-31</revision>
      <namespace>
        urn:example:example-vendor-hardware-deviations
      </namespace>
    </module>
    <import-only-module>
      <name>ietf-inet-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-inet-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>ietf-yang-types</name>
      <revision>2013-07-15</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:ietf-yang-types
      </namespace>
    </import-only-module>
    <import-only-module>
      <name>iana-hardware</name>
      <revision>2018-03-13</revision>
      <namespace>
        urn:ietf:params:xml:ns:yang:iana-hardware
      </namespace>
    </import-only-module>
  </module-set>

  <schema>
    <name>config-schema</name>
    <module-set>config-state-modules</module-set>
    <module-set>config-only-modules</module-set>
  </schema>
  <schema>
    <name>dynamic-config-schema</name>
    <module-set>dynamic-config-state-modules</module-set>
  </schema>
  <schema>
    <name>state-schema</name>
    <module-set>config-state-modules</module-set>
    <module-set>dynamic-config-state-modules</module-set>
    <module-set>state-only-modules</module-set>
  </schema>

  <datastore>
    <name>ds:startup</name>
    <schema>config-schema</schema>
  </datastore>
  <datastore>
    <name>ds:running</name>
    <schema>config-schema</schema>
  </datastore>
  <datastore>
    <name>ex-ds-eph:ds-ephemeral</name>
    <schema>dynamic-config-schema</schema>
  </datastore>
  <datastore>
    <name>ds:operational</name>
    <schema>state-schema</schema>
  </datastore>

  <content-id>14782ab9bd56b92aacc156a2958fbe12312fb285</content-id>
</yang-library>
    ]]></artwork>
</figure>
</section>


</back></rfc>
