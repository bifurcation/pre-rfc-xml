<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?rfc toc="yes"?>
<?rfc tocdepth="6"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc rfcedstyle="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>

<rfc number="7369" submissionType="IETF" category="std" consensus="yes" ipr="trust200902">

<front>
	<title abbrev="GMPLS-Based Ethernet OAM Configuration">
		GMPLS RSVP-TE Extensions for Ethernet Operations,
		Administration, and Maintenance (OAM) Configuration
	</title>

	<author fullname="Attila Takacs" initials="A. T." surname="Takacs">
		<organization> Ericsson </organization>
		<address>
				<postal>
					<street>Konyves Kalman krt. 11.</street>
					<city>Budapest</city>
					<code>1097</code>
					<region></region>
					<country>Hungary</country>
				</postal>
				<phone></phone>
				<email>attila.takacs@ericsson.com </email>
			</address>
		</author>

		<author fullname="Balazs Peter Gero" initials="B. P. G." surname="Gero">
			<organization> Ericsson </organization>
			<address>
				<postal>
				        <street>Konyves Kalman krt. 11.</street>
					<city>Budapest</city>
					<code>1097</code>
					<region></region>
					<country>Hungary</country>
				</postal>
				<phone></phone>
				<email>balazs.peter.gero@ericsson.com </email>
			</address>
		</author>
		
		<author fullname="Hao Long" initials="H. L." surname="Long">
			<organization> Huawei </organization>
			<address>
				<postal>
					<street></street>
					<city></city>
					<code></code>
					<region></region>
					<country>China</country>
				</postal>
				<phone></phone>
				<email>lonho@huawei.com </email>
			</address>
		</author>

<date month="October" year="2014"/>
<area> Routing Area </area>
<workgroup> Network Working Group </workgroup>



<abstract>
	<t>The work related to GMPLS Ethernet Label Switching (GELS) extended GMPLS RSVP-TE
	to support the establishment of Ethernet Label Switching Paths
	(LSPs). IEEE Ethernet Connectivity Fault
	Management (CFM) specifies an adjunct Operations, Administration, and
	Maintenance (OAM) flow to check connectivity in Ethernet
	networks. CFM can also be used with Ethernet LSPs for fault detection and triggering
	recovery mechanisms. The ITU-T Y.1731 specification builds on CFM and specifies
	additional OAM mechanisms, including Performance Monitoring, for Ethernet
	networks. This document specifies extensions of the GMPLS RSVP-TE
	protocol to support the setup
	of the associated Ethernet OAM entities of Ethernet LSPs and defines the Ethernet
	technology-specific TLVs based on the GMPLS OAM Configuration Framework. This document
	supports, but does not modify, the IEEE and ITU-T OAM mechanisms.</t>
</abstract>
	</front>

	<middle>

<section title="Background">

<t>Provider Backbone Bridging - Traffic Engineering (PBB-TE) <xref target="IEEE.802.1Q-2011"/>
decouples the Ethernet data and control planes and allows external control and management
mechanisms to create explicitly routed Ethernet connections.  In addition, PBB-TE defines
mechanisms for protection switching of bidirectional Ethernet connections.  Ethernet
Connectivity Fault Management (CFM) defines an adjunct connectivity-monitoring OAM flow to check
the liveliness of Ethernet networks <xref target="IEEE.802.1Q-2011" />, including the
monitoring of specific explicitly routed Ethernet connections. The ITU-T
Recommendation Y.1731 <xref target="ITU-T.G.8013-2013" /> extended CFM and
specified additional OAM functionality.</t>
		    
<t>In the IETF, the work related to GMPLS Ethernet Label Switching (GELS) extended the GMPLS control
plane to support the establishment of explicitly routed Ethernet connections 
<xref target="RFC5828"/> <xref target="RFC6060" />. We refer to GMPLS-established 
Ethernet connections as "Ethernet LSPs". GELS enables the application of MPLS-TE and
GMPLS provisioning and recovery features in Ethernet networks.</t>

<t> The use of GMPLS RSVP-TE to support the establishment and configuration of OAM entities
with LSP signaling is defined in a technology-agnostic way in <xref target="RFC7260"/>. 
The purpose of this document is to specify the additional technology-specific OAM entities to
support Ethernet connections.</t>

<section title='Requirements Language'>

<t> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in <xref target='RFC2119'/>.</t>
</section>


</section>
		    

<section title="Overview of Ethernet OAM Operation">
<t>For the purposes of this document, we only discuss Ethernet OAM aspects that are relevant for
proactive connectivity monitoring of Ethernet LSPs and assume that on-demand OAM functions will be supported by management-plane operations.</t>
		    
<t> 
PBB-TE defines point-to-point Ethernet Switched Paths (ESPs) as a provisioned, traffic-engineered,
unidirectional connectivity, identified by the 3-tuple [ESP-MAC DA, ESP-MAC SA,
ESP-VID], where the ESP-MAC DA is the destination address of the ESP, the
ESP-MAC SA is the source address of the ESP, and the ESP-VID is a VLAN identifier
allocated for explicitly routed connections. To form a bidirectional PBB-TE connection, two
co-routed point-to-point ESPs are combined. The combined ESPs must have the same ESP-MAC addresses
but may have different ESP-VIDs. The formed co-routed bidirectional path is a
path where the forward and backward directions follow the same route (links
and nodes) across the network.</t>
		    
<t>Note that although it would be possible to use GMPLS to set up a single unidirectional ESP, the
Ethernet OAM mechanisms are only fully functional when bidirectional connections are established
with co-routed ESPs. Therefore, the scope of this document only covers bidirectional point-to-point
PBB-TE connections.</t>
		   
 <t>At both ends of the bidirectional point-to-point PBB-TE connection, one
 Maintenance Entity Group End Point (MEP) is configured. The MEPs monitoring a PBB-TE
connection must be configured with the same Maintenance Domain Level (MD Level) and
Maintenance Association Identifier (MAID). Each MEP has a unique identifier, the MEP ID. Besides
these identifiers, a MEP monitoring a PBB-TE connection must be provisioned with the 3-tuples
[ESP-MAC DA, ESP-MAC SA, ESP-VID] of the two ESPs.</t>
		    
<t>In the case of point-to-point VLAN connections, the connection may be identified with a single
VLAN or with two VLANs, one for each direction. Therefore, instead of the 3-tuples of
the PBB-TE ESPs, MEPs must be provisioned with the proper VLAN identifiers.</t>
		    
<t>MEPs exchange Connectivity Check Messages (CCMs) periodically with fixed
intervals. Eight distinct intervals are defined in <xref target="IEEE.802.1Q-2011"/>:</t>

<?rfc compact="no" ?>		    
<texttable anchor='CCI-table' title="CCM Interval Encoding">
<ttcol align='center'>#</ttcol>
<ttcol align='center'>CCM Interval (CCI)</ttcol>
<ttcol align='center'>3-Bit Encoding</ttcol>
<c>0</c>   <c>Reserved</c>     <c>000</c>
<c>1</c>   <c>3 1/3 ms</c>    <c>001</c>
<c>2</c>   <c>10 ms</c>       <c>010</c>
<c>3</c>   <c>100 ms</c>      <c>011</c>
<c>4</c>   <c>1 s</c>         <c>100</c>
<c>5</c>   <c>10 s</c>	      <c>101</c>
<c>6</c>   <c>1 min</c>       <c>110</c>
<c>7</c>   <c>10 min</c>      <c>111</c>
</texttable>
<?rfc compact="yes" ?>

		    
<t>
If three consecutive CCMs are lost, connectivity failure is declared. The MEP
detecting the failure will signal the defect to the remote MEP in the
subsequent CCMs it emits by setting the Remote Defect Indicator
(RDI) bit in the CCM. If a MEP receives a CCM with the RDI bit set, it immediately
declares failure. The detection of a failure may trigger protection switching 
mechanisms or may be signaled to a management system.</t>
		    
<t>At each transit node, Maintenance Entity Group Intermediate Points (MIPs) may be
established to help failure localization, e.g., using link trace and 
loopback functions. MIPs need to be provisioned with a subset of the MEP 
identification parameters described above.</t>
</section>


<section title="GMPLS RSVP-TE Extensions">
  <section title="Operation Overview">
    <t>To simplify the configuration of connectivity monitoring, the associated
MEPs should be automatically established when an Ethernet LSP is signaled. To monitor an Ethernet LSP, a set of parameters must be 
    provided to set up a Maintenance Association and related MEPs. Optionally, 
    MIPs may be created at the transit nodes of the Ethernet LSP. The LSP 
    Attribute Flags "OAM MEP entities desired" and
    "OAM MIP entities desired", as described in <xref target="RFC7260"/>, are 
    used to signal that the respective OAM entities must be established. An
    OAM Configuration TLV, as described in <xref target="RFC7260"/>, is added
    to the LSP_ATTRIBUTES or LSP_REQUIRED_ATTRIBUTES objects specifying that
    Ethernet OAM is to be set up for the LSP. Information specific to Ethernet
    OAM, as described below, is carried in the new Ethernet 
    OAM Configuration Sub-TLV (see <xref target='OAM_config_subtlv'/>) within the OAM Configuration TLV.</t>
 
<t><list style="symbols">
  <t> A unique MAID must be allocated for the PBB-TE connection, and both MEPs
  must be configured with the same information. The MAID consists of an optional
  Maintenance Domain Name (MD Name) and a mandatory Short Maintenance
  Association Name (Short MA Name). Various formatting rules for these names
  have been defined in <xref target="IEEE.802.1Q-2011"/>. Since this
  information is also carried in all CCMs, the combined length of the 
  MD Name and Short MA Name is limited to 44 bytes (see <xref target="IEEE.802.1Q-2011"/> for the 
  details of the message format). How these parameters are determined is out of
  the scope of this document.</t>
	
  <t> Each MEP must be provisioned with a MEP ID. The MEP ID uniquely
  identifies a given MEP within a Maintenance Association. That is, the combination of
  MAID and MEP ID must uniquely identify a MEP. How the value of the MEP ID is
  determined is out of the scope of this document.</t>
		
  <t> The Maintenance Domain Level (MD Level) allows hierarchical separation
  of monitoring entities. <xref target="IEEE.802.1Q-2011"/> allows differentiation of eight
  levels. How the value of the MD Level is determined is out of the scope of this
  document. Note that probably for all Ethernet LSPs, a single (default) MD Level
  will be used within a network domain.</t>
		
  <t> The desired CCM Interval must be specified by the management system
  based on service requirements or operator policy. The same CCM Interval must be set in
  each of the MEPs monitoring a given Ethernet LSP. How the value of the CCM
  Interval is determined is out of the scope of this document.</t>
		
  <t> The desired forwarding priority to be set by MEPs for the CCM frames may
  be specified. The same CCM priority must be set in each of the MEPs monitoring a
  given Ethernet LSP. How CCM priority is determined is out of the scope of this
  document. Note that the highest priority should be used as the default CCM
  priority.</t> 



  <t>MEPs must be aware of their own reachability parameters and
 those of the remote MEP. In the case of bidirectional point-to-point PBB-TE
  connections, this requires that the 3-tuples [ESP-MAC A, ESP-MAC B,
  ESP-VID1] and [ESP-MAC B, ESP-MAC A, ESP-VID2] are configured in each MEP,
  where the ESP-MAC A is the same as the local MEP's Media Access Control (MAC) address and ESP-MAC B is
  the same as the remote MEP's MAC address. The GMPLS Ethernet Label format, as
  defined in <xref target="RFC6060" />, consists of the ESP-MAC DA and
  ESP-VID. Hence, the necessary reachability parameters for the MEPs can be
  obtained from the Ethernet Labels (i.e., carried in the downstream and upstream
  labels). In the case of point-to-point VLAN connections, MEPs need to be
  provisioned with the VLAN identifiers only, which can be derived similarly from
  the Ethernet Labels.</t>

</list>
</t>


		<t>Based on the procedures described in <xref
		target="RFC6060" /> for bidirectional PBB-TE Ethernet
		LSP establishment, the Ethernet OAM configuration
		procedures are as follows. </t>

		<t>When the RSVP-TE signaling is initiated for the
		bidirectional Ethernet LSP, the local node generates a
		Path message and:
		</t>
		
		<t>
		<list style="symbols">

		<t> Allocates an upstream label formed by combining
		its MAC address (ESP-MAC A) and locally selected VID
		(ESP-VID1), which will be used to receive traffic;</t>

		<t> MUST include the OAM Configuration TLV with OAM
		Type set to Ethernet OAM in the LSP_ATTRIBUTES or
		LSP_REQUIRED_ATTRIBUTES objects;</t>

		<t> MUST include the OAM Function Flags Sub-TLV in the OAM
		Configuration TLV and set the OAM function flags as
		needed;</t>

		<t> MUST include an Ethernet OAM Configuration Sub-TLV
		in the OAM Configuration TLV that specifies the CCM
		Interval and MD Level;</t>

		<t> MAY add an MD Name Sub-TLV (optional) and MUST add
		a Short MA Name Sub-TLV (required) to the Ethernet OAM
		Configuration Sub-TLV, which will unambiguously identify a
		Maintenance Association for this specific PBB-TE
		connection. Note that values for these parameters may
		be derived from the GMPLS LSP identification
		parameters; and</t>

		<t> MUST include a MEP ID Sub-TLV in the Ethernet OAM
		Configuration Sub-TLV and select two distinct integer
		values to identify the local and remote MEPs within
		the Maintenance Association created for monitoring of
		the point-to-point PBB-TE connection.</t>
		
		</list>
		</t>

		<t>
		Once the remote node receives the Path message, it can
		use the UPSTREAM_LABEL to extract the reachability
		information of the initiator. Then, it allocates a
		Label by selecting a local MAC address (ESP-MAC B) and
		VID (ESP-VID2) that will be used to receive
		traffic. These parameters determine the reachability
		information of the local MEP. That is, the 3-tuples
		[ESP-MAC A, ESP-MAC B, ESP-VID1] and [ESP-MAC B,
		ESP-MAC A, ESP-VID2] are derived from the Ethernet
		Labels. In addition, the information received in the
		Ethernet OAM Configuration TLV is used to configure
		the local MEP.
		</t>
		
		<t>
		Once the Resv message successfully arrives to the
		initiator, this end can extract the remote side's
		reachability information from the Label object and
		therefore has all the information needed to
		properly configure its local MEP.
		</t>
		

		</section> 

		<section title="OAM Configuration TLV">
		<t>
		This TLV is specified in <xref target="RFC7260" />
		and is used to select which OAM technology/method
		should be used for the LSP. In this document, a new
		OAM Type, Ethernet OAM, is defined. IANA has
		allocated OAM Type 1 for Ethernet OAM in the "RSVP-TE
		OAM Configuration Registry".
		</t>

<t><figure>
<artwork><![CDATA[ 
  RSVP-TE OAM Configuration Registry

    OAM Type           Description      
  ------------      ------------------
      1               Ethernet OAM
]]></artwork>
</figure></t>
                <t>
		When the Ethernet OAM Type is requested, the receiving node
		should look for the corresponding technology-specific 
		Ethernet OAM Configuration Sub-TLV.
		</t>

		</section>

		<section title="Ethernet OAM Configuration Sub-TLV" anchor='OAM_config_subtlv'>

		<t>
		The Ethernet OAM Configuration Sub-TLV (depicted
		below) is defined for 
		configuration parameters specific to Ethernet OAM. The Ethernet OAM
		Configuration Sub-TLV, when used, MUST be carried in
		the OAM Configuration TLV. This new sub-TLV
		accommodates Ethernet OAM information and carries
		sub-TLVs.
		</t>

<t><figure>
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type 32             |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Version |MD L.|           Reserved (set to all 0s)            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               | 
~                           Sub-TLVs                            ~
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure></t>

		<t>Type: Indicates a new type, the Ethernet OAM
		Configuration Sub-TLV. IANA has assigned the
		value 32 from the "OAM Sub-TLVs" space in the "RSVP-TE OAM
		Configuration Registry". </t>
		
		<t>Length: Indicates the total length of the TLV
		including padding and including the Type and Length
		fields.</t>
		
		<t>Version: Identifies the CFM protocol version
		according to <xref target="IEEE.802.1Q-2011" />. If a
		node does not support a specific CFM version, an error
		MUST be generated: "OAM Problem/Unsupported OAM
		Version".</t>

		<t>MD L.&nbsp;(MD Level): Indicates the desired MD
		Level. Possible values are defined according to <xref
		target="IEEE.802.1Q-2011" />. If a node does not support a
		specific MD Level, an error MUST be generated: "OAM
		Problem/Unsupported MD Level". </t>
		

		<section title="MD Name Sub-TLV">

		<t>
		The optional MD Name Sub-TLV is depicted below. It MAY
		be used for MD naming.
		</t>
<t><figure>
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type (1)            |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Format     |  Name Length  |   Reserved (set to all 0s)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               | 
~                            MD Name                            ~
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure></t>
                <t>Type: 1, MD Name Sub-TLV. IANA will
                maintain an Ethernet TLV Type space in the "RSVP-TE
                OAM Configuration Registry" for the sub-TLV types
                carried in the Ethernet OAM Configuration Sub-TLV.</t>

		<t>Length: Indicates the total length of the TLV,
		including padding and the Type and Length
		fields.</t>
		
		<t>Format: According to <xref target="IEEE.802.1Q-2011" />.</t>

		<t>Name Length: The length of the MD Name field in
		bytes. This is necessary to allow non-4-byte padded MD
		Name lengths.</t>
		
		<t>MD Name: Variable-length field, formatted according
		to the format specified in the Format field.</t>

		<t>
		If an undefined Format is specified, an error MUST be
		generated: "OAM Problem/Unknown MD Name Format". Also,
		the combined length of MD Name and Short MA Name MUST
		be less than or equal to 44 bytes. If this is violated, an
		error MUST be generated: "OAM Problem/Name Length
		Problem". Note that it is allowed to have no MD Name;
		therefore, the MD Name Sub-TLV is optional. In this
		case, the MA Name must uniquely identify a Maintenance
		Association.
		</t>
		</section>

		<section title="Short MA Name Sub-TLV">

		<t>
		The Short MA Name Sub-TLV is depicted below. This
		sub-TLV MUST be present in the Ethernet OAM
		Configuration Sub-TLV.
		</t>
<t><figure>
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type (2)            |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Format     |  Name Length  |   Reserved (set to all 0s)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               | 
~                       Short MA Name                           ~
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure></t>

                <t>Type: 2, Short MA Name Sub-TLV. IANA will
                maintain an Ethernet TLV Type space in the "RSVP-TE
                OAM Configuration Registry" for the sub-TLV types
                carried in the Ethernet OAM Configuration Sub-TLV.</t>
		
		<t>Length: Indicates the total length of the TLV,
		including padding and the Type and Length
		fields.</t>

		<t>Format: According to <xref target="IEEE.802.1Q-2011"/>.</t>
	
		<t>Name Length: The length of the Short MA Name field in
		bytes. This is necessary to allow non-4-byte padded MA
		Name lengths.</t>

		<t>Short MA Name: Variable-length field formatted
		according to the format specified in the Format field.</t>

		<t> If an undefined Format is specified, an error MUST
		be generated: "OAM Problem/Unknown MA Name
		Format". Also, the combined length of MD Name and Short
		MA Name MUST be less than or equal to 44 bytes. If this is
		violated, an error MUST be generated: "OAM Problem/Name
		Length Problem". Note that it is allowed to have no MD
		Name; in this case, the MA Name MUST uniquely identify
		a Maintenance Association.
		</t>
		</section>
		
		<section title="MEP ID Sub-TLV">
		<t>
		The MEP ID Sub-TLV is depicted below. This sub-TLV
		MUST be present in the Ethernet OAM Configuration
		Sub-TLV.
		</t>
<t><figure>
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type (3)            |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Local MEP ID           |T|R|      Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Remote MEP ID          |T|R|      Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure></t>


                <t>Type: 3, MEP ID Sub-TLV. IANA will
                maintain an Ethernet TLV Type space in the "RSVP-TE
                OAM Configuration Registry" for the sub-TLV types
                carried in the Ethernet OAM Configuration Sub-TLV.</t>

		<t>Length: Indicates the total length of the TLV,
		including padding and the Type and Length
		fields.</t>
		
		<t>Local MEP ID: A 16-bit integer value in the range
		1-8191 of the MEP ID on the initiator side.</t>

		<t> Remote MEP ID: A 16-bit integer value in the range
		1-8191 of the MEP ID to be set for the MEP established
		at the receiving side. This value is determined by the
		initiator node. This is possible since a new MAID is
		assigned to each PBB-TE connection, and MEP IDs must
		be only unique within the scope of the MAID.</t>

		<t> Two flags are defined: Transmit (T) and Receive
		(R). When T is set, the corresponding MEP MUST send OAM
		packets. When R is set, the corresponding MEP MUST
		expect to receive OAM packets. These flags are used to
		configure the role of MEPs. </t>

		</section>

		<section title="Continuity Check (CC) Sub-TLV">

		<t>
		The Continuity Check (CC) Sub-TLV is depicted below.
		This sub-TLV MUST be present in the Ethernet OAM
		Configuration Sub-TLV.
		</t>
<t><figure>
<artwork><![CDATA[ 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type (4)            |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Prio  | CCM I |           Reserved (set to all 0s)            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure></t>
                <t>Type: 4, Continuity Check (CC) Sub-TLV. IANA
                will  maintain an Ethernet TLV Type space in
                the "RSVP-TE OAM Configuration Registry" for the
                sub-TLV types carried in the Ethernet OAM
                Configuration Sub-TLV.</t>

		<t>Length: Indicates the total length of the TLV,
		including padding and the Type and Length
		fields.</t>
		
                <t>Prio: Indicates the priority to be set for CCM
                frames. In Ethernet, 3 bits carried in VLAN TAGs
                identify priority information. Setting the priority is
                optional. If the most significant bit is set to zero,
                the subsequent 3 priority bits will be ignored, and
                priority bits of the Ethernet CCM frame will be set
                based on default values specified in the Ethernet
                nodes. If the most significant bit is set to 1, the
                subsequent 3 bits will be used to set the priority bits
                of the Ethernet CCM frame.</t>
		
		<t>CCM I (CCM Interval): MUST be set
		according to the 3-bit encoding <xref
		target="IEEE.802.1Q-2011"/> shown in Table 1. As a
		consequence, the most significant bit will be set to
		0. Four bits are allocated to support the
		configuration of CCM Intervals that may be specified
		in the future. If a node does not support the
		requested CCM Interval, an error MUST be generated:
		"OAM Problem/Unsupported CC Interval".</t>


                </section>


                </section>


		<section title="Proactive Performance Monitoring">
		<t>
		Ethernet OAM functions for Performance Monitoring (PM)
		allow measurements of different performance parameters
		including Frame Loss Ratio, Frame Delay, and Frame
		Delay Variation as defined in <xref
		target="ITU-T.G.8013-2013" />. Only a subset of PM
		functions are operated in a proactive fashion to
		monitor the performance of the connection
		continuously. Proactive PM supports Fault Management
		functions by providing an indication of decreased
		service performance and therefore may provide triggers
		to initiate recovery procedures.
		</t>
		<t>
		While on-demand PM functions are, for the purposes of
		this document, always initiated by management
		commands, for proactive PM, it may be desirable to
		utilize the control plane for configuration and
		activation together with Fault Management functions
		such as the Continuity Check.
		</t>
		<t>
		<xref target="ITU-T.G.8013-2013" /> defines dual-ended
		Loss Measurement as proactive OAM for Performance
		Monitoring and as a PM function applicable to Fault
		Management. For dual-ended Loss Measurement, each MEP
		piggybacks transmitted and received frame counters on
		CC messages to support and synchronize bidirectional
		Loss Measurements at the MEPs. Dual-ended Loss
		Measurement is supported by setting the Performance
		Monitoring/Loss OAM Function Flag and the Continuity
		Check Flag in the OAM Function Flags Sub-TLV <xref
		target="RFC7260"/> and configuring the
		Continuity Check functionality by including the
		Ethernet OAM Configuration Sub-TLV. No additional
		configuration is required for this type of Loss
		Measurement.
		</t>

		</section> 


		<section title="Summary of Ethernet OAM Configuration Errors">


		<t>
		In addition to the error values specified in <xref
		target="RFC7260"/>, this document defines the
		following values for the "OAM Problem" Error Code.
		</t>

		<t>
		<list style="symbols">
		<t>
		If a node does not support a specific CFM version, an
		error MUST be generated: "OAM Problem/Unsupported OAM
		Version".
		</t>
		<t>
		If a node does not support a specific MD Level, an
		error MUST be generated: "OAM Problem/Unsupported MD
		Level".
		</t>
		<t>
		If an undefined MD name format is specified, an error MUST be
		generated: "OAM Problem/Unknown MD Name Format". 
		</t>
		<t>
		If an undefined MA name format is specified, an error
		MUST be generated: "OAM Problem/Unknown MA Name
		Format".
		</t>
		<t>
		The combined length of MD Name and Short MA Name
		must be less than or equal to 44 bytes. If this is violated,
		an error MUST be generated: "OAM Problem/Name Length
		Problem".
		</t>
		<t>
		If a node does not support the requested CCM Interval, an
		error MUST be generated: "OAM Problem/Unsupported
		CC Interval".
		</t>
		</list>
		</t>

		</section>



	     </section>




		<section anchor="IANA" title="IANA Considerations">

		  <section title="RSVP-TE OAM Configuration Registry">
		    
		    <t>IANA maintains the "RSVP-TE OAM Configuration
		    Registry". IANA has assigned an "OAM
		    Type" from this registry as follows:</t>

		    <t><list style='symbols'>

		    <t>"Ethernet OAM" has been allocated type 1 from the "OAM Types"
		    sub-registry of the "RSVP-TE OAM Configuration
		    Registry".</t> 

		    <t>"Ethernet
		    OAM Configuration Sub-TLV" has been allocated type 32 from the
		    technology-specific range of the "OAM Sub-TLVs"
		    sub-registry of the "RSVP-TE OAM Configuration

		    Registry".</t>
		  </list>  
		  </t>
		  

		
<t><figure>
<artwork><![CDATA[ 
RSVP-TE OAM Configuration Registry

  OAM Types 

  OAM Type Number | Description  | Reference   
  -------------------------------------------
        1         | Ethernet OAM | [RFC7369]

  OAM Sub-TLVs 

  Sub-TLV Type |        Description               |   Ref.
  -----------------------------------------------------------
      32       |Ethernet OAM Configuration Sub-TLV| [RFC7369]
]]></artwork>
</figure></t>


		  </section>


		<section title="Ethernet Sub-TLVs Sub-Registry">
        	<t>
		IANA will maintain an "Ethernet Sub-TLVs
		Sub-Registry" in the "RSVP-TE OAM Configuration Registry"
		for the sub-TLV types carried in the Ethernet OAM
		Configuration Sub-TLV. This document defines the
		following types.
		</t>

<t><figure>
<artwork><![CDATA[ 
Ethernet Sub-TLVs Sub-Registry

   Range       |  Registration Procedures
   ------------+--------------------------
   0-65534     |  IETF Review
    65535      |  Experimental

  Sub-TLV Type |      Description               |  Ref.
  ---------------------------------------------------------
      0        |  Reserved                      | [RFC7369]
      1        |  MD Name Sub-TLV               | [RFC7369]
      2        |  Short MA Name Sub-TLV         | [RFC7369]
      3        |  MEP ID Sub-TLV                | [RFC7369]
      4        |  Continuity Check Sub-TLV      | [RFC7369]
      5-65534  |  Unassigned                    | [RFC7369]
      65535    |  Reserved for Experimental Use | [RFC7369]
]]></artwork>
</figure></t>

                </section>


		
		<section title="RSVP Error Code">
		<t>IANA maintains an Error Code, "OAM Problem", in the "Error
		Codes and Globally-Defined Error Value Sub-Codes"
		sub-registry of the "Resource Reservation Protocol
		(RSVP) Parameters" registry. <xref target='RFC7260'/> defines a
		set of Error Value sub-codes for the "OAM Problem"
		Error Code. This document defines additional Error
		Value sub-codes for the "OAM Problem" Error Code as
		summarized below.</t>

<t><figure>
<artwork><![CDATA[ 
       Value | Description               | Reference
      -------+---------------------------+-----------
          7  | Unsupported OAM Version   | [RFC7369]
          8  | Unsupported MD Level      | [RFC7369]
          9  | Unknown MD Name Format    | [RFC7369]
         10  | Unknown MA Name Format    | [RFC7369]
         11  | Name Length Problem       | [RFC7369]
         12  | Unsupported CC Interval   | [RFC7369]
]]></artwork>
</figure></t>
                
  		</section>

		</section>

		<section anchor="Security" title="Security Considerations">
		<t>
		This document does not introduce any additional
		security issues to those discussed in <xref
		target="RFC7260"/> and <xref target="RFC6060"/>.
		</t>
<t>
The signaling of OAM-related parameters and the automatic
   establishment of OAM entities based on RSVP-TE messages add a new
   aspect to the security considerations discussed in <xref target="RFC3473"/>.  In
   particular, a network element could be overloaded if a remote
   attacker targeted that element by sending frequent periodic messages
   requesting liveliness monitoring of a high number of LSPs.  Such an
   attack can efficiently be prevented when mechanisms for message
   integrity and node authentication are deployed.  Since the OAM
   configuration extensions rely on the hop-by-hop exchange of exiting
   RSVP-TE messages, procedures specified for RSVP message security in
   <xref target="RFC2747"/> can be used to mitigate possible attacks.
</t>
<t>
   For a more comprehensive discussion of GMPLS security and attack
   mitigation techniques, please see "Security Framework for MPLS and
   GMPLS Networks" <xref target="RFC5920"/>.
</t>		
		</section>
		



	</middle>
	<back>
<references title="Normative References">







<reference anchor='RFC7260' target='http://www.rfc-editor.org/info/rfc7260'>

<front>
<title>GMPLS RSVP-TE Extensions for Operations, Administration, and Maintenance (OAM) Configuration</title>
<author initials='A.' surname='Takacs' fullname='A. Takacs'>
<organization /></author>
<author initials='D.' surname='Fedyk' fullname='D. Fedyk'>
<organization /></author>
<author initials='J.' surname='He' fullname='J. He'>
<organization /></author>
<date year='2014' month='June' />
<abstract>
<t>Operations, Administration, and Maintenance (OAM) is an integral part of transport connections; hence, it is required that OAM functions be activated/deactivated in sync with connection commissioning/ decommissioning, in order to avoid spurious alarms and ensure consistent operation.  In certain technologies, OAM entities are inherently established once the connection is set up, while other technologies require extra configuration to establish and configure OAM entities.  This document specifies extensions to Resource Reservation Protocol - Traffic Engineering (RSVP-TE) to support the establishment and configuration of OAM entities along with Label Switched Path signaling.</t></abstract></front>

<seriesInfo name='RFC' value='7260' />
<format type='TXT' octets='58030' target='http://www.rfc-editor.org/rfc/rfc7260.txt' />
</reference>



<reference anchor='RFC6060' target='http://www.rfc-editor.org/info/rfc6060'>

<front>
<title>Generalized Multiprotocol Label Switching (GMPLS) Control of Ethernet Provider Backbone Traffic Engineering (PBB-TE)</title>
<author initials='D.' surname='Fedyk' fullname='D. Fedyk'>
<organization /></author>
<author initials='H.' surname='Shah' fullname='H. Shah'>
<organization /></author>
<author initials='N.' surname='Bitar' fullname='N. Bitar'>
<organization /></author>
<author initials='A.' surname='Takacs' fullname='A. Takacs'>
<organization /></author>
<date year='2011' month='March' />
<abstract>
<t>This specification is complementary to the GMPLS Ethernet Label Switching Architecture and Framework and describes the technology-specific aspects of GMPLS control for Provider Backbone Bridge Traffic Engineering (PBB-TE).  The necessary GMPLS extensions and mechanisms are described to establish Ethernet PBB-TE point-to-point (P2P) and point-to-multipoint (P2MP) connections.  This document supports, but does not modify, the standard IEEE data plane. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='6060' />
<format type='TXT' octets='45600' target='http://www.rfc-editor.org/rfc/rfc6060.txt' />
</reference>


  




<reference anchor='RFC2119' target='http://www.rfc-editor.org/info/rfc2119'>

<front>
<title abbrev='RFC Key Words'>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='Scott Bradner'>
<organization>Harvard University</organization>
<address>
<postal>
<street>1350 Mass. Ave.</street>
<street>Cambridge</street>
<street>MA 02138</street></postal>
<phone>- +1 617 495 3864</phone>
<email>sob@harvard.edu</email></address></author>
<date year='1997' month='March' />
<area>General</area>
<keyword>keyword</keyword>
<abstract>
<t>
   In many standards track documents several words are used to signify
   the requirements in the specification.  These words are often
   capitalized.  This document defines these words as they should be
   interpreted in IETF documents.  Authors who follow these guidelines
   should incorporate this phrase near the beginning of their document:

<list>
<t>
      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in
      RFC 2119.
</t></list></t>
<t>
   Note that the force of these words is modified by the requirement
   level of the document in which they are used.
</t></abstract></front>

<seriesInfo name='BCP' value='14' />
<seriesInfo name='RFC' value='2119' />
<format type='TXT' octets='4723' target='http://www.rfc-editor.org/rfc/rfc2119.txt' />
<format type='HTML' octets='17970' target='http://xml.resource.org/public/rfc/html/rfc2119.html' />
<format type='XML' octets='5777' target='http://xml.resource.org/public/rfc/xml/rfc2119.xml' />
</reference>


    <reference anchor="IEEE.802.1Q-2011">
        <front>
          <title>IEEE Standard for Local and metropolitan area 
	  networks--Media Access Control (MAC) Bridges and Virtual Bridged Local Area
          Networks</title>

          <author>
	    <organization>IEEE</organization>
          </author>
          <date year="2011"/>
        </front>

        <seriesInfo name="IEEE Std" value="802.1Q"/>
      </reference> 

</references>
<references title="Informative References">


<reference anchor='RFC5828' target='http://www.rfc-editor.org/info/rfc5828'>

<front>
<title>Generalized Multiprotocol Label Switching (GMPLS) Ethernet Label Switching Architecture and Framework</title>
<author initials='D.' surname='Fedyk' fullname='D. Fedyk'>
<organization /></author>
<author initials='L.' surname='Berger' fullname='L. Berger'>
<organization /></author>
<author initials='L.' surname='Andersson' fullname='L. Andersson'>
<organization /></author>
<date year='2010' month='March' />
<abstract>
<t>There has been significant recent work in increasing the capabilities of Ethernet switches and Ethernet forwarding models.  As a consequence, the role of Ethernet is rapidly expanding into "transport networks" that previously were the domain of other technologies such as Synchronous Optical Network (SONET) / Synchronous Digital Hierarchy (SDH), Time-Division Multiplexing (TDM), and Asynchronous Transfer Mode (ATM).  This document defines an architecture and framework for a Generalized- MPLS-based control plane for Ethernet in this "transport network" capacity.  GMPLS has already been specified for similar technologies.  Some additional extensions to the GMPLS control plane are needed, and this document provides a framework for these extensions.  This document is not an Internet Standards Track specification; it is published for informational purposes.</t></abstract></front>

<seriesInfo name='RFC' value='5828' />
<format type='TXT' octets='46396' target='http://www.rfc-editor.org/rfc/rfc5828.txt' />
</reference>






<reference anchor='RFC2747' target='http://www.rfc-editor.org/info/rfc2747'>

<front>
<title>RSVP Cryptographic Authentication</title>
<author initials='F.' surname='Baker' fullname='Fred Baker'>
<organization>Cisco Systems</organization>
<address>
<postal>
<street>519 Lado Drive</street>
<city>Santa Barbara</city>
<region>CA</region>
<code>93111</code>
<country>US</country></postal>
<phone>+1 408 526 4257</phone>
<email>fred@cisco.com</email></address></author>
<author initials='B.' surname='Lindell' fullname='Bob Lindell'>
<organization>USC Information Sciences Institute</organization>
<address>
<postal>
<street>4676 Admiralty Way</street>
<city>Marina del Rey</city>
<region>CA</region>
<code>90292</code>
<country>US</country></postal>
<phone>+1 310 822 1511</phone>
<email>lindell@ISI.EDU</email></address></author>
<author initials='M.' surname='Talwar' fullname='Mohit Talwar'>
<organization>Microsoft Corporation</organization>
<address>
<postal>
<street>One Microsoft Way</street>
<city>Redmond</city>
<region>WA</region>
<code>98052</code>
<country>US</country></postal>
<phone>+1 425 705 3131</phone>
<email>mohitt@microsoft.com</email></address></author>
<date year='2000' month='January' />
<abstract>
<t>This document describes the format and use of RSVP's INTEGRITY object to provide hop-by-hop integrity and authentication of RSVP messages.</t></abstract></front>

<seriesInfo name='RFC' value='2747' />
<format type='TXT' octets='49477' target='http://www.rfc-editor.org/rfc/rfc2747.txt' />
</reference>


<reference anchor='RFC3473' target='http://www.rfc-editor.org/info/rfc3473'>

<front>
<title>Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions</title>
<author initials='L.' surname='Berger' fullname='L. Berger'>
<organization /></author>
<date year='2003' month='January' />
<abstract>
<t>This document describes extensions to Multi-Protocol Label Switching (MPLS) Resource ReserVation Protocol - Traffic Engineering (RSVP-TE) signaling required to support Generalized MPLS.  Generalized MPLS extends the MPLS control plane to encompass time-division (e.g., Synchronous Optical Network and Synchronous Digital Hierarchy, SONET/SDH), wavelength (optical lambdas) and spatial switching (e.g., incoming port or fiber to outgoing port or fiber).  This document presents a RSVP-TE specific description of the extensions.  A generic functional description can be found in separate documents. [STANDARDS-TRACK]</t></abstract></front>

<seriesInfo name='RFC' value='3473' />
<format type='TXT' octets='91808' target='http://www.rfc-editor.org/rfc/rfc3473.txt' />
</reference>



<reference anchor='RFC5920' target='http://www.rfc-editor.org/info/rfc5920'>

<front>
<title>Security Framework for MPLS and GMPLS Networks</title>
<author initials='L.' surname='Fang' fullname='L. Fang'>
<organization /></author>
<date year='2010' month='July' />
<abstract>
<t>This document provides a security framework for Multiprotocol Label Switching (MPLS) and Generalized Multiprotocol Label Switching (GMPLS) Networks.  This document addresses the security aspects that are relevant in the context of MPLS and GMPLS.  It describes the security threats, the related defensive techniques, and the mechanisms for detection and reporting.  This document emphasizes RSVP-TE and LDP security considerations, as well as inter-AS and inter-provider security considerations for building and maintaining MPLS and GMPLS networks across different domains or different Service Providers.  This document is not an Internet Standards Track specification; it is published for informational purposes.</t></abstract></front>

<seriesInfo name='RFC' value='5920' />
<format type='TXT' octets='152830' target='http://www.rfc-editor.org/rfc/rfc5920.txt' />
</reference>

      <reference anchor="ITU-T.G.8013-2013">
        <front>
          <title>OAM functions
            and mechanisms for Ethernet based networks</title>
          <author>
            <organization>International Telecommunications Union</organization>
          </author>

          <date month="November" year="2011"/>
        </front>
        <seriesInfo name="ITU-T" value="Recommendation G.8013/Y.1731"/>
      </reference> 

    		</references>

		<section title="Acknowledgements">
		<t>
		The authors would like to thank Francesco Fondelli,
		Adrian Farrel, Loa Andersson, Eric Gray, and Dimitri
		Papadimitriou for their useful comments.
		</t>
		</section>


		<section title="Contributors">
		<t>
		Don Fedyk<vspace />EMail: don.fedyk@hp.com
		</t>
                <t>
                Dinesh Mohan<vspace />EMail: dinmohan@hotmail.com
		</t>

		</section>
	</back>
</rfc>
